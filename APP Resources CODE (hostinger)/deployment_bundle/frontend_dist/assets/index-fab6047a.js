(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function wm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pc={exports:{}},hi={},mc={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),Sm=Symbol.for("react.portal"),Tm=Symbol.for("react.fragment"),Em=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),_m=Symbol.for("react.provider"),Im=Symbol.for("react.context"),km=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Rm=Symbol.for("react.lazy"),Ea=Symbol.iterator;function Pm(t){return t===null||typeof t!="object"?null:(t=Ea&&t[Ea]||t["@@iterator"],typeof t=="function"?t:null)}var hc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gc=Object.assign,yc={};function jn(t,e,n){this.props=t,this.context=e,this.refs=yc,this.updater=n||hc}jn.prototype.isReactComponent={};jn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vc(){}vc.prototype=jn.prototype;function xl(t,e,n){this.props=t,this.context=e,this.refs=yc,this.updater=n||hc}var wl=xl.prototype=new vc;wl.constructor=xl;gc(wl,jn.prototype);wl.isPureReactComponent=!0;var Ca=Array.isArray,xc=Object.prototype.hasOwnProperty,Sl={current:null},wc={key:!0,ref:!0,__self:!0,__source:!0};function Sc(t,e,n){var o,r={},i=null,s=null;if(e!=null)for(o in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)xc.call(e,o)&&!wc.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),c=0;c<u;c++)d[c]=arguments[c+2];r.children=d}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Yo,type:t,key:i,ref:s,props:r,_owner:Sl.current}}function Mm(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function Lm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _a=/\/+/g;function Fi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lm(""+t.key):e.toString(36)}function _r(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Yo:case Sm:s=!0}}if(s)return s=t,r=r(s),t=o===""?"."+Fi(s,0):o,Ca(r)?(n="",t!=null&&(n=t.replace(_a,"$&/")+"/"),_r(r,e,n,"",function(c){return c})):r!=null&&(Tl(r)&&(r=Mm(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(_a,"$&/")+"/")+t)),e.push(r)),1;if(s=0,o=o===""?".":o+":",Ca(t))for(var u=0;u<t.length;u++){i=t[u];var d=o+Fi(i,u);s+=_r(i,e,n,d,r)}else if(d=Pm(t),typeof d=="function")for(t=d.call(t),u=0;!(i=t.next()).done;)i=i.value,d=o+Fi(i,u++),s+=_r(i,e,n,d,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function or(t,e,n){if(t==null)return t;var o=[],r=0;return _r(t,o,"","",function(i){return e.call(n,i,r++)}),o}function Dm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},Ir={transition:null},Um={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Ir,ReactCurrentOwner:Sl};function Tc(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:or,forEach:function(t,e,n){or(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return or(t,function(){e++}),e},toArray:function(t){return or(t,function(e){return e})||[]},only:function(t){if(!Tl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=jn;$.Fragment=Tm;$.Profiler=Cm;$.PureComponent=xl;$.StrictMode=Em;$.Suspense=Nm;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Um;$.act=Tc;$.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=gc({},t.props),r=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Sl.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)xc.call(e,d)&&!wc.hasOwnProperty(d)&&(o[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){u=Array(d);for(var c=0;c<d;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:Yo,type:t.type,key:r,ref:i,props:o,_owner:s}};$.createContext=function(t){return t={$$typeof:Im,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_m,_context:t},t.Consumer=t};$.createElement=Sc;$.createFactory=function(t){var e=Sc.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:km,render:t}};$.isValidElement=Tl;$.lazy=function(t){return{$$typeof:Rm,_payload:{_status:-1,_result:t},_init:Dm}};$.memo=function(t,e){return{$$typeof:Am,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=Ir.transition;Ir.transition={};try{t()}finally{Ir.transition=e}};$.unstable_act=Tc;$.useCallback=function(t,e){return Ue.current.useCallback(t,e)};$.useContext=function(t){return Ue.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};$.useEffect=function(t,e){return Ue.current.useEffect(t,e)};$.useId=function(){return Ue.current.useId()};$.useImperativeHandle=function(t,e,n){return Ue.current.useImperativeHandle(t,e,n)};$.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Ue.current.useMemo(t,e)};$.useReducer=function(t,e,n){return Ue.current.useReducer(t,e,n)};$.useRef=function(t){return Ue.current.useRef(t)};$.useState=function(t){return Ue.current.useState(t)};$.useSyncExternalStore=function(t,e,n){return Ue.current.useSyncExternalStore(t,e,n)};$.useTransition=function(){return Ue.current.useTransition()};$.version="18.3.1";mc.exports=$;var M=mc.exports;const bm=wm(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=M,Vm=Symbol.for("react.element"),Gm=Symbol.for("react.fragment"),Hm=Object.prototype.hasOwnProperty,Bm=Fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qm={key:!0,ref:!0,__self:!0,__source:!0};function Ec(t,e,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(o in e)Hm.call(e,o)&&!qm.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:Vm,type:t,key:i,ref:s,props:r,_owner:Bm.current}}hi.Fragment=Gm;hi.jsx=Ec;hi.jsxs=Ec;pc.exports=hi;var p=pc.exports,cs={},Cc={exports:{}},We={},_c={exports:{}},Ic={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,H){var B=L.length;L.push(H);e:for(;0<B;){var Z=B-1>>>1,re=L[Z];if(0<r(re,H))L[Z]=H,L[B]=re,B=Z;else break e}}function n(L){return L.length===0?null:L[0]}function o(L){if(L.length===0)return null;var H=L[0],B=L.pop();if(B!==H){L[0]=B;e:for(var Z=0,re=L.length,qe=re>>>1;Z<qe;){var Ye=2*(Z+1)-1,F=L[Ye],V=Ye+1,U=L[V];if(0>r(F,B))V<re&&0>r(U,F)?(L[Z]=U,L[V]=B,Z=V):(L[Z]=F,L[Ye]=B,Z=Ye);else if(V<re&&0>r(U,B))L[Z]=U,L[V]=B,Z=V;else break e}}return H}function r(L,H){var B=L.sortIndex-H.sortIndex;return B!==0?B:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var d=[],c=[],f=1,h=null,m=3,g=!1,S=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(L){for(var H=n(c);H!==null;){if(H.callback===null)o(c);else if(H.startTime<=L)o(c),H.sortIndex=H.expirationTime,e(d,H);else break;H=n(c)}}function E(L){if(w=!1,x(L),!S)if(n(d)!==null)S=!0,Y(_);else{var H=n(c);H!==null&&pe(E,H.startTime-L)}}function _(L,H){S=!1,w&&(w=!1,v(C),C=-1),g=!0;var B=m;try{for(x(H),h=n(d);h!==null&&(!(h.expirationTime>H)||L&&!G());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,m=h.priorityLevel;var re=Z(h.expirationTime<=H);H=t.unstable_now(),typeof re=="function"?h.callback=re:h===n(d)&&o(d),x(H)}else o(d);h=n(d)}if(h!==null)var qe=!0;else{var Ye=n(c);Ye!==null&&pe(E,Ye.startTime-H),qe=!1}return qe}finally{h=null,m=B,g=!1}}var I=!1,k=null,C=-1,N=5,A=-1;function G(){return!(t.unstable_now()-A<N)}function X(){if(k!==null){var L=t.unstable_now();A=L;var H=!0;try{H=k(!0,L)}finally{H?z():(I=!1,k=null)}}else I=!1}var z;if(typeof y=="function")z=function(){y(X)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,fe=K.port2;K.port1.onmessage=X,z=function(){fe.postMessage(null)}}else z=function(){T(X,0)};function Y(L){k=L,I||(I=!0,z())}function pe(L,H){C=T(function(){L(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,Y(_))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var B=m;m=H;try{return L()}finally{m=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=m;m=L;try{return H()}finally{m=B}},t.unstable_scheduleCallback=function(L,H,B){var Z=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Z+B:Z):B=Z,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=B+re,L={id:f++,callback:H,priorityLevel:L,startTime:B,expirationTime:re,sortIndex:-1},B>Z?(L.sortIndex=B,e(c,L),n(d)===null&&L===n(c)&&(w?(v(C),C=-1):w=!0,pe(E,B-Z))):(L.sortIndex=re,e(d,L),S||g||(S=!0,Y(_))),L},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(L){var H=m;return function(){var B=m;m=H;try{return L.apply(this,arguments)}finally{m=B}}}})(Ic);_c.exports=Ic;var zm=_c.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=M,Je=zm;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kc=new Set,Po={};function vn(t,e){Jn(t,e),Jn(t+"Capture",e)}function Jn(t,e){for(Po[t]=e,t=0;t<e.length;t++)kc.add(e[t])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=Object.prototype.hasOwnProperty,Om=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ia={},ka={};function Jm(t){return fs.call(ka,t)?!0:fs.call(Ia,t)?!1:Om.test(t)?ka[t]=!0:(Ia[t]=!0,!1)}function Wm(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Km(t,e,n,o){if(e===null||typeof e>"u"||Wm(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function be(t,e,n,o,r,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Te[t]=new be(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Te[e]=new be(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Te[t]=new be(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Te[t]=new be(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Te[t]=new be(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Te[t]=new be(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Te[t]=new be(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Te[t]=new be(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Te[t]=new be(t,5,!1,t.toLowerCase(),null,!1,!1)});var El=/[\-:]([a-z])/g;function Cl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(El,Cl);Te[e]=new be(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(El,Cl);Te[e]=new be(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(El,Cl);Te[e]=new be(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Te[t]=new be(t,1,!1,t.toLowerCase(),null,!1,!1)});Te.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Te[t]=new be(t,1,!1,t.toLowerCase(),null,!0,!0)});function _l(t,e,n,o){var r=Te.hasOwnProperty(e)?Te[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Km(e,n,r,o)&&(n=null),o||r===null?Jm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var Mt=$m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rr=Symbol.for("react.element"),Cn=Symbol.for("react.portal"),_n=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),ps=Symbol.for("react.profiler"),Nc=Symbol.for("react.provider"),Ac=Symbol.for("react.context"),kl=Symbol.for("react.forward_ref"),ms=Symbol.for("react.suspense"),hs=Symbol.for("react.suspense_list"),Nl=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Rc=Symbol.for("react.offscreen"),Na=Symbol.iterator;function io(t){return t===null||typeof t!="object"?null:(t=Na&&t[Na]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,Vi;function go(t){if(Vi===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vi=e&&e[1]||""}return`
`+Vi+t}var Gi=!1;function Hi(t,e){if(!t||Gi)return"";Gi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var o=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){o=c}t.call(e.prototype)}else{try{throw Error()}catch(c){o=c}t()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var d=`
`+r[s].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=s&&0<=u);break}}}finally{Gi=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?go(t):""}function Ym(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=Hi(t.type,!1),t;case 11:return t=Hi(t.type.render,!1),t;case 1:return t=Hi(t.type,!0),t;default:return""}}function gs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _n:return"Fragment";case Cn:return"Portal";case ps:return"Profiler";case Il:return"StrictMode";case ms:return"Suspense";case hs:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ac:return(t.displayName||"Context")+".Consumer";case Nc:return(t._context.displayName||"Context")+".Provider";case kl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nl:return e=t.displayName||null,e!==null?e:gs(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return gs(t(e))}catch{}}return null}function Xm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gs(e);case 8:return e===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qm(t){var e=Pc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ir(t){t._valueTracker||(t._valueTracker=Qm(t))}function Mc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=Pc(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function Gr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ys(t,e){var n=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Aa(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=Qt(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lc(t,e){e=e.checked,e!=null&&_l(t,"checked",e,!1)}function vs(t,e){Lc(t,e);var n=Qt(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xs(t,e.type,n):e.hasOwnProperty("defaultValue")&&xs(t,e.type,Qt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ra(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xs(t,e,n){(e!=="number"||Gr(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function Vn(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+Qt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ws(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pa(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(yo(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qt(n)}}function Dc(t,e){var n=Qt(e.value),o=Qt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function Ma(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ss(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sr,bc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sr=sr||document.createElement("div"),sr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zm=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){Zm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function Fc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function Vc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=Fc(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var jm=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ts(t,e){if(e){if(jm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Es(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cs=null;function Al(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,Gn=null,Hn=null;function La(t){if(t=Zo(t)){if(typeof _s!="function")throw Error(R(280));var e=t.stateNode;e&&(e=wi(e),_s(t.stateNode,t.type,e))}}function Gc(t){Gn?Hn?Hn.push(t):Hn=[t]:Gn=t}function Hc(){if(Gn){var t=Gn,e=Hn;if(Hn=Gn=null,La(t),e)for(t=0;t<e.length;t++)La(e[t])}}function Bc(t,e){return t(e)}function qc(){}var Bi=!1;function zc(t,e,n){if(Bi)return t(e,n);Bi=!0;try{return Bc(t,e,n)}finally{Bi=!1,(Gn!==null||Hn!==null)&&(qc(),Hc())}}function Lo(t,e){var n=t.stateNode;if(n===null)return null;var o=wi(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Is=!1;if(kt)try{var so={};Object.defineProperty(so,"passive",{get:function(){Is=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Is=!1}function eh(t,e,n,o,r,i,s,u,d){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Eo=!1,Hr=null,Br=!1,ks=null,th={onError:function(t){Eo=!0,Hr=t}};function nh(t,e,n,o,r,i,s,u,d){Eo=!1,Hr=null,eh.apply(th,arguments)}function oh(t,e,n,o,r,i,s,u,d){if(nh.apply(this,arguments),Eo){if(Eo){var c=Hr;Eo=!1,Hr=null}else throw Error(R(198));Br||(Br=!0,ks=c)}}function xn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $c(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Da(t){if(xn(t)!==t)throw Error(R(188))}function rh(t){var e=t.alternate;if(!e){if(e=xn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Da(r),t;if(i===o)return Da(r),e;i=i.sibling}throw Error(R(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(R(189))}}if(n.alternate!==o)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function Oc(t){return t=rh(t),t!==null?Jc(t):null}function Jc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jc(t);if(e!==null)return e;t=t.sibling}return null}var Wc=Je.unstable_scheduleCallback,Ua=Je.unstable_cancelCallback,ih=Je.unstable_shouldYield,sh=Je.unstable_requestPaint,de=Je.unstable_now,lh=Je.unstable_getCurrentPriorityLevel,Rl=Je.unstable_ImmediatePriority,Kc=Je.unstable_UserBlockingPriority,qr=Je.unstable_NormalPriority,ah=Je.unstable_LowPriority,Yc=Je.unstable_IdlePriority,gi=null,xt=null;function uh(t){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:fh,dh=Math.log,ch=Math.LN2;function fh(t){return t>>>=0,t===0?32:31-(dh(t)/ch|0)|0}var lr=64,ar=4194304;function vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zr(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=vo(u):(i&=s,i!==0&&(o=vo(i)))}else s=n&~r,s!==0?o=vo(s):i!==0&&(o=vo(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-dt(e),r=1<<n,o|=t[n],e&=~r;return o}function ph(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mh(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-dt(i),u=1<<s,d=r[s];d===-1?(!(u&n)||u&o)&&(r[s]=ph(u,e)):d<=e&&(t.expiredLanes|=u),i&=~u}}function Ns(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xc(){var t=lr;return lr<<=1,!(lr&4194240)&&(lr=64),t}function qi(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dt(e),t[e]=n}function hh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dt(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function Pl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-dt(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var Q=0;function Qc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zc,Ml,jc,ef,tf,As=!1,ur=[],zt=null,$t=null,Ot=null,Do=new Map,Uo=new Map,Gt=[],gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ba(t,e){switch(t){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(e.pointerId)}}function lo(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Zo(e),e!==null&&Ml(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function yh(t,e,n,o,r){switch(e){case"focusin":return zt=lo(zt,t,e,n,o,r),!0;case"dragenter":return $t=lo($t,t,e,n,o,r),!0;case"mouseover":return Ot=lo(Ot,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return Do.set(i,lo(Do.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,Uo.set(i,lo(Uo.get(i)||null,t,e,n,o,r)),!0}return!1}function nf(t){var e=an(t.target);if(e!==null){var n=xn(e);if(n!==null){if(e=n.tag,e===13){if(e=$c(n),e!==null){t.blockedOn=e,tf(t.priority,function(){jc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rs(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);Cs=o,n.target.dispatchEvent(o),Cs=null}else return e=Zo(n),e!==null&&Ml(e),t.blockedOn=n,!1;e.shift()}return!0}function Fa(t,e,n){kr(t)&&n.delete(e)}function vh(){As=!1,zt!==null&&kr(zt)&&(zt=null),$t!==null&&kr($t)&&($t=null),Ot!==null&&kr(Ot)&&(Ot=null),Do.forEach(Fa),Uo.forEach(Fa)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,As||(As=!0,Je.unstable_scheduleCallback(Je.unstable_NormalPriority,vh)))}function bo(t){function e(r){return ao(r,t)}if(0<ur.length){ao(ur[0],t);for(var n=1;n<ur.length;n++){var o=ur[n];o.blockedOn===t&&(o.blockedOn=null)}}for(zt!==null&&ao(zt,t),$t!==null&&ao($t,t),Ot!==null&&ao(Ot,t),Do.forEach(e),Uo.forEach(e),n=0;n<Gt.length;n++)o=Gt[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<Gt.length&&(n=Gt[0],n.blockedOn===null);)nf(n),n.blockedOn===null&&Gt.shift()}var Bn=Mt.ReactCurrentBatchConfig,$r=!0;function xh(t,e,n,o){var r=Q,i=Bn.transition;Bn.transition=null;try{Q=1,Ll(t,e,n,o)}finally{Q=r,Bn.transition=i}}function wh(t,e,n,o){var r=Q,i=Bn.transition;Bn.transition=null;try{Q=4,Ll(t,e,n,o)}finally{Q=r,Bn.transition=i}}function Ll(t,e,n,o){if($r){var r=Rs(t,e,n,o);if(r===null)Zi(t,e,o,Or,n),ba(t,o);else if(yh(r,t,e,n,o))o.stopPropagation();else if(ba(t,o),e&4&&-1<gh.indexOf(t)){for(;r!==null;){var i=Zo(r);if(i!==null&&Zc(i),i=Rs(t,e,n,o),i===null&&Zi(t,e,o,Or,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Zi(t,e,o,null,n)}}var Or=null;function Rs(t,e,n,o){if(Or=null,t=Al(o),t=an(t),t!==null)if(e=xn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$c(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Or=t,null}function of(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lh()){case Rl:return 1;case Kc:return 4;case qr:case ah:return 16;case Yc:return 536870912;default:return 16}default:return 16}}var Bt=null,Dl=null,Nr=null;function rf(){if(Nr)return Nr;var t,e=Dl,n=e.length,o,r="value"in Bt?Bt.value:Bt.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(o=1;o<=s&&e[n-o]===r[i-o];o++);return Nr=r.slice(t,1<o?1-o:void 0)}function Ar(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dr(){return!0}function Va(){return!1}function Ke(t){function e(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dr:Va,this.isPropagationStopped=Va,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Ke(eo),Qo=le({},eo,{view:0,detail:0}),Sh=Ke(Qo),zi,$i,uo,yi=le({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(zi=t.screenX-uo.screenX,$i=t.screenY-uo.screenY):$i=zi=0,uo=t),zi)},movementY:function(t){return"movementY"in t?t.movementY:$i}}),Ga=Ke(yi),Th=le({},yi,{dataTransfer:0}),Eh=Ke(Th),Ch=le({},Qo,{relatedTarget:0}),Oi=Ke(Ch),_h=le({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ih=Ke(_h),kh=le({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nh=Ke(kh),Ah=le({},eo,{data:0}),Ha=Ke(Ah),Rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mh[t])?!!e[t]:!1}function bl(){return Lh}var Dh=le({},Qo,{key:function(t){if(t.key){var e=Rh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ph[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bl,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uh=Ke(Dh),bh=le({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=Ke(bh),Fh=le({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bl}),Vh=Ke(Fh),Gh=le({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=Ke(Gh),Bh=le({},yi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qh=Ke(Bh),zh=[9,13,27,32],Fl=kt&&"CompositionEvent"in window,Co=null;kt&&"documentMode"in document&&(Co=document.documentMode);var $h=kt&&"TextEvent"in window&&!Co,sf=kt&&(!Fl||Co&&8<Co&&11>=Co),qa=String.fromCharCode(32),za=!1;function lf(t,e){switch(t){case"keyup":return zh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function af(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var In=!1;function Oh(t,e){switch(t){case"compositionend":return af(e);case"keypress":return e.which!==32?null:(za=!0,qa);case"textInput":return t=e.data,t===qa&&za?null:t;default:return null}}function Jh(t,e){if(In)return t==="compositionend"||!Fl&&lf(t,e)?(t=rf(),Nr=Dl=Bt=null,In=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sf&&e.locale!=="ko"?null:e.data;default:return null}}var Wh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $a(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wh[t.type]:e==="textarea"}function uf(t,e,n,o){Gc(o),e=Jr(e,"onChange"),0<e.length&&(n=new Ul("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var _o=null,Fo=null;function Kh(t){wf(t,0)}function vi(t){var e=An(t);if(Mc(e))return t}function Yh(t,e){if(t==="change")return e}var df=!1;if(kt){var Ji;if(kt){var Wi="oninput"in document;if(!Wi){var Oa=document.createElement("div");Oa.setAttribute("oninput","return;"),Wi=typeof Oa.oninput=="function"}Ji=Wi}else Ji=!1;df=Ji&&(!document.documentMode||9<document.documentMode)}function Ja(){_o&&(_o.detachEvent("onpropertychange",cf),Fo=_o=null)}function cf(t){if(t.propertyName==="value"&&vi(Fo)){var e=[];uf(e,Fo,t,Al(t)),zc(Kh,e)}}function Xh(t,e,n){t==="focusin"?(Ja(),_o=e,Fo=n,_o.attachEvent("onpropertychange",cf)):t==="focusout"&&Ja()}function Qh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vi(Fo)}function Zh(t,e){if(t==="click")return vi(e)}function jh(t,e){if(t==="input"||t==="change")return vi(e)}function eg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:eg;function Vo(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!fs.call(e,r)||!mt(t[r],e[r]))return!1}return!0}function Wa(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ka(t,e){var n=Wa(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wa(n)}}function ff(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ff(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pf(){for(var t=window,e=Gr();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gr(t.document)}return e}function Vl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tg(t){var e=pf(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ff(n.ownerDocument.documentElement,n)){if(o!==null&&Vl(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=Ka(n,i);var s=Ka(n,o);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ng=kt&&"documentMode"in document&&11>=document.documentMode,kn=null,Ps=null,Io=null,Ms=!1;function Ya(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ms||kn==null||kn!==Gr(o)||(o=kn,"selectionStart"in o&&Vl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Io&&Vo(Io,o)||(Io=o,o=Jr(Ps,"onSelect"),0<o.length&&(e=new Ul("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=kn)))}function cr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Nn={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionend:cr("Transition","TransitionEnd")},Ki={},mf={};kt&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);function xi(t){if(Ki[t])return Ki[t];if(!Nn[t])return t;var e=Nn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mf)return Ki[t]=e[n];return t}var hf=xi("animationend"),gf=xi("animationiteration"),yf=xi("animationstart"),vf=xi("transitionend"),xf=new Map,Xa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jt(t,e){xf.set(t,e),vn(e,[t])}for(var Yi=0;Yi<Xa.length;Yi++){var Xi=Xa[Yi],og=Xi.toLowerCase(),rg=Xi[0].toUpperCase()+Xi.slice(1);jt(og,"on"+rg)}jt(hf,"onAnimationEnd");jt(gf,"onAnimationIteration");jt(yf,"onAnimationStart");jt("dblclick","onDoubleClick");jt("focusin","onFocus");jt("focusout","onBlur");jt(vf,"onTransitionEnd");Jn("onMouseEnter",["mouseout","mouseover"]);Jn("onMouseLeave",["mouseout","mouseover"]);Jn("onPointerEnter",["pointerout","pointerover"]);Jn("onPointerLeave",["pointerout","pointerover"]);vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function Qa(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,oh(o,e,void 0,t),t.currentTarget=null}function wf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var u=o[s],d=u.instance,c=u.currentTarget;if(u=u.listener,d!==i&&r.isPropagationStopped())break e;Qa(r,u,c),i=d}else for(s=0;s<o.length;s++){if(u=o[s],d=u.instance,c=u.currentTarget,u=u.listener,d!==i&&r.isPropagationStopped())break e;Qa(r,u,c),i=d}}}if(Br)throw t=ks,Br=!1,ks=null,t}function te(t,e){var n=e[Fs];n===void 0&&(n=e[Fs]=new Set);var o=t+"__bubble";n.has(o)||(Sf(e,t,2,!1),n.add(o))}function Qi(t,e,n){var o=0;e&&(o|=4),Sf(n,t,o,e)}var fr="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[fr]){t[fr]=!0,kc.forEach(function(n){n!=="selectionchange"&&(ig.has(n)||Qi(n,!1,t),Qi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fr]||(e[fr]=!0,Qi("selectionchange",!1,e))}}function Sf(t,e,n,o){switch(of(e)){case 1:var r=xh;break;case 4:r=wh;break;default:r=Ll}n=r.bind(null,e,n,t),r=void 0,!Is||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Zi(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var d=s.tag;if((d===3||d===4)&&(d=s.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;s=s.return}for(;u!==null;){if(s=an(u),s===null)return;if(d=s.tag,d===5||d===6){o=i=s;continue e}u=u.parentNode}}o=o.return}zc(function(){var c=i,f=Al(n),h=[];e:{var m=xf.get(t);if(m!==void 0){var g=Ul,S=t;switch(t){case"keypress":if(Ar(n)===0)break e;case"keydown":case"keyup":g=Uh;break;case"focusin":S="focus",g=Oi;break;case"focusout":S="blur",g=Oi;break;case"beforeblur":case"afterblur":g=Oi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Vh;break;case hf:case gf:case yf:g=Ih;break;case vf:g=Hh;break;case"scroll":g=Sh;break;case"wheel":g=qh;break;case"copy":case"cut":case"paste":g=Nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ba}var w=(e&4)!==0,T=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var y=c,x;y!==null;){x=y;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,v!==null&&(E=Lo(y,v),E!=null&&w.push(Ho(y,E,x)))),T)break;y=y.return}0<w.length&&(m=new g(m,S,null,n,f),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Cs&&(S=n.relatedTarget||n.fromElement)&&(an(S)||S[Nt]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=c,S=S?an(S):null,S!==null&&(T=xn(S),S!==T||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=c),g!==S)){if(w=Ga,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=Ba,E="onPointerLeave",v="onPointerEnter",y="pointer"),T=g==null?m:An(g),x=S==null?m:An(S),m=new w(E,y+"leave",g,n,f),m.target=T,m.relatedTarget=x,E=null,an(f)===c&&(w=new w(v,y+"enter",S,n,f),w.target=x,w.relatedTarget=T,E=w),T=E,g&&S)t:{for(w=g,v=S,y=0,x=w;x;x=Tn(x))y++;for(x=0,E=v;E;E=Tn(E))x++;for(;0<y-x;)w=Tn(w),y--;for(;0<x-y;)v=Tn(v),x--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=Tn(w),v=Tn(v)}w=null}else w=null;g!==null&&Za(h,m,g,w,!1),S!==null&&T!==null&&Za(h,T,S,w,!0)}}e:{if(m=c?An(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var _=Yh;else if($a(m))if(df)_=jh;else{_=Qh;var I=Xh}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=Zh);if(_&&(_=_(t,c))){uf(h,_,n,f);break e}I&&I(t,m,c),t==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&xs(m,"number",m.value)}switch(I=c?An(c):window,t){case"focusin":($a(I)||I.contentEditable==="true")&&(kn=I,Ps=c,Io=null);break;case"focusout":Io=Ps=kn=null;break;case"mousedown":Ms=!0;break;case"contextmenu":case"mouseup":case"dragend":Ms=!1,Ya(h,n,f);break;case"selectionchange":if(ng)break;case"keydown":case"keyup":Ya(h,n,f)}var k;if(Fl)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else In?lf(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(sf&&n.locale!=="ko"&&(In||C!=="onCompositionStart"?C==="onCompositionEnd"&&In&&(k=rf()):(Bt=f,Dl="value"in Bt?Bt.value:Bt.textContent,In=!0)),I=Jr(c,C),0<I.length&&(C=new Ha(C,t,null,n,f),h.push({event:C,listeners:I}),k?C.data=k:(k=af(n),k!==null&&(C.data=k)))),(k=$h?Oh(t,n):Jh(t,n))&&(c=Jr(c,"onBeforeInput"),0<c.length&&(f=new Ha("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=k))}wf(h,e)})}function Ho(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jr(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Lo(t,n),i!=null&&o.unshift(Ho(t,i,r)),i=Lo(t,e),i!=null&&o.push(Ho(t,i,r))),t=t.return}return o}function Tn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Za(t,e,n,o,r){for(var i=e._reactName,s=[];n!==null&&n!==o;){var u=n,d=u.alternate,c=u.stateNode;if(d!==null&&d===o)break;u.tag===5&&c!==null&&(u=c,r?(d=Lo(n,i),d!=null&&s.unshift(Ho(n,d,u))):r||(d=Lo(n,i),d!=null&&s.push(Ho(n,d,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var sg=/\r\n?/g,lg=/\u0000|\uFFFD/g;function ja(t){return(typeof t=="string"?t:""+t).replace(sg,`
`).replace(lg,"")}function pr(t,e,n){if(e=ja(e),ja(t)!==e&&n)throw Error(R(425))}function Wr(){}var Ls=null,Ds=null;function Us(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bs=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,eu=typeof Promise=="function"?Promise:void 0,ug=typeof queueMicrotask=="function"?queueMicrotask:typeof eu<"u"?function(t){return eu.resolve(null).then(t).catch(dg)}:bs;function dg(t){setTimeout(function(){throw t})}function ji(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),bo(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);bo(e)}function Jt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),vt="__reactFiber$"+to,Bo="__reactProps$"+to,Nt="__reactContainer$"+to,Fs="__reactEvents$"+to,cg="__reactListeners$"+to,fg="__reactHandles$"+to;function an(t){var e=t[vt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nt]||n[vt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tu(t);t!==null;){if(n=t[vt])return n;t=tu(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[vt]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function An(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function wi(t){return t[Bo]||null}var Vs=[],Rn=-1;function en(t){return{current:t}}function ne(t){0>Rn||(t.current=Vs[Rn],Vs[Rn]=null,Rn--)}function j(t,e){Rn++,Vs[Rn]=t.current,t.current=e}var Zt={},Ne=en(Zt),Ge=en(!1),pn=Zt;function Wn(t,e){var n=t.type.contextTypes;if(!n)return Zt;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function He(t){return t=t.childContextTypes,t!=null}function Kr(){ne(Ge),ne(Ne)}function nu(t,e,n){if(Ne.current!==Zt)throw Error(R(168));j(Ne,e),j(Ge,n)}function Tf(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(R(108,Xm(t)||"Unknown",r));return le({},n,o)}function Yr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zt,pn=Ne.current,j(Ne,t),j(Ge,Ge.current),!0}function ou(t,e,n){var o=t.stateNode;if(!o)throw Error(R(169));n?(t=Tf(t,e,pn),o.__reactInternalMemoizedMergedChildContext=t,ne(Ge),ne(Ne),j(Ne,t)):ne(Ge),j(Ge,n)}var Et=null,Si=!1,es=!1;function Ef(t){Et===null?Et=[t]:Et.push(t)}function pg(t){Si=!0,Ef(t)}function tn(){if(!es&&Et!==null){es=!0;var t=0,e=Q;try{var n=Et;for(Q=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}Et=null,Si=!1}catch(r){throw Et!==null&&(Et=Et.slice(t+1)),Wc(Rl,tn),r}finally{Q=e,es=!1}}return null}var Pn=[],Mn=0,Xr=null,Qr=0,Qe=[],Ze=0,mn=null,Ct=1,_t="";function rn(t,e){Pn[Mn++]=Qr,Pn[Mn++]=Xr,Xr=t,Qr=e}function Cf(t,e,n){Qe[Ze++]=Ct,Qe[Ze++]=_t,Qe[Ze++]=mn,mn=t;var o=Ct;t=_t;var r=32-dt(o)-1;o&=~(1<<r),n+=1;var i=32-dt(e)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,Ct=1<<32-dt(e)+r|n<<r|o,_t=i+t}else Ct=1<<i|n<<r|o,_t=t}function Gl(t){t.return!==null&&(rn(t,1),Cf(t,1,0))}function Hl(t){for(;t===Xr;)Xr=Pn[--Mn],Pn[Mn]=null,Qr=Pn[--Mn],Pn[Mn]=null;for(;t===mn;)mn=Qe[--Ze],Qe[Ze]=null,_t=Qe[--Ze],Qe[Ze]=null,Ct=Qe[--Ze],Qe[Ze]=null}var Oe=null,$e=null,oe=!1,ut=null;function _f(t,e){var n=je(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ru(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Oe=t,$e=Jt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Oe=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mn!==null?{id:Ct,overflow:_t}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=je(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Oe=t,$e=null,!0):!1;default:return!1}}function Gs(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hs(t){if(oe){var e=$e;if(e){var n=e;if(!ru(t,e)){if(Gs(t))throw Error(R(418));e=Jt(n.nextSibling);var o=Oe;e&&ru(t,e)?_f(o,n):(t.flags=t.flags&-4097|2,oe=!1,Oe=t)}}else{if(Gs(t))throw Error(R(418));t.flags=t.flags&-4097|2,oe=!1,Oe=t}}}function iu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Oe=t}function mr(t){if(t!==Oe)return!1;if(!oe)return iu(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Us(t.type,t.memoizedProps)),e&&(e=$e)){if(Gs(t))throw If(),Error(R(418));for(;e;)_f(t,e),e=Jt(e.nextSibling)}if(iu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=Jt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Oe?Jt(t.stateNode.nextSibling):null;return!0}function If(){for(var t=$e;t;)t=Jt(t.nextSibling)}function Kn(){$e=Oe=null,oe=!1}function Bl(t){ut===null?ut=[t]:ut.push(t)}var mg=Mt.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var o=n.stateNode}if(!o)throw Error(R(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function hr(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function su(t){var e=t._init;return e(t._payload)}function kf(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function o(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Xt(v,y),v.index=0,v.sibling=null,v}function i(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function u(v,y,x,E){return y===null||y.tag!==6?(y=ls(x,v.mode,E),y.return=v,y):(y=r(y,x),y.return=v,y)}function d(v,y,x,E){var _=x.type;return _===_n?f(v,y,x.props.children,E,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ft&&su(_)===y.type)?(E=r(y,x.props),E.ref=co(v,y,x),E.return=v,E):(E=br(x.type,x.key,x.props,null,v.mode,E),E.ref=co(v,y,x),E.return=v,E)}function c(v,y,x,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=as(x,v.mode,E),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function f(v,y,x,E,_){return y===null||y.tag!==7?(y=fn(x,v.mode,E,_),y.return=v,y):(y=r(y,x),y.return=v,y)}function h(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ls(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rr:return x=br(y.type,y.key,y.props,null,v.mode,x),x.ref=co(v,null,y),x.return=v,x;case Cn:return y=as(y,v.mode,x),y.return=v,y;case Ft:var E=y._init;return h(v,E(y._payload),x)}if(yo(y)||io(y))return y=fn(y,v.mode,x,null),y.return=v,y;hr(v,y)}return null}function m(v,y,x,E){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:u(v,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rr:return x.key===_?d(v,y,x,E):null;case Cn:return x.key===_?c(v,y,x,E):null;case Ft:return _=x._init,m(v,y,_(x._payload),E)}if(yo(x)||io(x))return _!==null?null:f(v,y,x,E,null);hr(v,x)}return null}function g(v,y,x,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(x)||null,u(y,v,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case rr:return v=v.get(E.key===null?x:E.key)||null,d(y,v,E,_);case Cn:return v=v.get(E.key===null?x:E.key)||null,c(y,v,E,_);case Ft:var I=E._init;return g(v,y,x,I(E._payload),_)}if(yo(E)||io(E))return v=v.get(x)||null,f(y,v,E,_,null);hr(y,E)}return null}function S(v,y,x,E){for(var _=null,I=null,k=y,C=y=0,N=null;k!==null&&C<x.length;C++){k.index>C?(N=k,k=null):N=k.sibling;var A=m(v,k,x[C],E);if(A===null){k===null&&(k=N);break}t&&k&&A.alternate===null&&e(v,k),y=i(A,y,C),I===null?_=A:I.sibling=A,I=A,k=N}if(C===x.length)return n(v,k),oe&&rn(v,C),_;if(k===null){for(;C<x.length;C++)k=h(v,x[C],E),k!==null&&(y=i(k,y,C),I===null?_=k:I.sibling=k,I=k);return oe&&rn(v,C),_}for(k=o(v,k);C<x.length;C++)N=g(k,v,C,x[C],E),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?C:N.key),y=i(N,y,C),I===null?_=N:I.sibling=N,I=N);return t&&k.forEach(function(G){return e(v,G)}),oe&&rn(v,C),_}function w(v,y,x,E){var _=io(x);if(typeof _!="function")throw Error(R(150));if(x=_.call(x),x==null)throw Error(R(151));for(var I=_=null,k=y,C=y=0,N=null,A=x.next();k!==null&&!A.done;C++,A=x.next()){k.index>C?(N=k,k=null):N=k.sibling;var G=m(v,k,A.value,E);if(G===null){k===null&&(k=N);break}t&&k&&G.alternate===null&&e(v,k),y=i(G,y,C),I===null?_=G:I.sibling=G,I=G,k=N}if(A.done)return n(v,k),oe&&rn(v,C),_;if(k===null){for(;!A.done;C++,A=x.next())A=h(v,A.value,E),A!==null&&(y=i(A,y,C),I===null?_=A:I.sibling=A,I=A);return oe&&rn(v,C),_}for(k=o(v,k);!A.done;C++,A=x.next())A=g(k,v,C,A.value,E),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?C:A.key),y=i(A,y,C),I===null?_=A:I.sibling=A,I=A);return t&&k.forEach(function(X){return e(v,X)}),oe&&rn(v,C),_}function T(v,y,x,E){if(typeof x=="object"&&x!==null&&x.type===_n&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rr:e:{for(var _=x.key,I=y;I!==null;){if(I.key===_){if(_=x.type,_===_n){if(I.tag===7){n(v,I.sibling),y=r(I,x.props.children),y.return=v,v=y;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ft&&su(_)===I.type){n(v,I.sibling),y=r(I,x.props),y.ref=co(v,I,x),y.return=v,v=y;break e}n(v,I);break}else e(v,I);I=I.sibling}x.type===_n?(y=fn(x.props.children,v.mode,E,x.key),y.return=v,v=y):(E=br(x.type,x.key,x.props,null,v.mode,E),E.ref=co(v,y,x),E.return=v,v=E)}return s(v);case Cn:e:{for(I=x.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=as(x,v.mode,E),y.return=v,v=y}return s(v);case Ft:return I=x._init,T(v,y,I(x._payload),E)}if(yo(x))return S(v,y,x,E);if(io(x))return w(v,y,x,E);hr(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,x),y.return=v,v=y):(n(v,y),y=ls(x,v.mode,E),y.return=v,v=y),s(v)):n(v,y)}return T}var Yn=kf(!0),Nf=kf(!1),Zr=en(null),jr=null,Ln=null,ql=null;function zl(){ql=Ln=jr=null}function $l(t){var e=Zr.current;ne(Zr),t._currentValue=e}function Bs(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function qn(t,e){jr=t,ql=Ln=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ve=!0),t.firstContext=null)}function nt(t){var e=t._currentValue;if(ql!==t)if(t={context:t,memoizedValue:e,next:null},Ln===null){if(jr===null)throw Error(R(308));Ln=t,jr.dependencies={lanes:0,firstContext:t}}else Ln=Ln.next=t;return e}var un=null;function Ol(t){un===null?un=[t]:un.push(t)}function Af(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Ol(e)):(n.next=r.next,r.next=n),e.interleaved=n,At(t,o)}function At(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vt=!1;function Jl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wt(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,J&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,At(t,n)}return r=o.interleaved,r===null?(e.next=e,Ol(o)):(e.next=r.next,r.next=e),o.interleaved=e,At(t,n)}function Rr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Pl(t,n)}}function lu(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ei(t,e,n,o){var r=t.updateQueue;Vt=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,c=d.next;d.next=null,s===null?i=c:s.next=c,s=d;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=c:u.next=c,f.lastBaseUpdate=d))}if(i!==null){var h=r.baseState;s=0,f=c=d=null,u=i;do{var m=u.lane,g=u.eventTime;if((o&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,w=u;switch(m=e,g=n,w.tag){case 1:if(S=w.payload,typeof S=="function"){h=S.call(g,h,m);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=w.payload,m=typeof S=="function"?S.call(g,h,m):S,m==null)break e;h=le({},h,m);break e;case 2:Vt=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[u]:m.push(u))}else g={eventTime:g,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(c=f=g,d=h):f=f.next=g,s|=m;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;m=u,u=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(f===null&&(d=h),r.baseState=d,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);gn|=s,t.lanes=s,t.memoizedState=h}}function au(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(R(191,r));r.call(o)}}}var jo={},wt=en(jo),qo=en(jo),zo=en(jo);function dn(t){if(t===jo)throw Error(R(174));return t}function Wl(t,e){switch(j(zo,e),j(qo,t),j(wt,jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ss(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ss(e,t)}ne(wt),j(wt,e)}function Xn(){ne(wt),ne(qo),ne(zo)}function Pf(t){dn(zo.current);var e=dn(wt.current),n=Ss(e,t.type);e!==n&&(j(qo,t),j(wt,n))}function Kl(t){qo.current===t&&(ne(wt),ne(qo))}var ie=en(0);function ti(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ts=[];function Yl(){for(var t=0;t<ts.length;t++)ts[t]._workInProgressVersionPrimary=null;ts.length=0}var Pr=Mt.ReactCurrentDispatcher,ns=Mt.ReactCurrentBatchConfig,hn=0,se=null,me=null,ye=null,ni=!1,ko=!1,$o=0,hg=0;function Ce(){throw Error(R(321))}function Xl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mt(t[n],e[n]))return!1;return!0}function Ql(t,e,n,o,r,i){if(hn=i,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pr.current=t===null||t.memoizedState===null?xg:wg,t=n(o,r),ko){i=0;do{if(ko=!1,$o=0,25<=i)throw Error(R(301));i+=1,ye=me=null,e.updateQueue=null,Pr.current=Sg,t=n(o,r)}while(ko)}if(Pr.current=oi,e=me!==null&&me.next!==null,hn=0,ye=me=se=null,ni=!1,e)throw Error(R(300));return t}function Zl(){var t=$o!==0;return $o=0,t}function yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?se.memoizedState=ye=t:ye=ye.next=t,ye}function ot(){if(me===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=ye===null?se.memoizedState:ye.next;if(e!==null)ye=e,me=t;else{if(t===null)throw Error(R(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ye===null?se.memoizedState=ye=t:ye=ye.next=t}return ye}function Oo(t,e){return typeof e=="function"?e(t):e}function os(t){var e=ot(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var o=me,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,d=null,c=i;do{var f=c.lane;if((hn&f)===f)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:t(o,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(u=d=h,s=o):d=d.next=h,se.lanes|=f,gn|=f}c=c.next}while(c!==null&&c!==i);d===null?s=o:d.next=u,mt(o,e.memoizedState)||(Ve=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=d,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,se.lanes|=i,gn|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rs(t){var e=ot(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=t(i,s.action),s=s.next;while(s!==r);mt(i,e.memoizedState)||(Ve=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function Mf(){}function Lf(t,e){var n=se,o=ot(),r=e(),i=!mt(o.memoizedState,r);if(i&&(o.memoizedState=r,Ve=!0),o=o.queue,jl(bf.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||ye!==null&&ye.memoizedState.tag&1){if(n.flags|=2048,Jo(9,Uf.bind(null,n,o,r,e),void 0,null),ve===null)throw Error(R(349));hn&30||Df(n,e,r)}return r}function Df(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uf(t,e,n,o){e.value=n,e.getSnapshot=o,Ff(e)&&Vf(t)}function bf(t,e,n){return n(function(){Ff(e)&&Vf(t)})}function Ff(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mt(t,n)}catch{return!0}}function Vf(t){var e=At(t,1);e!==null&&ct(e,t,1,-1)}function uu(t){var e=yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=vg.bind(null,se,t),[e.memoizedState,t]}function Jo(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function Gf(){return ot().memoizedState}function Mr(t,e,n,o){var r=yt();se.flags|=t,r.memoizedState=Jo(1|e,n,void 0,o===void 0?null:o)}function Ti(t,e,n,o){var r=ot();o=o===void 0?null:o;var i=void 0;if(me!==null){var s=me.memoizedState;if(i=s.destroy,o!==null&&Xl(o,s.deps)){r.memoizedState=Jo(e,n,i,o);return}}se.flags|=t,r.memoizedState=Jo(1|e,n,i,o)}function du(t,e){return Mr(8390656,8,t,e)}function jl(t,e){return Ti(2048,8,t,e)}function Hf(t,e){return Ti(4,2,t,e)}function Bf(t,e){return Ti(4,4,t,e)}function qf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zf(t,e,n){return n=n!=null?n.concat([t]):null,Ti(4,4,qf.bind(null,e,t),n)}function ea(){}function $f(t,e){var n=ot();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Xl(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function Of(t,e){var n=ot();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Xl(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function Jf(t,e,n){return hn&21?(mt(n,e)||(n=Xc(),se.lanes|=n,gn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ve=!0),t.memoizedState=n)}function gg(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var o=ns.transition;ns.transition={};try{t(!1),e()}finally{Q=n,ns.transition=o}}function Wf(){return ot().memoizedState}function yg(t,e,n){var o=Yt(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Kf(t))Yf(e,n);else if(n=Af(t,e,n,o),n!==null){var r=Le();ct(n,t,o,r),Xf(n,e,o)}}function vg(t,e,n){var o=Yt(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kf(t))Yf(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,mt(u,s)){var d=e.interleaved;d===null?(r.next=r,Ol(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=Af(t,e,r,o),n!==null&&(r=Le(),ct(n,t,o,r),Xf(n,e,o))}}function Kf(t){var e=t.alternate;return t===se||e!==null&&e===se}function Yf(t,e){ko=ni=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xf(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,Pl(t,n)}}var oi={readContext:nt,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},xg={readContext:nt,useCallback:function(t,e){return yt().memoizedState=[t,e===void 0?null:e],t},useContext:nt,useEffect:du,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mr(4194308,4,qf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mr(4,2,t,e)},useMemo:function(t,e){var n=yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=yt();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=yg.bind(null,se,t),[o.memoizedState,t]},useRef:function(t){var e=yt();return t={current:t},e.memoizedState=t},useState:uu,useDebugValue:ea,useDeferredValue:function(t){return yt().memoizedState=t},useTransition:function(){var t=uu(!1),e=t[0];return t=gg.bind(null,t[1]),yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=se,r=yt();if(oe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),ve===null)throw Error(R(349));hn&30||Df(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,du(bf.bind(null,o,i,t),[t]),o.flags|=2048,Jo(9,Uf.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=yt(),e=ve.identifierPrefix;if(oe){var n=_t,o=Ct;n=(o&~(1<<32-dt(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wg={readContext:nt,useCallback:$f,useContext:nt,useEffect:jl,useImperativeHandle:zf,useInsertionEffect:Hf,useLayoutEffect:Bf,useMemo:Of,useReducer:os,useRef:Gf,useState:function(){return os(Oo)},useDebugValue:ea,useDeferredValue:function(t){var e=ot();return Jf(e,me.memoizedState,t)},useTransition:function(){var t=os(Oo)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Mf,useSyncExternalStore:Lf,useId:Wf,unstable_isNewReconciler:!1},Sg={readContext:nt,useCallback:$f,useContext:nt,useEffect:jl,useImperativeHandle:zf,useInsertionEffect:Hf,useLayoutEffect:Bf,useMemo:Of,useReducer:rs,useRef:Gf,useState:function(){return rs(Oo)},useDebugValue:ea,useDeferredValue:function(t){var e=ot();return me===null?e.memoizedState=t:Jf(e,me.memoizedState,t)},useTransition:function(){var t=rs(Oo)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Mf,useSyncExternalStore:Lf,useId:Wf,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qs(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ei={isMounted:function(t){return(t=t._reactInternals)?xn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=Le(),r=Yt(t),i=It(o,r);i.payload=e,n!=null&&(i.callback=n),e=Wt(t,i,r),e!==null&&(ct(e,t,r,o),Rr(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=Le(),r=Yt(t),i=It(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Wt(t,i,r),e!==null&&(ct(e,t,r,o),Rr(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Le(),o=Yt(t),r=It(n,o);r.tag=2,e!=null&&(r.callback=e),e=Wt(t,r,o),e!==null&&(ct(e,t,o,n),Rr(e,t,o))}};function cu(t,e,n,o,r,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,s):e.prototype&&e.prototype.isPureReactComponent?!Vo(n,o)||!Vo(r,i):!0}function Qf(t,e,n){var o=!1,r=Zt,i=e.contextType;return typeof i=="object"&&i!==null?i=nt(i):(r=He(e)?pn:Ne.current,o=e.contextTypes,i=(o=o!=null)?Wn(t,r):Zt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function fu(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&Ei.enqueueReplaceState(e,e.state,null)}function zs(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Jl(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=nt(i):(i=He(e)?pn:Ne.current,r.context=Wn(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qs(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ei.enqueueReplaceState(r,r.state,null),ei(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Qn(t,e){try{var n="",o=e;do n+=Ym(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function is(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $s(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tg=typeof WeakMap=="function"?WeakMap:Map;function Zf(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){ii||(ii=!0,el=o),$s(t,e)},n}function jf(t,e,n){n=It(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){$s(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$s(t,e),typeof o!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function pu(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new Tg;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=bg.bind(null,t,e,n),e.then(t,t))}function mu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hu(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,Wt(n,e,1))),n.lanes|=1),t)}var Eg=Mt.ReactCurrentOwner,Ve=!1;function Me(t,e,n,o){e.child=t===null?Nf(e,null,n,o):Yn(e,t.child,n,o)}function gu(t,e,n,o,r){n=n.render;var i=e.ref;return qn(e,r),o=Ql(t,e,n,o,i,r),n=Zl(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Rt(t,e,r)):(oe&&n&&Gl(e),e.flags|=1,Me(t,e,o,r),e.child)}function yu(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!aa(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ep(t,e,i,o,r)):(t=br(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vo,n(s,o)&&t.ref===e.ref)return Rt(t,e,r)}return e.flags|=1,t=Xt(i,o),t.ref=e.ref,t.return=e,e.child=t}function ep(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(Vo(i,o)&&t.ref===e.ref)if(Ve=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(Ve=!0);else return e.lanes=t.lanes,Rt(t,e,r)}return Os(t,e,n,o,r)}function tp(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},j(Un,ze),ze|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,j(Un,ze),ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,j(Un,ze),ze|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,j(Un,ze),ze|=o;return Me(t,e,r,n),e.child}function np(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Os(t,e,n,o,r){var i=He(n)?pn:Ne.current;return i=Wn(e,i),qn(e,r),n=Ql(t,e,n,o,i,r),o=Zl(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Rt(t,e,r)):(oe&&o&&Gl(e),e.flags|=1,Me(t,e,n,r),e.child)}function vu(t,e,n,o,r){if(He(n)){var i=!0;Yr(e)}else i=!1;if(qn(e,r),e.stateNode===null)Lr(t,e),Qf(e,n,o),zs(e,n,o,r),o=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var d=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=nt(c):(c=He(n)?pn:Ne.current,c=Wn(e,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||d!==c)&&fu(e,s,o,c),Vt=!1;var m=e.memoizedState;s.state=m,ei(e,o,s,r),d=e.memoizedState,u!==o||m!==d||Ge.current||Vt?(typeof f=="function"&&(qs(e,n,f,o),d=e.memoizedState),(u=Vt||cu(e,n,u,o,m,d,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=d),s.props=o,s.state=d,s.context=c,o=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,Rf(t,e),u=e.memoizedProps,c=e.type===e.elementType?u:lt(e.type,u),s.props=c,h=e.pendingProps,m=s.context,d=n.contextType,typeof d=="object"&&d!==null?d=nt(d):(d=He(n)?pn:Ne.current,d=Wn(e,d));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==h||m!==d)&&fu(e,s,o,d),Vt=!1,m=e.memoizedState,s.state=m,ei(e,o,s,r);var S=e.memoizedState;u!==h||m!==S||Ge.current||Vt?(typeof g=="function"&&(qs(e,n,g,o),S=e.memoizedState),(c=Vt||cu(e,n,c,o,m,S,d)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,S,d),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,S,d)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=S),s.props=o,s.state=S,s.context=d,o=c):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),o=!1)}return Js(t,e,n,o,i,r)}function Js(t,e,n,o,r,i){np(t,e);var s=(e.flags&128)!==0;if(!o&&!s)return r&&ou(e,n,!1),Rt(t,e,i);o=e.stateNode,Eg.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&s?(e.child=Yn(e,t.child,null,i),e.child=Yn(e,null,u,i)):Me(t,e,u,i),e.memoizedState=o.state,r&&ou(e,n,!0),e.child}function op(t){var e=t.stateNode;e.pendingContext?nu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nu(t,e.context,!1),Wl(t,e.containerInfo)}function xu(t,e,n,o,r){return Kn(),Bl(r),e.flags|=256,Me(t,e,n,o),e.child}var Ws={dehydrated:null,treeContext:null,retryLane:0};function Ks(t){return{baseLanes:t,cachePool:null,transitions:null}}function rp(t,e,n){var o=e.pendingProps,r=ie.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),j(ie,r&1),t===null)return Hs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=o.children,t=o.fallback,i?(o=e.mode,i=e.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Ii(s,o,0,null),t=fn(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ks(n),e.memoizedState=Ws,t):ta(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Cg(t,e,s,o,u,r,n);if(i){i=o.fallback,s=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:o.children};return!(s&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=d,e.deletions=null):(o=Xt(r,d),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=Xt(u,i):(i=fn(i,s,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,s=t.child.memoizedState,s=s===null?Ks(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Ws,o}return i=t.child,t=i.sibling,o=Xt(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function ta(t,e){return e=Ii({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gr(t,e,n,o){return o!==null&&Bl(o),Yn(e,t.child,null,n),t=ta(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cg(t,e,n,o,r,i,s){if(n)return e.flags&256?(e.flags&=-257,o=is(Error(R(422))),gr(t,e,s,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=Ii({mode:"visible",children:o.children},r,0,null),i=fn(i,r,s,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&Yn(e,t.child,null,s),e.child.memoizedState=Ks(s),e.memoizedState=Ws,i);if(!(e.mode&1))return gr(t,e,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(R(419)),o=is(i,o,void 0),gr(t,e,s,o)}if(u=(s&t.childLanes)!==0,Ve||u){if(o=ve,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,At(t,r),ct(o,t,r,-1))}return la(),o=is(Error(R(421))),gr(t,e,s,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Fg.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,$e=Jt(r.nextSibling),Oe=e,oe=!0,ut=null,t!==null&&(Qe[Ze++]=Ct,Qe[Ze++]=_t,Qe[Ze++]=mn,Ct=t.id,_t=t.overflow,mn=e),e=ta(e,o.children),e.flags|=4096,e)}function wu(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Bs(t.return,e,n)}function ss(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function ip(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(Me(t,e,o.children,n),o=ie.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wu(t,n,e);else if(t.tag===19)wu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(j(ie,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ti(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ss(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ti(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ss(e,!0,n,null,i);break;case"together":ss(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=Xt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _g(t,e,n){switch(e.tag){case 3:op(e),Kn();break;case 5:Pf(e);break;case 1:He(e.type)&&Yr(e);break;case 4:Wl(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;j(Zr,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(j(ie,ie.current&1),e.flags|=128,null):n&e.child.childLanes?rp(t,e,n):(j(ie,ie.current&1),t=Rt(t,e,n),t!==null?t.sibling:null);j(ie,ie.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return ip(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),j(ie,ie.current),o)break;return null;case 22:case 23:return e.lanes=0,tp(t,e,n)}return Rt(t,e,n)}var sp,Ys,lp,ap;sp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ys=function(){};lp=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,dn(wt.current);var i=null;switch(n){case"input":r=ys(t,r),o=ys(t,o),i=[];break;case"select":r=le({},r,{value:void 0}),o=le({},o,{value:void 0}),i=[];break;case"textarea":r=ws(t,r),o=ws(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Wr)}Ts(n,o);var s;n=null;for(c in r)if(!o.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var u=r[c];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Po.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in o){var d=o[c];if(u=r!=null?r[c]:void 0,o.hasOwnProperty(c)&&d!==u&&(d!=null||u!=null))if(c==="style")if(u){for(s in u)!u.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in d)d.hasOwnProperty(s)&&u[s]!==d[s]&&(n||(n={}),n[s]=d[s])}else n||(i||(i=[]),i.push(c,n)),n=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Po.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&te("scroll",t),i||u===d||(i=[])):(i=i||[]).push(c,d))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};ap=function(t,e,n,o){n!==o&&(e.flags|=4)};function fo(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function Ig(t,e,n){var o=e.pendingProps;switch(Hl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return He(e.type)&&Kr(),_e(e),null;case 3:return o=e.stateNode,Xn(),ne(Ge),ne(Ne),Yl(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(mr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ut!==null&&(ol(ut),ut=null))),Ys(t,e),_e(e),null;case 5:Kl(e);var r=dn(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)lp(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(R(166));return _e(e),null}if(t=dn(wt.current),mr(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[vt]=e,o[Bo]=i,t=(e.mode&1)!==0,n){case"dialog":te("cancel",o),te("close",o);break;case"iframe":case"object":case"embed":te("load",o);break;case"video":case"audio":for(r=0;r<xo.length;r++)te(xo[r],o);break;case"source":te("error",o);break;case"img":case"image":case"link":te("error",o),te("load",o);break;case"details":te("toggle",o);break;case"input":Aa(o,i),te("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},te("invalid",o);break;case"textarea":Pa(o,i),te("invalid",o)}Ts(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&pr(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&pr(o.textContent,u,t),r=["children",""+u]):Po.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&te("scroll",o)}switch(n){case"input":ir(o),Ra(o,i,!0);break;case"textarea":ir(o),Ma(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Wr)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=s.createElement(n,{is:o.is}):(t=s.createElement(n),n==="select"&&(s=t,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):t=s.createElementNS(t,n),t[vt]=e,t[Bo]=o,sp(t,e,!1,!1),e.stateNode=t;e:{switch(s=Es(n,o),n){case"dialog":te("cancel",t),te("close",t),r=o;break;case"iframe":case"object":case"embed":te("load",t),r=o;break;case"video":case"audio":for(r=0;r<xo.length;r++)te(xo[r],t);r=o;break;case"source":te("error",t),r=o;break;case"img":case"image":case"link":te("error",t),te("load",t),r=o;break;case"details":te("toggle",t),r=o;break;case"input":Aa(t,o),r=ys(t,o),te("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=le({},o,{value:void 0}),te("invalid",t);break;case"textarea":Pa(t,o),r=ws(t,o),te("invalid",t);break;default:r=o}Ts(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?Vc(t,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&bc(t,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Mo(t,d):typeof d=="number"&&Mo(t,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Po.hasOwnProperty(i)?d!=null&&i==="onScroll"&&te("scroll",t):d!=null&&_l(t,i,d,s))}switch(n){case"input":ir(t),Ra(t,o,!1);break;case"textarea":ir(t),Ma(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Qt(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?Vn(t,!!o.multiple,i,!1):o.defaultValue!=null&&Vn(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Wr)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)ap(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(R(166));if(n=dn(zo.current),dn(wt.current),mr(e)){if(o=e.stateNode,n=e.memoizedProps,o[vt]=e,(i=o.nodeValue!==n)&&(t=Oe,t!==null))switch(t.tag){case 3:pr(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pr(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[vt]=e,e.stateNode=o}return _e(e),null;case 13:if(ne(ie),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&$e!==null&&e.mode&1&&!(e.flags&128))If(),Kn(),e.flags|=98560,i=!1;else if(i=mr(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[vt]=e}else Kn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),i=!1}else ut!==null&&(ol(ut),ut=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?he===0&&(he=3):la())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return Xn(),Ys(t,e),t===null&&Go(e.stateNode.containerInfo),_e(e),null;case 10:return $l(e.type._context),_e(e),null;case 17:return He(e.type)&&Kr(),_e(e),null;case 19:if(ne(ie),i=e.memoizedState,i===null)return _e(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)fo(i,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ti(t),s!==null){for(e.flags|=128,fo(i,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return j(ie,ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&de()>Zn&&(e.flags|=128,o=!0,fo(i,!1),e.lanes=4194304)}else{if(!o)if(t=ti(s),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!oe)return _e(e),null}else 2*de()-i.renderingStartTime>Zn&&n!==1073741824&&(e.flags|=128,o=!0,fo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=de(),e.sibling=null,n=ie.current,j(ie,o?n&1|2:n&1),e):(_e(e),null);case 22:case 23:return sa(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?ze&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function kg(t,e){switch(Hl(e),e.tag){case 1:return He(e.type)&&Kr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xn(),ne(Ge),ne(Ne),Yl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kl(e),null;case 13:if(ne(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Kn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ne(ie),null;case 4:return Xn(),null;case 10:return $l(e.type._context),null;case 22:case 23:return sa(),null;case 24:return null;default:return null}}var yr=!1,Ie=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,b=null;function Dn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){ae(t,e,o)}else n.current=null}function Xs(t,e,n){try{n()}catch(o){ae(t,e,o)}}var Su=!1;function Ag(t,e){if(Ls=$r,t=pf(),Vl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,d=-1,c=0,f=0,h=t,m=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(u=s+r),h!==i||o!==0&&h.nodeType!==3||(d=s+o),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++c===r&&(u=s),m===i&&++f===o&&(d=s),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ds={focusedElem:t,selectionRange:n},$r=!1,b=e;b!==null;)if(e=b,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,b=t;else for(;b!==null;){e=b;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var w=S.memoizedProps,T=S.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:lt(e.type,w),T);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(E){ae(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,b=t;break}b=e.return}return S=Su,Su=!1,S}function No(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Xs(e,n,i)}r=r.next}while(r!==o)}}function Ci(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function Qs(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function up(t){var e=t.alternate;e!==null&&(t.alternate=null,up(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vt],delete e[Bo],delete e[Fs],delete e[cg],delete e[fg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dp(t){return t.tag===5||t.tag===3||t.tag===4}function Tu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zs(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wr));else if(o!==4&&(t=t.child,t!==null))for(Zs(t,e,n),t=t.sibling;t!==null;)Zs(t,e,n),t=t.sibling}function js(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(js(t,e,n),t=t.sibling;t!==null;)js(t,e,n),t=t.sibling}var we=null,at=!1;function bt(t,e,n){for(n=n.child;n!==null;)cp(t,e,n),n=n.sibling}function cp(t,e,n){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(gi,n)}catch{}switch(n.tag){case 5:Ie||Dn(n,e);case 6:var o=we,r=at;we=null,bt(t,e,n),we=o,at=r,we!==null&&(at?(t=we,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(at?(t=we,n=n.stateNode,t.nodeType===8?ji(t.parentNode,n):t.nodeType===1&&ji(t,n),bo(t)):ji(we,n.stateNode));break;case 4:o=we,r=at,we=n.stateNode.containerInfo,at=!0,bt(t,e,n),we=o,at=r;break;case 0:case 11:case 14:case 15:if(!Ie&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Xs(n,e,s),r=r.next}while(r!==o)}bt(t,e,n);break;case 1:if(!Ie&&(Dn(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){ae(n,e,u)}bt(t,e,n);break;case 21:bt(t,e,n);break;case 22:n.mode&1?(Ie=(o=Ie)||n.memoizedState!==null,bt(t,e,n),Ie=o):bt(t,e,n);break;default:bt(t,e,n)}}function Eu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ng),e.forEach(function(o){var r=Vg.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function st(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:we=u.stateNode,at=!1;break e;case 3:we=u.stateNode.containerInfo,at=!0;break e;case 4:we=u.stateNode.containerInfo,at=!0;break e}u=u.return}if(we===null)throw Error(R(160));cp(i,s,r),we=null,at=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(c){ae(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fp(e,t),e=e.sibling}function fp(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(st(e,t),gt(t),o&4){try{No(3,t,t.return),Ci(3,t)}catch(w){ae(t,t.return,w)}try{No(5,t,t.return)}catch(w){ae(t,t.return,w)}}break;case 1:st(e,t),gt(t),o&512&&n!==null&&Dn(n,n.return);break;case 5:if(st(e,t),gt(t),o&512&&n!==null&&Dn(n,n.return),t.flags&32){var r=t.stateNode;try{Mo(r,"")}catch(w){ae(t,t.return,w)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Lc(r,i),Es(u,s);var c=Es(u,i);for(s=0;s<d.length;s+=2){var f=d[s],h=d[s+1];f==="style"?Vc(r,h):f==="dangerouslySetInnerHTML"?bc(r,h):f==="children"?Mo(r,h):_l(r,f,h,c)}switch(u){case"input":vs(r,i);break;case"textarea":Dc(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vn(r,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vn(r,!!i.multiple,i.defaultValue,!0):Vn(r,!!i.multiple,i.multiple?[]:"",!1))}r[Bo]=i}catch(w){ae(t,t.return,w)}}break;case 6:if(st(e,t),gt(t),o&4){if(t.stateNode===null)throw Error(R(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(w){ae(t,t.return,w)}}break;case 3:if(st(e,t),gt(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(w){ae(t,t.return,w)}break;case 4:st(e,t),gt(t);break;case 13:st(e,t),gt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(ra=de())),o&4&&Eu(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(c=Ie)||f,st(e,t),Ie=c):st(e,t),gt(t),o&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(b=t,f=t.child;f!==null;){for(h=b=f;b!==null;){switch(m=b,g=m.child,m.tag){case 0:case 11:case 14:case 15:No(4,m,m.return);break;case 1:Dn(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){o=m,n=m.return;try{e=o,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(w){ae(o,n,w)}}break;case 5:Dn(m,m.return);break;case 22:if(m.memoizedState!==null){_u(h);continue}}g!==null?(g.return=m,b=g):_u(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=h.stateNode,d=h.memoizedProps.style,s=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Fc("display",s))}catch(w){ae(t,t.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ae(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:st(e,t),gt(t),o&4&&Eu(t);break;case 21:break;default:st(e,t),gt(t)}}function gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dp(n)){var o=n;break e}n=n.return}throw Error(R(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(Mo(r,""),o.flags&=-33);var i=Tu(t);js(t,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=Tu(t);Zs(t,u,s);break;default:throw Error(R(161))}}catch(d){ae(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rg(t,e,n){b=t,pp(t)}function pp(t,e,n){for(var o=(t.mode&1)!==0;b!==null;){var r=b,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||yr;if(!s){var u=r.alternate,d=u!==null&&u.memoizedState!==null||Ie;u=yr;var c=Ie;if(yr=s,(Ie=d)&&!c)for(b=r;b!==null;)s=b,d=s.child,s.tag===22&&s.memoizedState!==null?Iu(r):d!==null?(d.return=s,b=d):Iu(r);for(;i!==null;)b=i,pp(i),i=i.sibling;b=r,yr=u,Ie=c}Cu(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,b=i):Cu(t)}}function Cu(t){for(;b!==null;){var e=b;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||Ci(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Ie)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:lt(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&au(e,i,o);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}au(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&bo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ie||e.flags&512&&Qs(e)}catch(m){ae(e,e.return,m)}}if(e===t){b=null;break}if(n=e.sibling,n!==null){n.return=e.return,b=n;break}b=e.return}}function _u(t){for(;b!==null;){var e=b;if(e===t){b=null;break}var n=e.sibling;if(n!==null){n.return=e.return,b=n;break}b=e.return}}function Iu(t){for(;b!==null;){var e=b;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ci(4,e)}catch(d){ae(e,n,d)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(d){ae(e,r,d)}}var i=e.return;try{Qs(e)}catch(d){ae(e,i,d)}break;case 5:var s=e.return;try{Qs(e)}catch(d){ae(e,s,d)}}}catch(d){ae(e,e.return,d)}if(e===t){b=null;break}var u=e.sibling;if(u!==null){u.return=e.return,b=u;break}b=e.return}}var Pg=Math.ceil,ri=Mt.ReactCurrentDispatcher,na=Mt.ReactCurrentOwner,et=Mt.ReactCurrentBatchConfig,J=0,ve=null,ce=null,Se=0,ze=0,Un=en(0),he=0,Wo=null,gn=0,_i=0,oa=0,Ao=null,Fe=null,ra=0,Zn=1/0,Tt=null,ii=!1,el=null,Kt=null,vr=!1,qt=null,si=0,Ro=0,tl=null,Dr=-1,Ur=0;function Le(){return J&6?de():Dr!==-1?Dr:Dr=de()}function Yt(t){return t.mode&1?J&2&&Se!==0?Se&-Se:mg.transition!==null?(Ur===0&&(Ur=Xc()),Ur):(t=Q,t!==0||(t=window.event,t=t===void 0?16:of(t.type)),t):1}function ct(t,e,n,o){if(50<Ro)throw Ro=0,tl=null,Error(R(185));Xo(t,n,o),(!(J&2)||t!==ve)&&(t===ve&&(!(J&2)&&(_i|=n),he===4&&Ht(t,Se)),Be(t,o),n===1&&J===0&&!(e.mode&1)&&(Zn=de()+500,Si&&tn()))}function Be(t,e){var n=t.callbackNode;mh(t,e);var o=zr(t,t===ve?Se:0);if(o===0)n!==null&&Ua(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&Ua(n),e===1)t.tag===0?pg(ku.bind(null,t)):Ef(ku.bind(null,t)),ug(function(){!(J&6)&&tn()}),n=null;else{switch(Qc(o)){case 1:n=Rl;break;case 4:n=Kc;break;case 16:n=qr;break;case 536870912:n=Yc;break;default:n=qr}n=Sp(n,mp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mp(t,e){if(Dr=-1,Ur=0,J&6)throw Error(R(327));var n=t.callbackNode;if(zn()&&t.callbackNode!==n)return null;var o=zr(t,t===ve?Se:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=li(t,o);else{e=o;var r=J;J|=2;var i=gp();(ve!==t||Se!==e)&&(Tt=null,Zn=de()+500,cn(t,e));do try{Dg();break}catch(u){hp(t,u)}while(1);zl(),ri.current=i,J=r,ce!==null?e=0:(ve=null,Se=0,e=he)}if(e!==0){if(e===2&&(r=Ns(t),r!==0&&(o=r,e=nl(t,r))),e===1)throw n=Wo,cn(t,0),Ht(t,o),Be(t,de()),n;if(e===6)Ht(t,o);else{if(r=t.current.alternate,!(o&30)&&!Mg(r)&&(e=li(t,o),e===2&&(i=Ns(t),i!==0&&(o=i,e=nl(t,i))),e===1))throw n=Wo,cn(t,0),Ht(t,o),Be(t,de()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(R(345));case 2:sn(t,Fe,Tt);break;case 3:if(Ht(t,o),(o&130023424)===o&&(e=ra+500-de(),10<e)){if(zr(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){Le(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=bs(sn.bind(null,t,Fe,Tt),e);break}sn(t,Fe,Tt);break;case 4:if(Ht(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var s=31-dt(o);i=1<<s,s=e[s],s>r&&(r=s),o&=~i}if(o=r,o=de()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Pg(o/1960))-o,10<o){t.timeoutHandle=bs(sn.bind(null,t,Fe,Tt),o);break}sn(t,Fe,Tt);break;case 5:sn(t,Fe,Tt);break;default:throw Error(R(329))}}}return Be(t,de()),t.callbackNode===n?mp.bind(null,t):null}function nl(t,e){var n=Ao;return t.current.memoizedState.isDehydrated&&(cn(t,e).flags|=256),t=li(t,e),t!==2&&(e=Fe,Fe=n,e!==null&&ol(e)),t}function ol(t){Fe===null?Fe=t:Fe.push.apply(Fe,t)}function Mg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!mt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ht(t,e){for(e&=~oa,e&=~_i,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dt(e),o=1<<n;t[n]=-1,e&=~o}}function ku(t){if(J&6)throw Error(R(327));zn();var e=zr(t,0);if(!(e&1))return Be(t,de()),null;var n=li(t,e);if(t.tag!==0&&n===2){var o=Ns(t);o!==0&&(e=o,n=nl(t,o))}if(n===1)throw n=Wo,cn(t,0),Ht(t,e),Be(t,de()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sn(t,Fe,Tt),Be(t,de()),null}function ia(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Zn=de()+500,Si&&tn())}}function yn(t){qt!==null&&qt.tag===0&&!(J&6)&&zn();var e=J;J|=1;var n=et.transition,o=Q;try{if(et.transition=null,Q=1,t)return t()}finally{Q=o,et.transition=n,J=e,!(J&6)&&tn()}}function sa(){ze=Un.current,ne(Un)}function cn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ag(n)),ce!==null)for(n=ce.return;n!==null;){var o=n;switch(Hl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Kr();break;case 3:Xn(),ne(Ge),ne(Ne),Yl();break;case 5:Kl(o);break;case 4:Xn();break;case 13:ne(ie);break;case 19:ne(ie);break;case 10:$l(o.type._context);break;case 22:case 23:sa()}n=n.return}if(ve=t,ce=t=Xt(t.current,null),Se=ze=e,he=0,Wo=null,oa=_i=gn=0,Fe=Ao=null,un!==null){for(e=0;e<un.length;e++)if(n=un[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}un=null}return t}function hp(t,e){do{var n=ce;try{if(zl(),Pr.current=oi,ni){for(var o=se.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}ni=!1}if(hn=0,ye=me=se=null,ko=!1,$o=0,na.current=null,n===null||n.return===null){he=1,Wo=e,ce=null;break}e:{var i=t,s=n.return,u=n,d=e;if(e=Se,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,f=u,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=mu(s);if(g!==null){g.flags&=-257,hu(g,s,u,i,e),g.mode&1&&pu(i,c,e),e=g,d=c;var S=e.updateQueue;if(S===null){var w=new Set;w.add(d),e.updateQueue=w}else S.add(d);break e}else{if(!(e&1)){pu(i,c,e),la();break e}d=Error(R(426))}}else if(oe&&u.mode&1){var T=mu(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),hu(T,s,u,i,e),Bl(Qn(d,u));break e}}i=d=Qn(d,u),he!==4&&(he=2),Ao===null?Ao=[i]:Ao.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Zf(i,d,e);lu(i,v);break e;case 1:u=d;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Kt===null||!Kt.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=jf(i,u,e);lu(i,E);break e}}i=i.return}while(i!==null)}vp(n)}catch(_){e=_,ce===n&&n!==null&&(ce=n=n.return);continue}break}while(1)}function gp(){var t=ri.current;return ri.current=oi,t===null?oi:t}function la(){(he===0||he===3||he===2)&&(he=4),ve===null||!(gn&268435455)&&!(_i&268435455)||Ht(ve,Se)}function li(t,e){var n=J;J|=2;var o=gp();(ve!==t||Se!==e)&&(Tt=null,cn(t,e));do try{Lg();break}catch(r){hp(t,r)}while(1);if(zl(),J=n,ri.current=o,ce!==null)throw Error(R(261));return ve=null,Se=0,he}function Lg(){for(;ce!==null;)yp(ce)}function Dg(){for(;ce!==null&&!ih();)yp(ce)}function yp(t){var e=wp(t.alternate,t,ze);t.memoizedProps=t.pendingProps,e===null?vp(t):ce=e,na.current=null}function vp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kg(n,e),n!==null){n.flags&=32767,ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,ce=null;return}}else if(n=Ig(n,e,ze),n!==null){ce=n;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);he===0&&(he=5)}function sn(t,e,n){var o=Q,r=et.transition;try{et.transition=null,Q=1,Ug(t,e,n,o)}finally{et.transition=r,Q=o}return null}function Ug(t,e,n,o){do zn();while(qt!==null);if(J&6)throw Error(R(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hh(t,i),t===ve&&(ce=ve=null,Se=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vr||(vr=!0,Sp(qr,function(){return zn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=et.transition,et.transition=null;var s=Q;Q=1;var u=J;J|=4,na.current=null,Ag(t,n),fp(n,t),tg(Ds),$r=!!Ls,Ds=Ls=null,t.current=n,Rg(n),sh(),J=u,Q=s,et.transition=i}else t.current=n;if(vr&&(vr=!1,qt=t,si=r),i=t.pendingLanes,i===0&&(Kt=null),uh(n.stateNode),Be(t,de()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(ii)throw ii=!1,t=el,el=null,t;return si&1&&t.tag!==0&&zn(),i=t.pendingLanes,i&1?t===tl?Ro++:(Ro=0,tl=t):Ro=0,tn(),null}function zn(){if(qt!==null){var t=Qc(si),e=et.transition,n=Q;try{if(et.transition=null,Q=16>t?16:t,qt===null)var o=!1;else{if(t=qt,qt=null,si=0,J&6)throw Error(R(331));var r=J;for(J|=4,b=t.current;b!==null;){var i=b,s=i.child;if(b.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var c=u[d];for(b=c;b!==null;){var f=b;switch(f.tag){case 0:case 11:case 15:No(8,f,i)}var h=f.child;if(h!==null)h.return=f,b=h;else for(;b!==null;){f=b;var m=f.sibling,g=f.return;if(up(f),f===c){b=null;break}if(m!==null){m.return=g,b=m;break}b=g}}}var S=i.alternate;if(S!==null){var w=S.child;if(w!==null){S.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}b=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,b=s;else e:for(;b!==null;){if(i=b,i.flags&2048)switch(i.tag){case 0:case 11:case 15:No(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,b=v;break e}b=i.return}}var y=t.current;for(b=y;b!==null;){s=b;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,b=x;else e:for(s=y;b!==null;){if(u=b,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ci(9,u)}}catch(_){ae(u,u.return,_)}if(u===s){b=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,b=E;break e}b=u.return}}if(J=r,tn(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(gi,t)}catch{}o=!0}return o}finally{Q=n,et.transition=e}}return!1}function Nu(t,e,n){e=Qn(n,e),e=Zf(t,e,1),t=Wt(t,e,1),e=Le(),t!==null&&(Xo(t,1,e),Be(t,e))}function ae(t,e,n){if(t.tag===3)Nu(t,t,n);else for(;e!==null;){if(e.tag===3){Nu(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Kt===null||!Kt.has(o))){t=Qn(n,t),t=jf(e,t,1),e=Wt(e,t,1),t=Le(),e!==null&&(Xo(e,1,t),Be(e,t));break}}e=e.return}}function bg(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&n,ve===t&&(Se&n)===n&&(he===4||he===3&&(Se&130023424)===Se&&500>de()-ra?cn(t,0):oa|=n),Be(t,e)}function xp(t,e){e===0&&(t.mode&1?(e=ar,ar<<=1,!(ar&130023424)&&(ar=4194304)):e=1);var n=Le();t=At(t,e),t!==null&&(Xo(t,e,n),Be(t,n))}function Fg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xp(t,n)}function Vg(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(R(314))}o!==null&&o.delete(e),xp(t,n)}var wp;wp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ge.current)Ve=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ve=!1,_g(t,e,n);Ve=!!(t.flags&131072)}else Ve=!1,oe&&e.flags&1048576&&Cf(e,Qr,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;Lr(t,e),t=e.pendingProps;var r=Wn(e,Ne.current);qn(e,n),r=Ql(null,e,o,t,r,n);var i=Zl();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(o)?(i=!0,Yr(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jl(e),r.updater=Ei,e.stateNode=r,r._reactInternals=e,zs(e,o,t,n),e=Js(null,e,o,!0,i,n)):(e.tag=0,oe&&i&&Gl(e),Me(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(Lr(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=Hg(o),t=lt(o,t),r){case 0:e=Os(null,e,o,t,n);break e;case 1:e=vu(null,e,o,t,n);break e;case 11:e=gu(null,e,o,t,n);break e;case 14:e=yu(null,e,o,lt(o.type,t),n);break e}throw Error(R(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:lt(o,r),Os(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:lt(o,r),vu(t,e,o,r,n);case 3:e:{if(op(e),t===null)throw Error(R(387));o=e.pendingProps,i=e.memoizedState,r=i.element,Rf(t,e),ei(e,o,null,n);var s=e.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Qn(Error(R(423)),e),e=xu(t,e,o,n,r);break e}else if(o!==r){r=Qn(Error(R(424)),e),e=xu(t,e,o,n,r);break e}else for($e=Jt(e.stateNode.containerInfo.firstChild),Oe=e,oe=!0,ut=null,n=Nf(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kn(),o===r){e=Rt(t,e,n);break e}Me(t,e,o,n)}e=e.child}return e;case 5:return Pf(e),t===null&&Hs(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,s=r.children,Us(o,r)?s=null:i!==null&&Us(o,i)&&(e.flags|=32),np(t,e),Me(t,e,s,n),e.child;case 6:return t===null&&Hs(e),null;case 13:return rp(t,e,n);case 4:return Wl(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Yn(e,null,o,n):Me(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:lt(o,r),gu(t,e,o,r,n);case 7:return Me(t,e,e.pendingProps,n),e.child;case 8:return Me(t,e,e.pendingProps.children,n),e.child;case 12:return Me(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,s=r.value,j(Zr,o._currentValue),o._currentValue=s,i!==null)if(mt(i.value,s)){if(i.children===r.children&&!Ge.current){e=Rt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var d=u.firstContext;d!==null;){if(d.context===o){if(i.tag===1){d=It(-1,n&-n),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?d.next=d:(d.next=f.next,f.next=d),c.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Bs(i.return,n,e),u.lanes|=n;break}d=d.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(R(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Bs(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Me(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,qn(e,n),r=nt(r),o=o(r),e.flags|=1,Me(t,e,o,n),e.child;case 14:return o=e.type,r=lt(o,e.pendingProps),r=lt(o.type,r),yu(t,e,o,r,n);case 15:return ep(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:lt(o,r),Lr(t,e),e.tag=1,He(o)?(t=!0,Yr(e)):t=!1,qn(e,n),Qf(e,o,r),zs(e,o,r,n),Js(null,e,o,!0,t,n);case 19:return ip(t,e,n);case 22:return tp(t,e,n)}throw Error(R(156,e.tag))};function Sp(t,e){return Wc(t,e)}function Gg(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function je(t,e,n,o){return new Gg(t,e,n,o)}function aa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hg(t){if(typeof t=="function")return aa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kl)return 11;if(t===Nl)return 14}return 2}function Xt(t,e){var n=t.alternate;return n===null?(n=je(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function br(t,e,n,o,r,i){var s=2;if(o=t,typeof t=="function")aa(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case _n:return fn(n.children,r,i,e);case Il:s=8,r|=8;break;case ps:return t=je(12,n,e,r|2),t.elementType=ps,t.lanes=i,t;case ms:return t=je(13,n,e,r),t.elementType=ms,t.lanes=i,t;case hs:return t=je(19,n,e,r),t.elementType=hs,t.lanes=i,t;case Rc:return Ii(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nc:s=10;break e;case Ac:s=9;break e;case kl:s=11;break e;case Nl:s=14;break e;case Ft:s=16,o=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=je(s,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function fn(t,e,n,o){return t=je(7,t,o,e),t.lanes=n,t}function Ii(t,e,n,o){return t=je(22,t,o,e),t.elementType=Rc,t.lanes=n,t.stateNode={isHidden:!1},t}function ls(t,e,n){return t=je(6,t,null,e),t.lanes=n,t}function as(t,e,n){return e=je(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bg(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qi(0),this.expirationTimes=qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ua(t,e,n,o,r,i,s,u,d){return t=new Bg(t,e,n,u,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=je(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jl(i),t}function qg(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function Tp(t){if(!t)return Zt;t=t._reactInternals;e:{if(xn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(He(n))return Tf(t,n,e)}return e}function Ep(t,e,n,o,r,i,s,u,d){return t=ua(n,o,!0,t,r,i,s,u,d),t.context=Tp(null),n=t.current,o=Le(),r=Yt(n),i=It(o,r),i.callback=e??null,Wt(n,i,r),t.current.lanes=r,Xo(t,r,o),Be(t,o),t}function ki(t,e,n,o){var r=e.current,i=Le(),s=Yt(r);return n=Tp(n),e.context===null?e.context=n:e.pendingContext=n,e=It(i,s),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Wt(r,e,s),t!==null&&(ct(t,r,s,i),Rr(t,r,s)),s}function ai(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Au(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function da(t,e){Au(t,e),(t=t.alternate)&&Au(t,e)}function zg(){return null}var Cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function ca(t){this._internalRoot=t}Ni.prototype.render=ca.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));ki(t,e,null,null)};Ni.prototype.unmount=ca.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yn(function(){ki(null,t,null,null)}),e[Nt]=null}};function Ni(t){this._internalRoot=t}Ni.prototype.unstable_scheduleHydration=function(t){if(t){var e=ef();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gt.length&&e!==0&&e<Gt[n].priority;n++);Gt.splice(n,0,t),n===0&&nf(t)}};function fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ai(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ru(){}function $g(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var c=ai(s);i.call(c)}}var s=Ep(e,o,t,0,null,!1,!1,"",Ru);return t._reactRootContainer=s,t[Nt]=s.current,Go(t.nodeType===8?t.parentNode:t),yn(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var c=ai(d);u.call(c)}}var d=ua(t,0,!1,null,null,!1,!1,"",Ru);return t._reactRootContainer=d,t[Nt]=d.current,Go(t.nodeType===8?t.parentNode:t),yn(function(){ki(e,d,n,o)}),d}function Ri(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var d=ai(s);u.call(d)}}ki(e,s,t,r)}else s=$g(n,e,t,r,o);return ai(s)}Zc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vo(e.pendingLanes);n!==0&&(Pl(e,n|1),Be(e,de()),!(J&6)&&(Zn=de()+500,tn()))}break;case 13:yn(function(){var o=At(t,1);if(o!==null){var r=Le();ct(o,t,1,r)}}),da(t,1)}};Ml=function(t){if(t.tag===13){var e=At(t,134217728);if(e!==null){var n=Le();ct(e,t,134217728,n)}da(t,134217728)}};jc=function(t){if(t.tag===13){var e=Yt(t),n=At(t,e);if(n!==null){var o=Le();ct(n,t,e,o)}da(t,e)}};ef=function(){return Q};tf=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};_s=function(t,e,n){switch(e){case"input":if(vs(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=wi(o);if(!r)throw Error(R(90));Mc(o),vs(o,r)}}}break;case"textarea":Dc(t,n);break;case"select":e=n.value,e!=null&&Vn(t,!!n.multiple,e,!1)}};Bc=ia;qc=yn;var Og={usingClientEntryPoint:!1,Events:[Zo,An,wi,Gc,Hc,ia]},po={findFiberByHostInstance:an,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jg={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oc(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||zg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xr.isDisabled&&xr.supportsFiber)try{gi=xr.inject(Jg),xt=xr}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Og;We.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fa(e))throw Error(R(200));return qg(t,e,null,n)};We.createRoot=function(t,e){if(!fa(t))throw Error(R(299));var n=!1,o="",r=Cp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ua(t,1,!1,null,null,n,!1,o,r),t[Nt]=e.current,Go(t.nodeType===8?t.parentNode:t),new ca(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Oc(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return yn(t)};We.hydrate=function(t,e,n){if(!Ai(e))throw Error(R(200));return Ri(null,t,e,!0,n)};We.hydrateRoot=function(t,e,n){if(!fa(t))throw Error(R(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=Cp;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Ep(e,null,t,1,n??null,r,!1,i,s),t[Nt]=e.current,Go(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ni(e)};We.render=function(t,e,n){if(!Ai(e))throw Error(R(200));return Ri(null,t,e,!1,n)};We.unmountComponentAtNode=function(t){if(!Ai(t))throw Error(R(40));return t._reactRootContainer?(yn(function(){Ri(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};We.unstable_batchedUpdates=ia;We.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!Ai(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Ri(t,e,n,!1,o)};We.version="18.3.1-next-f1338f8080-20240426";function _p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_p)}catch(t){console.error(t)}}_p(),Cc.exports=We;var Wg=Cc.exports,Pu=Wg;cs.createRoot=Pu.createRoot,cs.hydrateRoot=Pu.hydrateRoot;const Kg=({onGeneratePrompts:t,isProcessing:e,initialConfig:n})=>{const[o,r]=M.useState(""),i=M.useRef(null),s=M.useRef(null),u=M.useRef(null),[d,c]=M.useState(n.style),[f,h]=M.useState(n.ratio),[m,g]=M.useState(n.model),[S,w]=M.useState(n.contentType||"article"),[T,v]=M.useState(""),[y,x]=M.useState(n.imageSize||"1K"),[E,_]=M.useState(n.logoData),[I,k]=M.useState(n.logoPosition||"bottom-right"),[C,N]=M.useState(n.logoSize||20),[A,G]=M.useState(n.ctaText||""),[X,z]=M.useState(n.ctaColor||"#E60023"),[K,fe]=M.useState(n.ctaTextColor||"#FFFFFF"),[Y,pe]=M.useState(n.ctaPosition||"bottom-center"),[L,H]=M.useState(n.referenceImages||[]),[B,Z]=M.useState(""),[re,qe]=M.useState(!1);M.useEffect(()=>{c(n.style),h(n.ratio),g(n.model),n.contentType&&w(n.contentType),n.referenceImages&&H(n.referenceImages),n.imageSize&&x(n.imageSize),n.logoData&&_(n.logoData),n.logoPosition&&k(n.logoPosition),n.logoSize&&N(n.logoSize),n.ctaText&&G(n.ctaText),n.ctaColor&&z(n.ctaColor),n.ctaTextColor&&fe(n.ctaTextColor),n.ctaPosition&&pe(n.ctaPosition)},[n]);const Ye=()=>{if(!o.trim())return;const P=o.split(`
`).filter(ee=>ee.trim().length>0);t(P,{style:d,ratio:f,model:m,contentType:S,websiteUrl:T.trim(),referenceImages:L.length>0?L:void 0,imageSize:m==="gemini-3-pro-image-preview"?y:void 0,logoData:E,logoPosition:I,logoSize:C,ctaText:A.trim(),ctaColor:X,ctaTextColor:K,ctaPosition:Y})},F=()=>{r(""),H([]),Z(""),G("")},V=()=>{r(S==="product"?`https://www.amazon.com/dp/B08H734WGB
https://www.nike.com/t/air-force-1-07-mens-shoes-5QFp5Z`:`https://www.healthline.com/nutrition/meal-prep-ideas
https://www.budgetbytes.com/chicken-lime-soup`)},U=()=>{var P;(P=i.current)==null||P.click()},O=P=>{var Re;const ee=(Re=P.target.files)==null?void 0:Re[0];if(!ee)return;const ge=new FileReader;ge.onload=St=>{var Ut;const it=(Ut=St.target)==null?void 0:Ut.result;if(it){const on=it.split(/\r?\n/).map(Sn=>Sn.trim().replace(/^["']|["']$/g,"")).filter(Sn=>Sn.length>0);on.length>0&&r(Sn=>{const xm=Sn.trim()?`
`:"";return Sn.trim()+xm+on.join(`
`)})}},ge.readAsText(ee),P.target.value=""},Ee=P=>{const ee=P.target.files;!ee||ee.length===0||(Array.from(ee).forEach(ge=>{if(ge.size>4*1024*1024){alert(`Image ${ge.name} is too large. Max size 4MB.`);return}const Re=new FileReader;Re.onload=St=>{var Ut;const it=(Ut=St.target)==null?void 0:Ut.result;it&&H(on=>[...on,it])},Re.readAsDataURL(ge)}),P.target.value="")},Xe=P=>{var Re;const ee=(Re=P.target.files)==null?void 0:Re[0];if(!ee)return;if(ee.size>2*1024*1024){alert("Logo too large. Please use a file under 2MB.");return}const ge=new FileReader;ge.onload=St=>{var it;(it=St.target)!=null&&it.result&&_(St.target.result)},ge.readAsDataURL(ee),P.target.value=""},Ae=async()=>{if(B.trim()){qe(!0);try{const P=await fetch(B);if(!P.ok)throw new Error("Failed to fetch");const ee=await P.blob(),ge=new FileReader;ge.onloadend=()=>{ge.result&&(H(Re=>[...Re,ge.result]),Z("")),qe(!1)},ge.readAsDataURL(ee)}catch{alert("Could not load image from URL directly. This is likely due to security restrictions (CORS) on the target website. Please download the image and upload it manually."),qe(!1)}}},tr=P=>{H(ee=>ee.filter((ge,Re)=>Re!==P))},nr=[{value:"bottom-right",label:"Bottom Right"},{value:"bottom-center",label:"Bottom Center"},{value:"bottom-left",label:"Bottom Left"},{value:"top-right",label:"Top Right"},{value:"top-center",label:"Top Center"},{value:"top-left",label:"Top Left"},{value:"center",label:"Center"}];return p.jsxs("div",{className:"w-full md:w-80 lg:w-96 bg-white dark:bg-slate-900 border-r border-gray-200 dark:border-slate-800 p-5 flex flex-col h-full shrink-0 overflow-y-auto transition-colors",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-sm font-bold text-gray-800 dark:text-white",children:"Pin Configuration"}),p.jsx("div",{className:"flex gap-2",children:p.jsx("button",{onClick:F,className:"text-xs font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 px-2 py-1 rounded transition-colors",children:"Clear"})})]}),p.jsxs("div",{className:"mb-6 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg flex",children:[p.jsx("button",{onClick:()=>w("article"),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S==="article"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Standard Post"}),p.jsx("button",{onClick:()=>w("product"),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${S==="product"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:"Product"})]}),p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h2",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wide",children:S==="product"?"Product URLs":"Article URLs"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"file",ref:i,onChange:O,className:"hidden",accept:".txt,.csv"}),p.jsx("button",{onClick:U,className:"text-[10px] font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 flex items-center gap-1 transition-colors",children:"Import List"})]})]}),p.jsxs("div",{className:"relative mb-6",children:[p.jsx("textarea",{className:"w-full h-40 border border-gray-300 dark:border-slate-700 rounded-lg p-3 text-xs font-mono text-gray-700 dark:text-slate-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none resize-none bg-gray-50 dark:bg-slate-800",placeholder:S==="product"?"https://amazon.com/dp/...":"https://yourdomain.com/post-1",value:o,onChange:P=>r(P.target.value),disabled:e}),!o&&p.jsx("div",{className:"absolute top-3 left-3 right-3 bottom-3 pointer-events-none opacity-40 text-xs text-gray-500 dark:text-slate-400",children:S==="product"?p.jsxs(p.Fragment,{children:["https://myshop.com/products/running-shoes",p.jsx("br",{}),"https://amazon.com/dp/B08X..."]}):p.jsxs(p.Fragment,{children:["https://yourdomain.com/healthy-recipes",p.jsx("br",{}),"https://yourdomain.com/travel-guide"]})})]}),p.jsxs("div",{className:"mb-4 border-t border-gray-100 dark:border-slate-800 pt-5",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsxs("label",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wide flex items-center gap-2",children:[p.jsx("svg",{className:"w-3.5 h-3.5 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Logo Overlay"]}),E&&p.jsx("button",{onClick:()=>_(void 0),className:"text-[10px] text-red-500 hover:text-red-700",children:"Remove"})]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg p-3 space-y-3",children:[E?p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 border border-gray-200 dark:border-slate-600 rounded bg-white/50 flex items-center justify-center p-1",children:p.jsx("img",{src:E,alt:"Logo",className:"max-w-full max-h-full object-contain"})}),p.jsx("div",{className:"flex-1 text-[10px] text-gray-500",children:"Logo loaded"})]}):p.jsx("div",{onClick:()=>{var P;return(P=u.current)==null?void 0:P.click()},className:"w-full h-12 border border-dashed border-gray-300 dark:border-slate-600 rounded flex items-center justify-center cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-400 dark:text-slate-500 text-[10px] transition-colors",children:"+ Upload Logo (PNG)"}),p.jsx("input",{type:"file",ref:u,onChange:Xe,accept:"image/png,image/jpeg",className:"hidden"}),E&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400 mb-1",children:"Position"}),p.jsx("select",{value:I,onChange:P=>k(P.target.value),className:"w-full bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-600 text-gray-700 dark:text-slate-200 text-xs rounded p-1.5 focus:ring-1 focus:ring-pink-500 outline-none",children:nr.map(P=>p.jsx("option",{value:P.value,children:P.label},P.value))})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400",children:"Size"}),p.jsxs("span",{className:"text-[9px] text-gray-400",children:[C,"%"]})]}),p.jsx("input",{type:"range",min:"10",max:"60",step:"5",value:C,onChange:P=>N(Number(P.target.value)),className:"w-full h-1.5 bg-gray-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-pink-500"})]})]})]})]}),p.jsxs("div",{className:"mb-6 border-t border-gray-100 dark:border-slate-800 pt-5",children:[p.jsx("div",{className:"flex justify-between items-center mb-3",children:p.jsxs("label",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wide flex items-center gap-2",children:[p.jsx("svg",{className:"w-3.5 h-3.5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Call to Action (CTA)"]})}),p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg p-3 space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400 mb-1",children:"Button Text"}),p.jsx("input",{type:"text",value:A,onChange:P=>G(P.target.value),placeholder:"e.g. Shop Now, Read More",className:"w-full bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-600 text-gray-700 dark:text-slate-200 text-xs rounded p-2 focus:ring-1 focus:ring-blue-500 outline-none"})]}),A&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400 mb-1",children:"Button Color"}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("input",{type:"color",value:X,onChange:P=>z(P.target.value),className:"w-8 h-8 rounded cursor-pointer border-none bg-transparent"}),p.jsx("span",{className:"text-[10px] font-mono text-gray-400",children:X})]})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400 mb-1",children:"Text Color"}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("input",{type:"color",value:K,onChange:P=>fe(P.target.value),className:"w-8 h-8 rounded cursor-pointer border-none bg-transparent"}),p.jsx("span",{className:"text-[10px] font-mono text-gray-400",children:K})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-[10px] font-semibold text-gray-500 dark:text-slate-400 mb-1",children:"Position"}),p.jsx("select",{value:Y,onChange:P=>pe(P.target.value),className:"w-full bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-600 text-gray-700 dark:text-slate-200 text-xs rounded p-1.5 focus:ring-1 focus:ring-blue-500 outline-none",children:nr.map(P=>p.jsx("option",{value:P.value,children:P.label},P.value))})]})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("div",{className:"flex justify-between items-center mb-2",children:p.jsxs("label",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wide",children:["Reference Assets ",p.jsx("span",{className:"text-gray-400 font-normal normal-case",children:"(Optional)"})]})}),p.jsxs("div",{className:"flex gap-2 mb-3",children:[p.jsx("input",{type:"text",value:B,onChange:P=>Z(P.target.value),placeholder:"Paste Image Link...",className:"flex-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 focus:ring-1 focus:ring-indigo-500 outline-none"}),p.jsx("button",{onClick:Ae,disabled:re||!B,className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",children:re?"...":"Add"})]}),p.jsx("input",{type:"file",ref:s,onChange:Ee,className:"hidden",accept:"image/*",multiple:!0}),p.jsx("div",{onClick:()=>{var P;return(P=s.current)==null?void 0:P.click()},className:"w-full h-16 border-2 border-dashed border-gray-200 dark:border-slate-700 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-indigo-300 dark:hover:border-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors mb-3",children:p.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p.jsx("span",{className:"text-[10px]",children:"Upload Files"})]})}),L.length>0&&p.jsx("div",{className:"grid grid-cols-3 gap-2",children:L.map((P,ee)=>p.jsxs("div",{className:"relative aspect-square bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 overflow-hidden group",children:[p.jsx("img",{src:P,alt:`Ref ${ee}`,className:"w-full h-full object-cover"}),p.jsx("button",{onClick:()=>tr(ee),className:"absolute top-1 right-1 bg-black/60 hover:bg-black/80 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ee))})]}),p.jsxs("div",{className:"space-y-5 flex-1 border-t border-gray-100 dark:border-slate-800 pt-5",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-slate-300 mb-1.5",children:"Pin Style:"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:d,onChange:P=>c(P.target.value),className:"w-full appearance-none bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-700 text-gray-700 dark:text-slate-200 text-xs rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-2.5 pr-8",disabled:e,children:[p.jsx("option",{value:"basic_top",children:"Basic - Text at Top"}),p.jsx("option",{value:"basic_middle",children:"Basic - Text at Middle"}),p.jsx("option",{value:"basic_bottom",children:"Basic - Text at Bottom"}),p.jsx("option",{value:"collage",children:"Collage - Multiple Images"}),p.jsx("option",{value:"custom",children:"Custom - Your Brand Guidelines"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-slate-400",children:p.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-slate-300 mb-1.5",children:"Aspect Ratio:"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:f,onChange:P=>h(P.target.value),className:"w-full appearance-none bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-700 text-gray-700 dark:text-slate-200 text-xs rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-2.5 pr-8",disabled:e,children:[p.jsx("option",{value:"9:16",children:"9:16 - Standard Pinterest (Recommended)"}),p.jsx("option",{value:"2:3",children:"2:3 - Classic Portrait"}),p.jsx("option",{value:"1:2",children:"1:2 - Tall Pin"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-slate-400",children:p.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-slate-300 mb-1.5",children:"Image Model:"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:m,onChange:P=>g(P.target.value),className:"w-full appearance-none bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-700 text-gray-700 dark:text-slate-200 text-xs rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-2.5 pr-8",disabled:e,children:[p.jsxs("optgroup",{label:"Google",children:[p.jsx("option",{value:"gemini-2.5-flash-image",children:"Gemini 2.5 Flash (Fastest)"}),p.jsx("option",{value:"gemini-3-pro-image-preview",children:"Nano Banana Pro (High Res)"}),p.jsx("option",{value:"imagen-4.0-generate-001",children:"Google Imagen 3 (High Quality)"})]}),p.jsxs("optgroup",{label:"Replicate",children:[p.jsx("option",{value:"flux-schnell",children:"Flux Schnell (Speed)"}),p.jsx("option",{value:"flux-dev",children:"Flux Dev (Quality)"}),p.jsx("option",{value:"sdxl-turbo",children:"SDXL Turbo (Fastest)"}),p.jsx("option",{value:"seedream4",children:"SeeDream4 (Artistic)"}),p.jsx("option",{value:"ideogram",children:"Ideogram (Text Rendering)"})]})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-slate-400",children:p.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:p.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),m==="gemini-3-pro-image-preview"&&p.jsxs("div",{className:"mt-2 ml-1",children:[p.jsx("label",{className:"block text-[10px] font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Resolution:"}),p.jsx("div",{className:"flex gap-2",children:["1K","2K","4K"].map(P=>p.jsx("button",{onClick:()=>x(P),className:`flex-1 py-1 text-[10px] font-semibold rounded border transition-colors ${y===P?"bg-emerald-50 dark:bg-emerald-900/30 border-emerald-500 text-emerald-700 dark:text-emerald-400":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-gray-600 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:P},P))})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-slate-300 mb-1.5",children:"Website URL (On Image):"}),p.jsx("input",{type:"text",value:T,onChange:P=>v(P.target.value),placeholder:"e.g. mydomain.com",className:"w-full bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-lg p-2.5 text-xs text-gray-700 dark:text-slate-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none",disabled:e})]})]}),p.jsxs("div",{className:"mt-8 space-y-3",children:[p.jsx("button",{onClick:V,disabled:e,className:"w-full py-2.5 px-4 rounded-lg text-sm font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors flex items-center justify-center gap-2",children:"< > Load Sample"}),p.jsx("button",{onClick:Ye,disabled:e||!o.trim(),className:`w-full py-3 px-4 rounded-lg text-sm font-semibold text-white transition-colors flex items-center justify-center gap-2
            ${e||!o.trim()?"bg-emerald-300 dark:bg-emerald-800/50 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-600 shadow-md hover:shadow-lg"}`,children:e?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Generate Prompts"]})})]})]})},Yg=({pin:t,onUpdate:e,onGenerateImage:n,onRegenerateText:o,onRecreate:r,onDownload:i,onEditImage:s})=>{var k;const[u,d]=M.useState(!1),[c,f]=M.useState(""),[h,m]=M.useState(!1),[g,S]=M.useState(!1),w=C=>{navigator.clipboard.writeText(C)},T=async()=>{o&&(S(!0),await o(t.id),S(!1))},v=()=>{r&&window.confirm("This will reset the entire pin (Title, Description, and Image) and generate new prompts. Continue?")&&r(t.id)},y=()=>{if(!t.imageUrl)return;const C=`
      <!DOCTYPE html>
      <html>
        <head><title>${t.title||"Pin Image"}</title></head>
        <body style="margin:0; display:flex; align-items:center; justify-content:center; background:#1a1a1a; height: 100vh;">
          <img src="${t.imageUrl}" style="max-width:100%; max-height:100vh; object-fit:contain;" />
        </body>
      </html>
    `,N=new Blob([C],{type:"text/html"}),A=URL.createObjectURL(N);window.open(A,"_blank")||alert("Pop-up blocked. Please allow pop-ups to view full size image.")},x=async()=>{if(!(!s||!c.trim())){m(!0);try{await s(t.id,c),f(""),d(!1)}catch{alert("Failed to edit image. Please try again.")}finally{m(!1)}}},E=t.status==="complete"&&t.imageUrl,_=t.status==="generating_image",I=t.status==="analyzing";return p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col h-full transition-all hover:shadow-md",children:[p.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-slate-700 bg-gray-50 dark:bg-slate-700/50 flex items-center justify-between gap-2",children:[p.jsx("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex-1",title:t.url,children:t.url}),p.jsxs("div",{className:"flex items-center gap-2",children:[((k=t.config)==null?void 0:k.contentType)==="product"&&p.jsx("span",{className:"px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded text-[9px] font-bold uppercase tracking-wide border border-orange-200 dark:border-orange-800/50",children:"Product"}),p.jsx("button",{onClick:()=>w(t.url),className:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors p-1 rounded hover:bg-gray-100 dark:hover:bg-slate-600 flex items-center gap-1 text-[10px] font-medium border border-gray-200 dark:border-slate-600",title:"Copy URL",children:p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r&&p.jsx("button",{onClick:v,className:"text-gray-400 hover:text-red-500 transition-colors p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-1 text-[10px] font-medium border border-gray-200 dark:border-slate-600",title:"Recreate entire pin (Start Over)",disabled:I||_,children:p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),!E&&p.jsxs("div",{className:"p-4 flex flex-col gap-4 flex-1",children:[p.jsxs("div",{className:"flex gap-2 items-end",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider mb-1 block",children:"Target Keyword"}),p.jsx("input",{type:"text",value:t.targetKeyword,onChange:C=>e(t.id,{targetKeyword:C.target.value}),placeholder:"e.g. Strength Training",className:"w-full bg-indigo-50/50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/50 rounded px-2 py-1.5 text-xs text-indigo-900 dark:text-indigo-300 font-medium focus:ring-1 focus:ring-indigo-500 outline-none",disabled:I||_})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider mb-1 block",children:"Annotated Interests"}),p.jsx("input",{type:"text",value:t.annotatedInterests,onChange:C=>e(t.id,{annotatedInterests:C.target.value}),placeholder:"e.g. healthy, meal prep",className:"w-full bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-300 italic focus:ring-1 focus:ring-indigo-500 outline-none",disabled:I||_})]})]}),o&&!I&&p.jsx("button",{onClick:T,title:"Regenerate Title & Description based on updated keywords",disabled:g,className:`mb-[1px] p-2 bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800/50 rounded-lg transition-colors shrink-0 flex items-center justify-center h-[34px] w-[34px]
                            ${g?"opacity-50 cursor-wait":""}`,children:g?p.jsxs("svg",{className:"animate-spin h-4 w-4 text-indigo-600 dark:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),p.jsxs("div",{className:"flex-1 flex flex-col",children:[p.jsxs("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider mb-1 block flex justify-between",children:[p.jsx("span",{children:"AI-Generated Prompt"}),!I&&t.visualPrompt&&p.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal",children:"Editable"})]}),I?p.jsx("div",{className:"w-full h-32 bg-gray-100 dark:bg-slate-700/50 rounded animate-pulse flex items-center justify-center text-xs text-gray-400 dark:text-slate-500",children:"Generating Prompt..."}):p.jsx("textarea",{value:t.visualPrompt,onChange:C=>e(t.id,{visualPrompt:C.target.value}),placeholder:"Ready to generate prompt",className:"w-full h-32 bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded p-2 text-xs font-mono text-gray-700 dark:text-slate-300 leading-relaxed focus:ring-1 focus:ring-indigo-500 outline-none resize-none",disabled:_})]}),p.jsx("button",{onClick:()=>n(t.id),disabled:I||_||!t.visualPrompt,className:`w-full py-2.5 rounded-lg text-sm font-semibold text-white shadow-sm flex items-center justify-center gap-2
                ${I||_||!t.visualPrompt?"bg-indigo-300 dark:bg-indigo-800/50 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:_?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Pin..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Create Pin"]})})]}),E&&p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("div",{className:"relative w-full aspect-[9/16] bg-gray-100 dark:bg-slate-900 group shrink-0 max-h-[300px] overflow-hidden",children:[p.jsx("img",{src:t.imageUrl,alt:t.title,className:`w-full h-full object-cover transition-opacity ${h?"opacity-50":"opacity-100"}`}),p.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:[p.jsx("button",{onClick:y,className:"bg-white/90 p-2 rounded-full hover:bg-white text-gray-800",title:"View Full Size",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),p.jsx("button",{onClick:()=>d(!0),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-md transform hover:scale-105 transition-all",children:"Edit Image"})]}),h&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),u&&p.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 border-b border-gray-200 dark:border-slate-600",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400",children:"Magic Edit (Nano Banana)"}),p.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:c,onChange:C=>f(C.target.value),placeholder:"e.g. Add a retro filter, remove person...",className:"flex-1 text-xs bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-800 dark:text-slate-200 rounded p-1.5 focus:ring-1 focus:ring-emerald-500 outline-none"}),p.jsx("button",{onClick:x,disabled:!c.trim()||h,className:"bg-emerald-500 hover:bg-emerald-600 text-white text-xs px-3 py-1.5 rounded font-medium disabled:opacity-50",children:"Go"})]})]}),p.jsxs("div",{className:"p-4 flex flex-col gap-4 flex-1 overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center bg-indigo-50 dark:bg-indigo-900/10 p-2 rounded-lg border border-indigo-100 dark:border-indigo-800/30",children:[p.jsx("span",{className:"text-[10px] font-medium text-indigo-900 dark:text-indigo-300",children:"Content Options"}),p.jsx("button",{onClick:T,disabled:g,className:`text-xs bg-white dark:bg-slate-800 border border-indigo-200 dark:border-indigo-800 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 px-2 py-1 rounded shadow-sm flex items-center gap-1 transition-all ${g?"opacity-50":""}`,title:"Regenerate Title, Description & Visual Prompt",children:g?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin h-3.5 w-3.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Regenerating..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Regenerate Text"]})})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider",children:"Title"}),p.jsxs("button",{onClick:()=>w(t.title),className:"text-[10px] flex items-center gap-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 bg-gray-50 dark:bg-slate-700/50 px-1.5 py-0.5 rounded border border-gray-100 dark:border-slate-600",children:[p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})]}),p.jsx("textarea",{value:t.title,onChange:C=>e(t.id,{title:C.target.value}),className:"w-full bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded p-2 text-sm font-bold text-gray-800 dark:text-slate-100 focus:ring-1 focus:ring-emerald-500 outline-none resize-none h-16"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider",children:"Description"}),p.jsxs("button",{onClick:()=>w(t.description),className:"text-[10px] flex items-center gap-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 bg-gray-50 dark:bg-slate-700/50 px-1.5 py-0.5 rounded border border-gray-100 dark:border-slate-600",children:[p.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})]}),p.jsx("textarea",{value:t.description,onChange:C=>e(t.id,{description:C.target.value}),className:"w-full bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded p-2 text-xs text-gray-600 dark:text-slate-300 focus:ring-1 focus:ring-emerald-500 outline-none resize-none h-24"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 tracking-wider mb-1 block",children:"Visual Prompt"}),p.jsx("textarea",{value:t.visualPrompt,onChange:C=>e(t.id,{visualPrompt:C.target.value}),className:"w-full bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded p-2 text-xs font-mono text-gray-600 dark:text-slate-300 focus:ring-1 focus:ring-indigo-500 outline-none resize-none h-20"})]}),t.tags.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((C,N)=>p.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-slate-700 text-gray-500 dark:text-slate-400 text-[10px] rounded-full",children:["#",C]},N))})]}),p.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/30 border-t border-gray-100 dark:border-slate-700 flex gap-2",children:[p.jsxs("button",{onClick:()=>n(t.id),disabled:_,className:"flex-1 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 rounded-md text-xs font-semibold shadow-sm flex items-center justify-center gap-1.5 transition-colors",children:[p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Regenerate Image"]}),p.jsxs("button",{onClick:()=>i(t.id),className:"flex-1 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-md text-xs font-semibold shadow-sm flex items-center justify-center gap-1.5 transition-colors",children:[p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Pin"]})]})]}),t.status==="error"&&p.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/90 flex flex-col items-center justify-center p-6 text-center z-10",children:[p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-500 rounded-full p-3 mb-2",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h4",{className:"text-sm font-bold text-gray-800 dark:text-white",children:"Generation Failed"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 mb-4",children:t.error||"Something went wrong."}),p.jsx("button",{onClick:()=>e(t.id,{status:E?"complete":"ready_for_generation",error:void 0}),className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium hover:underline",children:"Dismiss"})]})]})},Xg=({isOpen:t,onClose:e,customRules:n,imageRules:o,defaultConfig:r,replicateApiKey:i,googleApiKey:s,csvSettings:u,onSave:d})=>{const[c,f]=M.useState(n),[h,m]=M.useState(o),[g,S]=M.useState(i),[w,T]=M.useState(s),[v,y]=M.useState(r.style),[x,E]=M.useState(r.ratio),[_,I]=M.useState(r.model),[k,C]=M.useState(u.imgbbApiKey),[N,A]=M.useState(u.postInterval),[G,X]=M.useState(u.pinsPerDay),[z,K]=M.useState("idle");if(M.useEffect(()=>{t&&(f(n),m(o),S(i),T(s),y(r.style),E(r.ratio),I(r.model),C(u.imgbbApiKey),A(u.postInterval),X(u.pinsPerDay),K("idle"))},[t,n,o,r,i,s,u]),!t)return null;const fe=()=>{K("saving"),setTimeout(()=>{d(c,h,{style:v,ratio:x,model:_,contentType:"article"},g,w,{imgbbApiKey:k,postInterval:N,pinsPerDay:G}),K("saved"),setTimeout(()=>{e()},750)},500)};return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),p.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] transition-colors",children:[p.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-indigo-500 flex items-center justify-center text-white",children:p.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Settings"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Configure your Ecomverse defaults and API keys"})]}),p.jsx("button",{onClick:e,className:"ml-auto text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"API Credentials"]}),p.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 border border-orange-100 dark:border-orange-900/30 rounded-lg p-4 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Google Gemini API Key (Required)"}),p.jsx("input",{type:"password",value:w,onChange:Y=>T(Y.target.value),placeholder:"AIzaSy...",className:"w-full bg-white dark:bg-slate-700 border border-orange-200 dark:border-orange-800/50 rounded p-2 text-xs text-gray-700 dark:text-white focus:ring-1 focus:ring-orange-500 outline-none"}),p.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:"Used for generating text, pin details, and Gemini images."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Replicate API Token (Optional)"}),p.jsx("input",{type:"password",value:g,onChange:Y=>S(Y.target.value),placeholder:"r8_...",className:"w-full bg-white dark:bg-slate-700 border border-orange-200 dark:border-orange-800/50 rounded p-2 text-xs text-gray-700 dark:text-white focus:ring-1 focus:ring-orange-500 outline-none"}),p.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:"Required ONLY for Flux, Ideogram, and SDXL models."})]})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Configuration Defaults"]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Default Pin Style"}),p.jsxs("select",{value:v,onChange:Y=>y(Y.target.value),className:"w-full bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 text-xs rounded-md p-2 focus:ring-1 focus:ring-emerald-500 outline-none",children:[p.jsx("option",{value:"basic_top",children:"Basic - Text at Top"}),p.jsx("option",{value:"basic_middle",children:"Basic - Text at Middle"}),p.jsx("option",{value:"basic_bottom",children:"Basic - Text at Bottom"}),p.jsx("option",{value:"collage",children:"Collage"}),p.jsx("option",{value:"custom",children:"Custom"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Default Aspect Ratio"}),p.jsxs("select",{value:x,onChange:Y=>E(Y.target.value),className:"w-full bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 text-xs rounded-md p-2 focus:ring-1 focus:ring-emerald-500 outline-none",children:[p.jsx("option",{value:"9:16",children:"9:16 (Standard)"}),p.jsx("option",{value:"2:3",children:"2:3 (Classic)"}),p.jsx("option",{value:"1:2",children:"1:2 (Tall)"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Default Image Model"}),p.jsxs("select",{value:_,onChange:Y=>I(Y.target.value),className:"w-full bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-200 text-xs rounded-md p-2 focus:ring-1 focus:ring-emerald-500 outline-none",children:[p.jsx("option",{value:"gemini-2.5-flash-image",children:"Gemini 2.5 Flash"}),p.jsx("option",{value:"gemini-3-pro-image-preview",children:"Nano Banana Pro"}),p.jsx("option",{value:"imagen-4.0-generate-001",children:"Imagen 3"}),p.jsx("option",{value:"ideogram",children:"Ideogram (Replicate)"}),p.jsx("option",{value:"flux-schnell",children:"Flux Schnell (Replicate)"}),p.jsx("option",{value:"flux-dev",children:"Flux Dev (Replicate)"}),p.jsx("option",{value:"sdxl-turbo",children:"SDXL Turbo (Replicate)"}),p.jsx("option",{value:"seedream4",children:"SeeDream4 (Replicate)"})]})]})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Title & Description Rules (ChatGPT 5 Style)"]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded-lg p-3",children:[p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Customize how the AI generates Titles and Descriptions."}),p.jsx("textarea",{value:c,onChange:Y=>f(Y.target.value),className:"w-full h-32 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded p-3 text-xs font-mono text-gray-700 dark:text-slate-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none resize-none"})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Image Prompting Rules"]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600 rounded-lg p-3",children:[p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:'Instructions for generating the Visual Image Prompt (e.g. "Always include bright colors", "Use photorealistic style").'}),p.jsx("textarea",{value:h,onChange:Y=>m(Y.target.value),className:"w-full h-32 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded p-3 text-xs font-mono text-gray-700 dark:text-slate-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none resize-none",placeholder:"e.g. Ensure all images have high contrast. Avoid using cartoon styles..."})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4 text-pink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"CSV & Scheduling Options"]}),p.jsxs("div",{className:"bg-pink-50 dark:bg-pink-900/10 border border-pink-100 dark:border-pink-900/30 rounded-lg p-4 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-1",children:"ImgBB API Key (Optional)"}),p.jsx("input",{type:"password",value:k,onChange:Y=>C(Y.target.value),placeholder:"b80aeb48f4248d948ba2be1605046d6c",className:"w-full bg-white dark:bg-slate-700 border border-pink-200 dark:border-pink-800/50 rounded p-2 text-xs text-gray-700 dark:text-white focus:ring-1 focus:ring-pink-500 outline-none"}),p.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:[p.jsx("strong",{children:"Enable Image Hosting:"})," Add your ImgBB API Key to automatically upload generated images and include direct URLs in your CSV export."]}),p.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:["Get a free API Key: ",p.jsx("a",{href:"https://api.imgbb.com/",target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 dark:text-pink-400 underline hover:text-pink-700",children:"Get ImgBB API Key (100% free, no limits!)"})]}),p.jsxs("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-400 mt-1",children:[p.jsx("strong",{children:"Benefit:"})," Images hosted on ImgBB CDN forever, perfect for bulk Pinterest uploading!"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Post Interval (minutes)"}),p.jsxs("select",{value:N,onChange:Y=>A(Y.target.value),className:"w-full bg-white dark:bg-slate-700 border border-pink-200 dark:border-pink-800/50 rounded p-2 text-xs text-gray-700 dark:text-white focus:ring-1 focus:ring-pink-500 outline-none",children:[p.jsx("option",{value:"30",children:"Every 30 minutes"}),p.jsx("option",{value:"60",children:"Every 1 hour"}),p.jsx("option",{value:"120",children:"Every 2 hours"}),p.jsx("option",{value:"180",children:"Every 3 hours"})]}),p.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:"Set how often pins should be scheduled when using auto-increment in CSV editor."}),p.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:[p.jsx("strong",{children:"Example:"})," 30 minutes = 08:00, 08:30, 09:00, 09:30..."]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Pins Per Day"}),p.jsx("input",{type:"number",min:"1",max:"50",value:G,onChange:Y=>X(Math.max(1,Math.min(50,parseInt(Y.target.value)||15))),className:"w-full bg-white dark:bg-slate-700 border border-pink-200 dark:border-pink-800/50 rounded p-2 text-xs text-gray-700 dark:text-white focus:ring-1 focus:ring-pink-500 outline-none"}),p.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:"Maximum number of pins to schedule per day in CSV editor."}),p.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:[p.jsx("strong",{children:"Example:"})," Set to 15 = only 15 time slots per day, then moves to next day. This helps you schedule consistently without overwhelming your Pinterest account."]})]})]})]})]}),p.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-slate-700/30 border-t border-gray-100 dark:border-slate-700 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",disabled:z!=="idle",children:"Cancel"}),p.jsx("button",{onClick:fe,disabled:z!=="idle",className:`px-6 py-2 text-sm font-bold rounded-lg shadow-sm transition-all flex items-center justify-center min-w-[140px]
                    ${z==="saved"?"bg-green-500 text-white":z==="saving"?"bg-emerald-400 text-white cursor-wait":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:z==="saved"?p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved!"]}):z==="saving"?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Settings"})]})]})]})},wo={LICENSE_API_URL:"https://license.ecomversetec.com/license_server.php"},Qg=({onActivate:t,onOpenAdmin:e})=>{const[n,o]=M.useState(""),[r,i]=M.useState(""),[s,u]=M.useState(""),[d,c]=M.useState(!1),[f,h]=M.useState(""),m=async()=>{if(h(""),!n.trim()){h("Please enter your License Key.");return}if(!r.trim()){h("Google API Key is required to run the application.");return}c(!0);const g=n.trim().toUpperCase();if(g==="WAL7BXDX"){setTimeout(()=>{localStorage.setItem("ecomverse_license_active","true"),localStorage.setItem("ecomverse_license_key",g),localStorage.setItem("ecomverse_google_key",r.trim()),localStorage.setItem("ecomverse_replicate_key",s.trim()),t(r.trim(),s.trim()),c(!1)},800);return}try{const S=localStorage.getItem("ecomverse_license_keys");if(S&&JSON.parse(S).find(v=>v.key===g&&v.active)){setTimeout(()=>{localStorage.setItem("ecomverse_license_active","true"),localStorage.setItem("ecomverse_license_key",g),localStorage.setItem("ecomverse_google_key",r.trim()),localStorage.setItem("ecomverse_replicate_key",s.trim()),t(r.trim(),s.trim()),c(!1)},800);return}}catch(S){console.error("Failed to check local keys",S)}try{const S=await fetch(wo.LICENSE_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:g})}),w=await S.json();S.ok&&w.valid?(localStorage.setItem("ecomverse_license_active","true"),localStorage.setItem("ecomverse_license_key",g),localStorage.setItem("ecomverse_google_key",r.trim()),localStorage.setItem("ecomverse_replicate_key",s.trim()),t(r.trim(),s.trim())):h(w.message||"Invalid License Key.")}catch(S){console.error("License check failed",S),h("Could not connect to license server. Please try again or contact support.")}finally{g!=="WAL7BXDX"&&c(!1)}};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-gray-50/90 backdrop-blur-sm overflow-y-auto",children:p.jsxs("div",{className:"relative bg-slate-900 rounded-2xl shadow-2xl w-full max-w-md p-8 text-center border border-slate-700 my-8",children:[p.jsxs("div",{className:"mb-6 flex flex-col items-center justify-center",children:[p.jsxs("div",{className:"flex items-center h-16 mb-2 select-none",children:[p.jsx("span",{className:"text-6xl font-black text-white tracking-tighter",children:"E"}),p.jsx("div",{className:"w-1 h-12 bg-white mx-2"}),p.jsx("span",{className:"text-6xl font-black text-yellow-400 tracking-tighter",children:"V"})]}),p.jsxs("div",{className:"flex text-xl font-bold tracking-tight select-none",children:[p.jsx("span",{className:"text-white",children:"ECOM"}),p.jsx("span",{className:"text-yellow-400",children:"VERSE"})]})]}),p.jsx("h1",{className:"text-lg font-bold text-white mb-2",children:"Activate Application"}),p.jsx("p",{className:"text-slate-400 text-xs mb-6",children:"Please enter your provided License Key and your own API Keys to enable AI generation features."}),p.jsxs("div",{className:"space-y-4 text-left mb-6",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-white mb-1.5 uppercase tracking-wide",children:["License Key ",p.jsx("span",{className:"text-red-400",children:"*"})]}),p.jsx("input",{type:"text",value:n,onChange:g=>{o(g.target.value),h("")},placeholder:"EV-XXXX-XXXX-XXXX",className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white font-mono text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-white mb-1.5 uppercase tracking-wide",children:["Google Gemini API Key ",p.jsx("span",{className:"text-red-400",children:"*"})]}),p.jsx("input",{type:"password",value:r,onChange:g=>{i(g.target.value),h("")},placeholder:"AIzaSy...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white font-mono text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),p.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Required for AI generation. ",p.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",className:"text-blue-400 hover:underline",children:"Get Key Here"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-white mb-1.5 uppercase tracking-wide",children:["Replicate API Token ",p.jsx("span",{className:"text-slate-500 normal-case",children:"(Optional)"})]}),p.jsx("input",{type:"password",value:s,onChange:g=>u(g.target.value),placeholder:"r8_...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-white font-mono text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),p.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required only for Flux/Ideogram models."})]}),f&&p.jsx("p",{className:"text-xs text-red-400 font-medium text-center p-2 bg-red-900/20 rounded border border-red-900/50",children:f})]}),p.jsx("button",{onClick:m,disabled:d,className:`w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2
                ${d?"opacity-80 cursor-wait":""}`,children:d?p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Activate"})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Zg,jg;function e0(){return{geminiUrl:Zg,vertexUrl:jg}}function t0(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const s=e0();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lt{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];a(f,e.slice(i+1),n[c])}else for(const c of d)a(c,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];a(d[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function n0(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){u=d;break}if(u!==-1&&i.length>u)for(let d=u;d<i.length;d++){const c=i[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}rl(t,r,i,0,s)}}function rl(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const d of u[s])rl(d,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),d={};for(const c of u)d[c]=s[c];for(const[c,f]of Object.entries(d)){const h=[];for(const m of n.slice(o))m==="*"?h.push(c):h.push(m);a(s,h,f)}for(const c of u)delete s[c]}}else{const s=t;i in s&&rl(s[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pa(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o0(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=l(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function r0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],s0(s)),e}function i0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],l0(s)),e}function s0(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>a0(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function l0(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>u0(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function a0(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],h0(n)),e}function u0(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],g0(n)),e}function d0(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function c0(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function f0(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],p0(s)),e}function p0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function Ip(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],m0(s)),e}function m0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function h0(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],pa(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function g0(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],pa(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Mu||(Mu={}));var Lu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Lu||(Lu={}));var Du;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Du||(Du={}));var ue;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ue||(ue={}));var Uu;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Uu||(Uu={}));var bu;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(bu||(bu={}));var Fu;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Fu||(Fu={}));var Vu;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vu||(Vu={}));var Gu;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Gu||(Gu={}));var Hu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hu||(Hu={}));var Bu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Bu||(Bu={}));var qu;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(qu||(qu={}));var zu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(zu||(zu={}));var $u;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($u||($u={}));var Ou;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ou||(Ou={}));var Ju;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ju||(Ju={}));var Wu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Wu||(Wu={}));var Ku;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ku||(Ku={}));var Yu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yu||(Yu={}));var Xu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Xu||(Xu={}));var Qu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Qu||(Qu={}));var ui;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ui||(ui={}));var Zu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zu||(Zu={}));var ju;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ju||(ju={}));var ed;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ed||(ed={}));var il;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(il||(il={}));var td;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(td||(td={}));var nd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nd||(nd={}));var sl;(function(t){t.COLLECTION="COLLECTION"})(sl||(sl={}));var od;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(od||(od={}));var rd;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rd||(rd={}));var id;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(id||(id={}));var sd;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(sd||(sd={}));var ld;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ld||(ld={}));var ad;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ad||(ad={}));var ud;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ud||(ud={}));var dd;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dd||(dd={}));var cd;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cd||(cd={}));var fd;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(fd||(fd={}));var pd;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(pd||(pd={}));var md;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(md||(md={}));var hd;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(hd||(hd={}));var gd;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(gd||(gd={}));var yd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(yd||(yd={}));var vd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(vd||(vd={}));var xd;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(xd||(xd={}));var wd;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(wd||(wd={}));var Sd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Sd||(Sd={}));var Td;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Td||(Td={}));var Ed;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Ed||(Ed={}));var Cd;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Cd||(Cd={}));var _d;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_d||(_d={}));var Id;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Id||(Id={}));var kd;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kd||(kd={}));var Nd;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Nd||(Nd={}));var Ad;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ad||(Ad={}));var bn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(bn||(bn={}));class ll{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class mo{get text(){var e,n,o,r,i,s,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const m of(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,S]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(S!==null||S!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,r,i,s,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,r,i,s,u,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,r,i,s,u,d,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,r,i,s,u,d,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Rd{}class Pd{}class y0{}class v0{}class x0{}class w0{}class Md{}class Ld{}class Dd{}class S0{}class di{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new di;let r;const i=e;return n?r=i0(i):r=r0(i),Object.assign(o,r),o}}class Ud{}class bd{}class Fd{}class Vd{}class T0{}class E0{}class C0{}class ma{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ma,i=f0(e);return Object.assign(o,i),o}}class _0{}class I0{}class k0{}class Gd{}class N0{get text(){var e,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&s.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(s))u!=="inlineData"&&d!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class A0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ha{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ha,i=Ip(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kp(t,e){const n=W(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Np(t){return Array.isArray(t)?t.map(e=>ci(e)):[ci(t)]}function ci(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ap(t){const e=ci(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rp(t){const e=ci(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Hd(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Pp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Hd(e)):[Hd(t)]}function al(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Bd(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ke(t){if(t==null)throw new Error("ContentUnion is required");return al(t)?t:{role:"user",parts:Pp(t)}}function ga(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=ke(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=ke(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ke(n)):[ke(e)]}function tt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Bd(t)||qd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ke(t)]}const e=[],n=[],o=al(t[0]);for(const r of t){const i=al(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Bd(r)||qd(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:Pp(n)}),e}function R0(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(ue).includes(n[0].toUpperCase())?n[0].toUpperCase():ue.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(ue).includes(o.toUpperCase())?o.toUpperCase():ue.TYPE_UNSPECIFIED})}}function $n(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&R0(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ue).includes(u.toUpperCase())?u.toUpperCase():ue.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=$n(u);else if(o.includes(s)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push($n(c))}e[s]=d}else if(r.includes(s)){const d={};for(const[c,f]of Object.entries(u))d[c]=$n(f);e[s]=d}else{if(s==="additionalProperties")continue;e[s]=u}return e}function ya(t){return $n(t)}function va(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function xa(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function no(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$n(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$n(e.response));return t}function oo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function P0(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Dt(t,e){if(typeof e!="string")throw new Error("name must be a string");return P0(t,e,"cachedContents")}function Mp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function nn(t){return pa(t)}function M0(t){return t!=null&&typeof t=="object"&&"name"in t}function L0(t){return t!=null&&typeof t=="object"&&"video"in t}function D0(t){return t!=null&&typeof t=="object"&&"uri"in t}function Lp(t){var e;let n;if(M0(t)&&(n=t.name),!(D0(t)&&(n=t.uri,n===void 0))&&!(L0(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Dp(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Up(t){for(const e of["models","tunedModels","publisherModels"])if(U0(t,e))return t[e];return[]}function U0(t,e){return t!==null&&typeof t=="object"&&e in t}function b0(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function F0(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=b0(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function bp(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function V0(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Fp(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const d=s.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ro(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Vp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G0(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=l(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>xy(s))),a(e,["inlinedResponses"],i)}const r=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["inlinedEmbedContentResponses"],i)}return e}function H0(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function B0(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fr(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["metadata","state"]);r!=null&&a(e,["state"],Vp(r));const i=l(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const d=l(t,["metadata","model"]);d!=null&&a(e,["model"],d);const c=l(t,["metadata","output"]);return c!=null&&a(e,["dest"],G0(Fp(c))),e}function ul(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],Vp(r));const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const d=l(t,["endTime"]);d!=null&&a(e,["endTime"],d);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&a(e,["src"],q0(h));const m=l(t,["outputConfig"]);m!=null&&a(e,["dest"],H0(Fp(m)));const g=l(t,["completionStats"]);return g!=null&&a(e,["completionStats"],g),e}function q0(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function z0(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vy(t,s))),a(n,["requests","requests"],i)}return n}function $0(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function O0(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function J0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function W0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function K0(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Y0(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const c=l(t,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function Y0(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Gp(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Iy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function X0(t,e){const n={},o=l(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Q0(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],B0(V0(r))),n}function zd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],z0(t,bp(t,r)));const i=l(e,["config"]);return i!=null&&X0(i,n),n}function Z0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["inputConfig"],$0(bp(t,r)));const i=l(e,["config"]);return i!=null&&Q0(i,n),n}function j0(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function ey(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],ly(t,r));const i=l(e,["config"]);return i!=null&&j0(i,n),n}function ty(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function ny(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function oy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function ry(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function iy(t,e){const n={},o=l(e,["contents"]);if(o!=null){let i=ga(t,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(e,["config"]);return r!=null&&(a(n,["_self"],sy(r,n)),n0(n,{"requests[].*":"requests[].request.*"})),n}function sy(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ly(t,e){const n={},o=l(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],iy(t,r)),n}function ay(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function uy(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dy(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&a(e,["allowedFunctionNames"],n);const o=l(t,["mode"]);if(o!=null&&a(e,["mode"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cy(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Gp(ke(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const d=l(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=l(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const w=l(e,["seed"]);w!=null&&a(o,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&a(o,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],ya(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&a(o,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(K=>ky(K))),a(n,["safetySettings"],z)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let z=oo(E);Array.isArray(z)&&(z=z.map(K=>Ay(no(K)))),a(n,["tools"],z)}const _=l(e,["toolConfig"]);if(n!==void 0&&_!=null&&a(n,["toolConfig"],Ny(_)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&a(n,["cachedContent"],Dt(t,I));const k=l(e,["responseModalities"]);k!=null&&a(o,["responseModalities"],k);const C=l(e,["mediaResolution"]);C!=null&&a(o,["mediaResolution"],C);const N=l(e,["speechConfig"]);if(N!=null&&a(o,["speechConfig"],va(N)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=l(e,["thinkingConfig"]);A!=null&&a(o,["thinkingConfig"],A);const G=l(e,["imageConfig"]);G!=null&&a(o,["imageConfig"],yy(G));const X=l(e,["enableEnhancedCivicAnswers"]);if(X!=null&&a(o,["enableEnhancedCivicAnswers"],X),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function fy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>K0(c))),a(e,["candidates"],d)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function py(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function my(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],ro(t,o)),n}function hy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function gy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function yy(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["request","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let u=tt(r);Array.isArray(u)&&(u=u.map(d=>Gp(d))),a(n,["request","contents"],u)}const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],cy(t,s,l(n,["request"],{}))),n}function xy(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],fy(n));const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function wy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Sy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function Ty(t){const e={},n=l(t,["config"]);return n!=null&&wy(n,e),e}function Ey(t){const e={},n=l(t,["config"]);return n!=null&&Sy(n,e),e}function Cy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Fr(s))),a(e,["batchJobs"],i)}return e}function _y(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ul(s))),a(e,["batchJobs"],i)}return e}function Iy(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],ay(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],uy(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=l(t,["inlineData"]);d!=null&&a(e,["inlineData"],O0(d));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function ky(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function Ny(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&a(e,["retrievalConfig"],n);const o=l(t,["functionCallingConfig"]);return o!=null&&a(e,["functionCallingConfig"],dy(o)),e}function Ay(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&a(e,["computerUse"],n);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const r=l(t,["codeExecution"]);if(r!=null&&a(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&a(e,["googleMaps"],hy(s));const u=l(t,["googleSearch"]);u!=null&&a(e,["googleSearch"],gy(u));const d=l(t,["googleSearchRetrieval"]);d!=null&&a(e,["googleSearchRetrieval"],d);const c=l(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pt||(Pt={}));class wn{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ry extends Lt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wn(Pt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=zd(this.apiClient,e),o=n._url,r=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const h=Object.assign({},f);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}c.push(h)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Z0(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ul(f))}else{const c=zd(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Fr(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ey(this.apiClient,e);return i=D("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Fr(d))}}async get(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=my(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ul(f))}else{const c=py(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Fr(f))}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const d=W0(this.apiClient,e);s=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=J0(this.apiClient,e);s=D("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Ey(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=_y(f),m=new Gd;return Object.assign(m,h),m})}else{const c=Ty(e);return u=D("batches",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Cy(f),m=new Gd;return Object.assign(m,h),m})}}async delete(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=ny(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>ry(f))}else{const c=ty(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>oy(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Py(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function $d(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ev(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function My(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=tt(s);Array.isArray(f)&&(f=f.map(h=>$d(h))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],$d(ke(u)));const d=l(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>nv(h))),a(e,["tools"],f)}const c=l(t,["toolConfig"]);if(e!==void 0&&c!=null&&a(e,["toolConfig"],tv(c)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ly(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=tt(s);Array.isArray(h)&&(h=h.map(m=>m)),a(e,["contents"],h)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],ke(u));const d=l(t,["tools"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>ov(m))),a(e,["tools"],h)}const c=l(t,["toolConfig"]);e!==void 0&&c!=null&&a(e,["toolConfig"],c);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function Dy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],kp(t,o));const r=l(e,["config"]);return r!=null&&My(r,n),n}function Uy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],kp(t,o));const r=l(e,["config"]);return r!=null&&Ly(r,n),n}function by(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Dt(t,o)),n}function Fy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Dt(t,o)),n}function Vy(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Gy(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Hy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function By(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qy(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&a(e,["allowedFunctionNames"],n);const o=l(t,["mode"]);if(o!=null&&a(e,["mode"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zy(t){const e={},n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);if(u!=null&&a(e,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function $y(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Dt(t,o)),n}function Oy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],Dt(t,o)),n}function Jy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Wy(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Ky(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Yy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function Xy(t){const e={},n=l(t,["config"]);return n!=null&&Ky(n,e),e}function Qy(t){const e={},n=l(t,["config"]);return n!=null&&Yy(n,e),e}function Zy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function jy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function ev(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Hy(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],By(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=l(t,["inlineData"]);d!=null&&a(e,["inlineData"],Py(d));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function tv(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&a(e,["retrievalConfig"],n);const o=l(t,["functionCallingConfig"]);return o!=null&&a(e,["functionCallingConfig"],qy(o)),e}function nv(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&a(e,["computerUse"],n);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const r=l(t,["codeExecution"]);if(r!=null&&a(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&a(e,["googleMaps"],Jy(s));const u=l(t,["googleSearch"]);u!=null&&a(e,["googleSearch"],Wy(u));const d=l(t,["googleSearchRetrieval"]);d!=null&&a(e,["googleSearchRetrieval"],d);const c=l(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function ov(t){const e={},n=l(t,["retrieval"]);n!=null&&a(e,["retrieval"],n);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&a(e,["codeExecution"],r);const i=l(t,["enterpriseWebSearch"]);i!=null&&a(e,["enterpriseWebSearch"],i);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>zy(m))),a(e,["functionDeclarations"],h)}const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const c=l(t,["googleSearchRetrieval"]);c!=null&&a(e,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function rv(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function iv(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function sv(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],Dt(t,o));const r=l(e,["config"]);return r!=null&&rv(r,n),n}function lv(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],Dt(t,o));const r=l(e,["config"]);return r!=null&&iv(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class av extends Lt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wn(Pt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Uy(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=Dy(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Oy(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=$y(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Fy(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Gy(f),m=new Fd;return Object.assign(m,h),m})}else{const c=by(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Vy(f),m=new Fd;return Object.assign(m,h),m})}}async update(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=lv(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=sv(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Qy(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=jy(f),m=new Vd;return Object.assign(m,h),m})}else{const c=Xy(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Zy(f),m=new Vd;return Object.assign(m,h),m})}}}function fi(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function Od(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(t){return this instanceof q?(this.v=t,this):new q(t)}function ft(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(S){return Promise.resolve(S).then(g,h)}}function u(g,S){o[g]&&(r[g]=function(w){return new Promise(function(T,v){i.push([g,w,T,v])>1||d(g,w)})},S&&(r[g]=S(r[g])))}function d(g,S){try{c(o[g](S))}catch(w){m(i[0][3],w)}}function c(g){g.value instanceof q?Promise.resolve(g.value.v).then(f,h):m(i[0][2],g)}function f(g){d("next",g)}function h(g){d("throw",g)}function m(g,S){g(S),i.shift(),i.length&&d(i[0][0],i[0][1])}}function pt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Od=="function"?Od(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(u,d){s=t[i](s),r(u,d,s.done,s.value)})}}function r(i,s,u,d){Promise.resolve(d).then(function(c){i({value:c,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uv(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Hp(n)}function Hp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function dv(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Hp(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class cv{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new fv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class fv{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),dv(i)}async sendMessage(e){var n;await this.sendPromise;const o=ke(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const d=await r,c=(s=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=d.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(h))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=ke(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?Jd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ft(this,arguments,function*(){var r,i,s,u,d,c;const f=[];try{for(var h=!0,m=pt(e),g;g=yield q(m.next()),r=g.done,!r;h=!0){u=g.value,h=!1;const S=u;if(uv(S)){const w=(c=(d=S.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;w!==void 0&&f.push(w)}yield yield q(S)}}catch(S){i={error:S}}finally{try{!h&&!r&&(s=m.return)&&(yield q(s.call(m)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Jd(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ko extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ko.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pv(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function mv(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function hv(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],Lp(n)),e}function gv(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function yv(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],Lp(n)),e}function vv(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function xv(t){const e={},n=l(t,["config"]);return n!=null&&vv(n,e),e}function wv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sv extends Lt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wn(Pt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xv(e);return i=D("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=wv(d),f=new _0;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=pv(e);return i=D("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=mv(d),f=new I0;return Object.assign(f,c),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yv(e);return i=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hv(e);return i=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=gv(d),f=new k0;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vr(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Tv(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Vv(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ev(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Cv(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _v(t){const e={},n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);if(u!=null&&a(e,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Iv(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const d=l(t,["logprobs"]);d!=null&&a(e,["logprobs"],d);const c=l(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const w=l(t,["responseSchema"]);w!=null&&a(e,["responseSchema"],w);const T=l(t,["routingConfig"]);T!=null&&a(e,["routingConfig"],T);const v=l(t,["seed"]);v!=null&&a(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&a(e,["speechConfig"],y);const x=l(t,["stopSequences"]);x!=null&&a(e,["stopSequences"],x);const E=l(t,["temperature"]);E!=null&&a(e,["temperature"],E);const _=l(t,["thinkingConfig"]);_!=null&&a(e,["thinkingConfig"],_);const I=l(t,["topK"]);I!=null&&a(e,["topK"],I);const k=l(t,["topP"]);if(k!=null&&a(e,["topP"],k),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kv(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Nv(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Av(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=l(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],xa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],Tv(ke(S)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let I=oo(w);Array.isArray(I)&&(I=I.map(k=>Hv(no(k)))),a(e,["setup","tools"],I)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&a(e,["setup","sessionResumption"],Gv(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&a(e,["setup","contextWindowCompression"],E);const _=l(t,["proactivity"]);if(e!==void 0&&_!=null&&a(e,["setup","proactivity"],_),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Rv(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],Iv(o));const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=l(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],xa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],ke(S));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let k=oo(w);Array.isArray(k)&&(k=k.map(C=>Bv(no(C)))),a(e,["setup","tools"],k)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&a(e,["setup","sessionResumption"],T);const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&a(e,["setup","contextWindowCompression"],E);const _=l(t,["proactivity"]);e!==void 0&&_!=null&&a(e,["setup","proactivity"],_);const I=l(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&a(e,["setup","explicitVadSignal"],I),n}function Pv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],Av(r,n)),n}function Mv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],Rv(r,n)),n}function Lv(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function Dv(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function Uv(t){const e={},n=l(t,["media"]);if(n!=null){let c=Np(n);Array.isArray(c)&&(c=c.map(f=>Vr(f))),a(e,["mediaChunks"],c)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],Vr(Rp(o)));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],Vr(Ap(i)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const d=l(t,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function bv(t){const e={},n=l(t,["media"]);if(n!=null){let c=Np(n);Array.isArray(c)&&(c=c.map(f=>f)),a(e,["mediaChunks"],c)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],Rp(o));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],Ap(i));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const d=l(t,["activityEnd"]);return d!=null&&a(e,["activityEnd"],d),e}function Fv(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=l(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=l(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=l(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],qv(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const d=l(t,["sessionResumptionUpdate"]);d!=null&&a(e,["sessionResumptionUpdate"],d);const c=l(t,["voiceActivityDetectionSignal"]);c!=null&&a(e,["voiceActivityDetectionSignal"],c);const f=l(t,["voiceActivity"]);return f!=null&&a(e,["voiceActivity"],zv(f)),e}function Vv(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Ev(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],Cv(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=l(t,["inlineData"]);d!=null&&a(e,["inlineData"],Vr(d));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function Gv(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hv(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&a(e,["computerUse"],n);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const r=l(t,["codeExecution"]);if(r!=null&&a(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&a(e,["googleMaps"],kv(s));const u=l(t,["googleSearch"]);u!=null&&a(e,["googleSearch"],Nv(u));const d=l(t,["googleSearchRetrieval"]);d!=null&&a(e,["googleSearchRetrieval"],d);const c=l(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function Bv(t){const e={},n=l(t,["retrieval"]);n!=null&&a(e,["retrieval"],n);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&a(e,["codeExecution"],r);const i=l(t,["enterpriseWebSearch"]);i!=null&&a(e,["enterpriseWebSearch"],i);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>_v(m))),a(e,["functionDeclarations"],h)}const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const c=l(t,["googleSearchRetrieval"]);c!=null&&a(e,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function qv(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=l(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=l(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const d=l(t,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["promptTokensDetails"],g)}const c=l(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["responseTokensDetails"],g)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(S=>S)),a(e,["toolUsePromptTokensDetails"],g)}const m=l(t,["trafficType"]);return m!=null&&a(e,["trafficType"],m),e}function zv(t){const e={},n=l(t,["type"]);return n!=null&&a(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $v(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Ov(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],Jv(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const c=l(t,["logprobsResult"]);c!=null&&a(e,["logprobsResult"],c);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function Jv(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function Wv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let i=tt(r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function Kv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function Yv(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const o=l(t,["statistics"]);return o!=null&&a(e,["statistics"],Xv(o)),e}function Xv(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=l(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function Pi(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iw(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Qv(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=l(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function Zv(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function jv(t,e){const n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],ke(o));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>$p(u))),a(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],$x(i)),n}function ex(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=tt(r);Array.isArray(s)&&(s=s.map(u=>Pi(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&Zv(i),n}function tx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=tt(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&jv(i,n),n}function nx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=l(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function ox(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function rx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function ix(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function sx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function lx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function ax(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const d=l(t,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&a(e,["parameters","outputOptions","compressionQuality"],w);const T=l(t,["addWatermark"]);e!==void 0&&T!=null&&a(e,["parameters","addWatermark"],T);const v=l(t,["labels"]);e!==void 0&&v!=null&&a(e,["labels"],v);const y=l(t,["editMode"]);e!==void 0&&y!=null&&a(e,["parameters","editMode"],y);const x=l(t,["baseSteps"]);return e!==void 0&&x!=null&&a(e,["parameters","editConfig","baseSteps"],x),n}function ux(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>cw(d))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&ax(s,n),n}function dx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Mi(i))),a(e,["generatedImages"],r)}return e}function cx(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function fx(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function px(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let u=ga(t,r);Array.isArray(u)&&(u=u.map(d=>d)),a(n,["requests[]","content"],u)}const i=l(e,["config"]);i!=null&&cx(i,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],W(t,s)),n}function mx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=ga(t,r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&fx(i,n),n}function hx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function gx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Yv(s))),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function yx(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=l(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function vx(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function xx(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wx(t){const e={},n=l(t,["allowedFunctionNames"]);n!=null&&a(e,["allowedFunctionNames"],n);const o=l(t,["mode"]);if(o!=null&&a(e,["mode"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Sx(t){const e={},n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);if(u!=null&&a(e,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Tx(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],Pi(ke(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const d=l(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=l(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const w=l(e,["seed"]);w!=null&&a(o,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&a(o,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],ya(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&a(o,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(K=>fw(K))),a(n,["safetySettings"],z)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let z=oo(E);Array.isArray(z)&&(z=z.map(K=>xw(no(K)))),a(n,["tools"],z)}const _=l(e,["toolConfig"]);if(n!==void 0&&_!=null&&a(n,["toolConfig"],vw(_)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&a(n,["cachedContent"],Dt(t,I));const k=l(e,["responseModalities"]);k!=null&&a(o,["responseModalities"],k);const C=l(e,["mediaResolution"]);C!=null&&a(o,["mediaResolution"],C);const N=l(e,["speechConfig"]);if(N!=null&&a(o,["speechConfig"],va(N)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=l(e,["thinkingConfig"]);A!=null&&a(o,["thinkingConfig"],A);const G=l(e,["imageConfig"]);G!=null&&a(o,["imageConfig"],Yx(G));const X=l(e,["enableEnhancedCivicAnswers"]);if(X!=null&&a(o,["enableEnhancedCivicAnswers"],X),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Ex(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],ke(r));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const d=l(e,["candidateCount"]);d!=null&&a(o,["candidateCount"],d);const c=l(e,["maxOutputTokens"]);c!=null&&a(o,["maxOutputTokens"],c);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&a(o,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&a(o,["presencePenalty"],g);const S=l(e,["frequencyPenalty"]);S!=null&&a(o,["frequencyPenalty"],S);const w=l(e,["seed"]);w!=null&&a(o,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&a(o,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],ya(v));const y=l(e,["responseJsonSchema"]);y!=null&&a(o,["responseJsonSchema"],y);const x=l(e,["routingConfig"]);x!=null&&a(o,["routingConfig"],x);const E=l(e,["modelSelectionConfig"]);E!=null&&a(o,["modelConfig"],E);const _=l(e,["safetySettings"]);if(n!==void 0&&_!=null){let pe=_;Array.isArray(pe)&&(pe=pe.map(L=>L)),a(n,["safetySettings"],pe)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let pe=oo(I);Array.isArray(pe)&&(pe=pe.map(L=>$p(no(L)))),a(n,["tools"],pe)}const k=l(e,["toolConfig"]);n!==void 0&&k!=null&&a(n,["toolConfig"],k);const C=l(e,["labels"]);n!==void 0&&C!=null&&a(n,["labels"],C);const N=l(e,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Dt(t,N));const A=l(e,["responseModalities"]);A!=null&&a(o,["responseModalities"],A);const G=l(e,["mediaResolution"]);G!=null&&a(o,["mediaResolution"],G);const X=l(e,["speechConfig"]);X!=null&&a(o,["speechConfig"],va(X));const z=l(e,["audioTimestamp"]);z!=null&&a(o,["audioTimestamp"],z);const K=l(e,["thinkingConfig"]);K!=null&&a(o,["thinkingConfig"],K);const fe=l(e,["imageConfig"]);if(fe!=null&&a(o,["imageConfig"],Xx(fe)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Y=l(e,["modelArmorConfig"]);return n!==void 0&&Y!=null&&a(n,["modelArmorConfig"],Y),o}function Wd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=tt(r);Array.isArray(s)&&(s=s.map(u=>Pi(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],Tx(t,i,n)),n}function Kd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["contents"]);if(r!=null){let s=tt(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],Ex(t,i,n)),n}function Yd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ov(c))),a(e,["candidates"],d)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Xd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),a(e,["candidates"],c)}const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const d=l(t,["usageMetadata"]);return d!=null&&a(e,["usageMetadata"],d),e}function Cx(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const d=l(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&a(e,["parameters","includeSafetyAttributes"],d);const c=l(t,["includeRaiReason"]);e!==void 0&&c!=null&&a(e,["parameters","includeRaiReason"],c);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","mimeType"],h);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function _x(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const d=l(t,["seed"]);e!==void 0&&d!=null&&a(e,["parameters","seed"],d);const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&a(e,["parameters","safetySetting"],c);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&a(e,["parameters","language"],g);const S=l(t,["outputMimeType"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","mimeType"],S);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&a(e,["parameters","outputOptions","compressionQuality"],w);const T=l(t,["addWatermark"]);e!==void 0&&T!=null&&a(e,["parameters","addWatermark"],T);const v=l(t,["labels"]);e!==void 0&&v!=null&&a(e,["labels"],v);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&a(e,["parameters","sampleImageSize"],y);const x=l(t,["enhancePrompt"]);return e!==void 0&&x!=null&&a(e,["parameters","enhancePrompt"],x),n}function Ix(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&Cx(i,n),n}function kx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&_x(i,n),n}function Nx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Hx(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],qp(r)),e}function Ax(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Mi(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],zp(r)),e}function Rx(t,e){const n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=l(t,["negativePrompt"]);e!==void 0&&d!=null&&a(e,["parameters","negativePrompt"],d);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],Li(f));const h=l(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Mw(g))),a(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Px(t,e){const n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const d=l(t,["aspectRatio"]);e!==void 0&&d!=null&&a(e,["parameters","aspectRatio"],d);const c=l(t,["resolution"]);e!==void 0&&c!=null&&a(e,["parameters","resolution"],c);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&a(e,["parameters","pubsubTopic"],h);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","negativePrompt"],m);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g);const S=l(t,["generateAudio"]);e!==void 0&&S!=null&&a(e,["parameters","generateAudio"],S);const w=l(t,["lastFrame"]);e!==void 0&&w!=null&&a(e,["instances[0]","lastFrame"],ht(w));const T=l(t,["referenceImages"]);if(e!==void 0&&T!=null){let x=T;Array.isArray(x)&&(x=x.map(E=>Lw(E))),a(e,["instances[0]","referenceImages"],x)}const v=l(t,["mask"]);e!==void 0&&v!=null&&a(e,["instances[0]","mask"],Pw(v));const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&a(e,["parameters","compressionQuality"],y),n}function Mx(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],bx(s)),e}function Lx(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],Fx(s)),e}function Dx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],Li(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Op(s));const u=l(e,["source"]);u!=null&&Vx(u,n);const d=l(e,["config"]);return d!=null&&Rx(d,n),n}function Ux(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],ht(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Jp(s));const u=l(e,["source"]);u!=null&&Gx(u,n);const d=l(e,["config"]);return d!=null&&Px(d,n),n}function bx(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>qx(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Fx(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>zx(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Vx(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Li(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Op(i)),n}function Gx(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],ht(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Jp(i)),n}function Hx(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Qx(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],qp(r)),e}function Mi(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Bp(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);r!=null&&a(e,["safetyAttributes"],zp(r));const i=l(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function Bx(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],Bp(n));const o=l(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function qx(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],Aw(n)),e}function zx(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],Rw(n)),e}function $x(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["responseJsonSchema"]);o!=null&&a(e,["responseJsonSchema"],o);const r=l(t,["audioTimestamp"]);r!=null&&a(e,["audioTimestamp"],r);const i=l(t,["candidateCount"]);i!=null&&a(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const d=l(t,["logprobs"]);d!=null&&a(e,["logprobs"],d);const c=l(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&a(e,["responseMimeType"],g);const S=l(t,["responseModalities"]);S!=null&&a(e,["responseModalities"],S);const w=l(t,["responseSchema"]);w!=null&&a(e,["responseSchema"],w);const T=l(t,["routingConfig"]);T!=null&&a(e,["routingConfig"],T);const v=l(t,["seed"]);v!=null&&a(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&a(e,["speechConfig"],y);const x=l(t,["stopSequences"]);x!=null&&a(e,["stopSequences"],x);const E=l(t,["temperature"]);E!=null&&a(e,["temperature"],E);const _=l(t,["thinkingConfig"]);_!=null&&a(e,["thinkingConfig"],_);const I=l(t,["topK"]);I!=null&&a(e,["topK"],I);const k=l(t,["topP"]);if(k!=null&&a(e,["topP"],k),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ox(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function Jx(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],W(t,o)),n}function Wx(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Kx(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Yx(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);if(o!=null&&a(e,["imageSize"],o),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Xx(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const o=l(t,["imageSize"]);o!=null&&a(e,["imageSize"],o);const r=l(t,["personGeneration"]);r!=null&&a(e,["personGeneration"],r);const i=l(t,["outputMimeType"]);i!=null&&a(e,["imageOutputOptions","mimeType"],i);const s=l(t,["outputCompressionQuality"]);return s!=null&&a(e,["imageOutputOptions","compressionQuality"],s),e}function Qx(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],nn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Bp(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],nn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Li(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],nn(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ht(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],nn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Zx(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Dp(t,u)),o}function jx(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Dp(t,u)),o}function ew(t,e){const n={},o=l(e,["config"]);return o!=null&&Zx(t,o,n),n}function tw(t,e){const n={},o=l(e,["config"]);return o!=null&&jx(t,o,n),n}function nw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=Up(r);Array.isArray(i)&&(i=i.map(s=>dl(s))),a(e,["models"],i)}return e}function ow(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=Up(r);Array.isArray(i)&&(i=i.map(s=>cl(s))),a(e,["models"],i)}return e}function rw(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=l(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=l(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function dl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["version"]);i!=null&&a(e,["version"],i);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],ww(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const d=l(t,["outputTokenLimit"]);d!=null&&a(e,["outputTokenLimit"],d);const c=l(t,["supportedGenerationMethods"]);c!=null&&a(e,["supportedActions"],c);const f=l(t,["temperature"]);f!=null&&a(e,["temperature"],f);const h=l(t,["maxTemperature"]);h!=null&&a(e,["maxTemperature"],h);const m=l(t,["topP"]);m!=null&&a(e,["topP"],m);const g=l(t,["topK"]);g!=null&&a(e,["topK"],g);const S=l(t,["thinking"]);return S!=null&&a(e,["thinking"],S),e}function cl(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["versionId"]);i!=null&&a(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>yx(m))),a(e,["endpoints"],h)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const d=l(t,["_self"]);d!=null&&a(e,["tunedModelInfo"],Sw(d));const c=l(t,["defaultCheckpointId"]);c!=null&&a(e,["defaultCheckpointId"],c);const f=l(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),a(e,["checkpoints"],h)}return e}function iw(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],vx(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],xx(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=l(t,["inlineData"]);d!=null&&a(e,["inlineData"],$v(d));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function sw(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],ht(n)),e}function lw(t,e){const n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","baseSteps"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&a(e,["parameters","personGeneration"],d);const c=l(t,["addWatermark"]);e!==void 0&&c!=null&&a(e,["parameters","addWatermark"],c);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const h=l(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const g=l(t,["labels"]);return e!==void 0&&g!=null&&a(e,["labels"],g),n}function aw(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["source"]);r!=null&&dw(r,n);const i=l(e,["config"]);return i!=null&&lw(i,n),n}function uw(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Mi(r))),a(e,["generatedImages"],o)}return e}function dw(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],ht(r));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>sw(u))),a(e,["instances[0]","productImages"],s)}return n}function cw(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],ht(n));const o=l(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=l(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=l(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],rw(i));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],Qv(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const d=l(t,["subjectImageConfig"]);return d!=null&&a(e,["subjectImageConfig"],d),e}function qp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function zp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function fw(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function pw(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],ht(n)),e}function mw(t,e){const n={},o=l(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=l(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const d=l(t,["labels"]);return e!==void 0&&d!=null&&a(e,["labels"],d),n}function hw(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["source"]);r!=null&&yw(r,n);const i=l(e,["config"]);return i!=null&&mw(i,n),n}function gw(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Bx(r))),a(e,["generatedMasks"],o)}return e}function yw(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],ht(r));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],pw(i)),n}function vw(t){const e={},n=l(t,["retrievalConfig"]);n!=null&&a(e,["retrievalConfig"],n);const o=l(t,["functionCallingConfig"]);return o!=null&&a(e,["functionCallingConfig"],wx(o)),e}function xw(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&a(e,["computerUse"],n);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const r=l(t,["codeExecution"]);if(r!=null&&a(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&a(e,["googleMaps"],Wx(s));const u=l(t,["googleSearch"]);u!=null&&a(e,["googleSearch"],Kx(u));const d=l(t,["googleSearchRetrieval"]);d!=null&&a(e,["googleSearchRetrieval"],d);const c=l(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}function $p(t){const e={},n=l(t,["retrieval"]);n!=null&&a(e,["retrieval"],n);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&a(e,["codeExecution"],r);const i=l(t,["enterpriseWebSearch"]);i!=null&&a(e,["enterpriseWebSearch"],i);const s=l(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>Sx(m))),a(e,["functionDeclarations"],h)}const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const c=l(t,["googleSearchRetrieval"]);c!=null&&a(e,["googleSearchRetrieval"],c);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function ww(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function Sw(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function Tw(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function Ew(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function Cw(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","name"],W(t,o));const r=l(e,["config"]);return r!=null&&Tw(r,n),n}function _w(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["config"]);return r!=null&&Ew(r,n),n}function Iw(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&a(e,["parameters","safetySetting"],r);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&a(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&a(e,["parameters","includeRaiReason"],s);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const d=l(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&a(e,["parameters","outputOptions","compressionQuality"],d);const c=l(t,["enhanceInputImage"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=l(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&a(e,["parameters","sampleCount"],m);const g=l(t,["mode"]);return e!==void 0&&g!=null&&a(e,["parameters","mode"],g),n}function kw(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],W(t,o));const r=l(e,["image"]);r!=null&&a(n,["instances[0]","image"],ht(r));const i=l(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&Iw(s,n),n}function Nw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Mi(i))),a(e,["generatedImages"],r)}return e}function Aw(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],nn(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function Rw(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],nn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Pw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],ht(n));const o=l(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function Mw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],Li(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function Lw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],ht(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function Op(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],nn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Jp(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],nn(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dw(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["displayName"],o),n}function Uw(t){const e={},n=l(t,["config"]);return n!=null&&Dw(n,e),e}function bw(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function Fw(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&bw(o,e),e}function Vw(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function Gw(t,e){const n={},o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["customMetadata"],i)}const r=l(t,["chunkingConfig"]);return e!==void 0&&r!=null&&a(e,["chunkingConfig"],r),n}function Hw(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],qw(s)),e}function Bw(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["fileName"]);o!=null&&a(e,["fileName"],o);const r=l(t,["config"]);return r!=null&&Gw(r,e),e}function qw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["parent"]);o!=null&&a(e,["parent"],o);const r=l(t,["documentName"]);return r!=null&&a(e,["documentName"],r),e}function zw(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function $w(t){const e={},n=l(t,["config"]);return n!=null&&zw(n,e),e}function Ow(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["fileSearchStores"],i)}return e}function Wp(t,e){const n={},o=l(t,["mimeType"]);e!==void 0&&o!=null&&a(e,["mimeType"],o);const r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),a(e,["customMetadata"],u)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function Jw(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const o=l(t,["config"]);return o!=null&&Wp(o,e),e}function Ww(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kw="Content-Type",Yw="X-Server-Timeout",Xw="User-Agent",fl="x-goog-api-client",Qw="1.38.0",Zw=`google-genai-sdk/${Qw}`,jw="v1beta1",eS="v1beta";class tS{constructor(e){var n,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:jw}else{if(!this.clientOptions.apiKey)throw new Ko({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:eS,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===sl.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&nS(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Qd(r),new ll(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Qd(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ft(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield q(r.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=i.decode(f,{stream:!0});try{const S=JSON.parse(h);if("error"in S){const w=JSON.parse(JSON.stringify(S.error)),T=w.status,v=w.code,y=`got status: ${T}. ${JSON.stringify(S)}`;if(v>=400&&v<600)throw new Ko({message:y,status:v})}}catch(S){if(S.name==="ApiError")throw S}s+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const T of d){const v=s.indexOf(T);v!==-1&&(m===-1||v<m)&&(m=v,g=T.length)}if(m===-1)break;const S=s.substring(0,m);s=s.substring(m+g);const w=S.trim();if(w.startsWith(u)){const T=w.substring(u.length).trim();try{const v=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield q(new ll(v))}catch(v){throw new Error(`exception parsing stream chunk ${T}. ${v}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Zw+" "+this.clientOptions.userAgentExtra;return e[Xw]=n,e[fl]=n,e[Kw]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(Yw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d={file:r},c=this.getFileName(e),f=D("upload/v1beta/files",d._url),h=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,d,n==null?void 0:n.httpOptions);return i.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),d=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};o!=null&&Wp(o,h);const m=await this.fetchUploadUrl(c,u,d,f,h,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var u;let d={};s?d=s:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Qd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Ko({message:r,status:n}):new Error(r)}}function nS(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const d in s)if(Object.prototype.hasOwnProperty.call(s,d)){const c=s[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS="mcp_used/unknown";let rS=!1;function Kp(t){for(const e of t)if(iS(e)||typeof e=="object"&&"inputSchema"in e)return!0;return rS}function Yp(t){var e;const n=(e=t[fl])!==null&&e!==void 0?e:"";t[fl]=(n+` ${oS}`).trimStart()}function iS(t){return t!==null&&typeof t=="object"&&t instanceof wa}function sS(t){return ft(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield q(n.listTools({cursor:r}));for(const u of s.tools)yield yield q(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class wa{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new wa(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,pt(sS(f))),c;c=await d.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const h=r;s.push(h);const m=h.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=f}}catch(h){n={error:h}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),F0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lS(t,e,n){const o=new A0;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class aS{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=cS(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(x=>{c=x}),h=e.callbacks,m=function(){c({})},g=this.apiClient,S={onopen:m,onmessage:x=>{lS(g,h.onmessage,x)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=h==null?void 0:h.onclose)!==null&&o!==void 0?o:function(x){}},w=this.webSocketFactory.create(d,dS(s),S);w.connect(),await f;const y={setup:{model:W(this.apiClient,e.model)}};return w.send(JSON.stringify(y)),new uS(w,this.apiClient)}}class uS{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Dv(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Lv(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(bn.PLAY)}pause(){this.sendPlaybackControl(bn.PAUSE)}stop(){this.sendPlaybackControl(bn.STOP)}resetContext(){this.sendPlaybackControl(bn.RESET_CONTEXT)}close(){this.conn.close()}}function dS(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function cS(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fS="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function pS(t,e,n){const o=new N0;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const s=Fv(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}class mS{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new aS(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Kp(e.config.tools)&&Yp(h);const m=vS(h);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),A=this.apiClient.getLocation(),G=this.apiClient.getApiKey(),X=!!N&&!!A||!!G;this.apiClient.getCustomBaseUrl()&&!X?f=d:(f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f))}else{const N=this.apiClient.getApiKey();let A="BidiGenerateContent",G="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",G="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${A}?${G}=${N}`}let g=()=>{};const S=new Promise(N=>{g=N}),w=e.callbacks,T=function(){var N;(N=w==null?void 0:w.onopen)===null||N===void 0||N.call(w),g({})},v=this.apiClient,y={onopen:T,onmessage:N=>{pS(v,w.onmessage,N)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(N){},onclose:(o=w==null?void 0:w.onclose)!==null&&o!==void 0?o:function(N){}},x=this.webSocketFactory.create(f,yS(m),y);x.connect(),await S;let E=W(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const N=this.apiClient.getProject(),A=this.apiClient.getLocation();N&&A&&(E=`projects/${N}/locations/${A}/`+E)}let _={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ui.AUDIO]}:e.config.responseModalities=[ui.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],k=[];for(const N of I)if(this.isCallableTool(N)){const A=N;k.push(await A.tool())}else k.push(N);k.length>0&&(e.config.tools=k);const C={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=Mv(this.apiClient,C):_=Pv(this.apiClient,C),delete _.config,x.send(JSON.stringify(_)),new gS(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const hS={turnComplete:!0};class gS{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=tt(n.turns),e.isVertexAI()||(o=o.map(r=>Pi(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(fS)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},hS),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:bv(e)}:n={realtimeInput:Uv(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function yS(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function vS(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zd=10;function jd(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(On(s)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function On(t){return"callTool"in t&&typeof t.callTool=="function"}function xS(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>On(r)))!==null&&o!==void 0?o:!1}function ec(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(On(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function tc(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wS extends Lt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!xS(n)||jd(n.config))return await this.generateContentInternal(d);const c=ec(n);if(c.length>0){const w=c.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,h;const m=tt(d.contents),g=(i=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Zd;let S=0;for(;S<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,T=[];for(const v of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(On(v)){const x=await v.callTool(f.functionCalls);T.push(...x)}S++,h={role:"user",parts:T},d.contents=tt(d.contents),d.contents.push(w),d.contents.push(h),tc(d.config)&&(m.push(w),m.push(h))}return tc(d.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var o,r,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),jd(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const d=ec(n);if(d.length>0){const h=d.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:s.push(d);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new wn(Pt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async d=>On(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Kp(e.config.tools)){const d=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Yp(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(On(s)){const u=s,d=await u.tool();for(const c of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Zd;let s=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,h){return ft(this,arguments,function*(){for(var m,g,S,w,T,v;u<i;){s&&(u++,s=!1);const _=yield q(c.processParamsMaybeAddMcpUsage(h)),I=yield q(c.generateContentStreamInternal(_)),k=[],C=[];try{for(var y=!0,x=(g=void 0,pt(I)),E;E=yield q(x.next()),m=E.done,!m;y=!0){w=E.value,y=!1;const N=w;if(yield yield q(N),N.candidates&&(!((T=N.candidates[0])===null||T===void 0)&&T.content)){C.push(N.candidates[0].content);for(const A of(v=N.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<i&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(A.functionCall.name)){const G=yield q(f.get(A.functionCall.name).callTool([A.functionCall]));k.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(N){g={error:N}}finally{try{!y&&!m&&(S=x.return)&&(yield q(S.call(x)))}finally{if(g)throw g.error}}if(k.length>0){s=!0;const N=new mo;N.candidates=[{content:{role:"user",parts:k}}],yield yield q(N);const A=[];A.push(...C),A.push({role:"user",parts:k});const G=tt(h.contents).concat(A);h.contents=G}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Kd(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Xd(f),m=new mo;return Object.assign(m,h),m})}else{const c=Wd(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Yd(f),m=new mo;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Kd(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return ft(this,arguments,function*(){var m,g,S,w;try{for(var T=!0,v=pt(h),y;y=yield q(v.next()),m=y.done,!m;T=!0){w=y.value,T=!1;const x=w,E=Xd(yield q(x.json()));E.sdkHttpResponse={headers:x.headers};const _=new mo;Object.assign(_,E),yield yield q(_)}}catch(x){g={error:x}}finally{try{!T&&!m&&(S=v.return)&&(yield q(S.call(v)))}finally{if(g)throw g.error}}})})}else{const c=Wd(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return ft(this,arguments,function*(){var m,g,S,w;try{for(var T=!0,v=pt(h),y;y=yield q(v.next()),m=y.done,!m;T=!0){w=y.value,T=!1;const x=w,E=Yd(yield q(x.json()));E.sdkHttpResponse={headers:x.headers};const _=new mo;Object.assign(_,E),yield yield q(_)}}catch(x){g={error:x}}finally{try{!T&&!m&&(S=v.return)&&(yield q(S.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=mx(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=gx(f),m=new Rd;return Object.assign(m,h),m})}else{const c=px(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=hx(f),m=new Rd;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=kx(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Ax(f),m=new Pd;return Object.assign(m,h),m})}else{const c=Ix(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=Nx(f),m=new Pd;return Object.assign(m,h),m})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=ux(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=dx(d),f=new y0;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=kw(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=Nw(d),f=new v0;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=aw(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=uw(d),f=new x0;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=hw(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=gw(d),f=new w0;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Jx(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>cl(f))}else{const c=Ox(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>dl(f))}}async listInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=tw(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=ow(f),m=new Md;return Object.assign(m,h),m})}else{const c=ew(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=nw(f),m=new Md;return Object.assign(m,h),m})}}async update(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=_w(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>cl(f))}else{const c=Cw(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>dl(f))}}async delete(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=ix(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=lx(f),m=new Ld;return Object.assign(m,h),m})}else{const c=rx(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=sx(f),m=new Ld;return Object.assign(m,h),m})}}async countTokens(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=tx(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=ox(f),m=new Dd;return Object.assign(m,h),m})}else{const c=ex(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=nx(f),m=new Dd;return Object.assign(m,h),m})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Wv(this.apiClient,e);return i=D("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=Kv(d),f=new S0;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Ux(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Lx(f),m=new di;return Object.assign(m,h),m})}else{const c=Dx(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Mx(f),m=new di;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SS extends Lt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=c0(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const c=d0(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=o0(e);return i=D("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TS(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function ES(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MS(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function CS(t,e,n){const o={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],PS(t,u));const d=l(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&a(n,["fieldMask"],d),o}function _S(t,e){const n={},o=l(e,["config"]);return o!=null&&a(n,["config"],CS(t,o,n)),n}function IS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function kS(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const o=l(t,["args"]);o!=null&&a(e,["args"],o);const r=l(t,["name"]);if(r!=null&&a(e,["name"],r),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function AS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function RS(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const d=l(t,["maxOutputTokens"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","maxOutputTokens"],d);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","mediaResolution"],c);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],xa(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=l(t,["systemInstruction"]);e!==void 0&&S!=null&&a(e,["setup","systemInstruction"],ES(ke(S)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let I=oo(w);Array.isArray(I)&&(I=I.map(k=>DS(no(k)))),a(e,["setup","tools"],I)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&a(e,["setup","sessionResumption"],LS(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&a(e,["setup","realtimeInputConfig"],x);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&a(e,["setup","contextWindowCompression"],E);const _=l(t,["proactivity"]);if(e!==void 0&&_!=null&&a(e,["setup","proactivity"],_),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function PS(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],W(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],RS(r,n)),n}function MS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const o=l(t,["codeExecutionResult"]);o!=null&&a(e,["codeExecutionResult"],o);const r=l(t,["executableCode"]);r!=null&&a(e,["executableCode"],r);const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],IS(i));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],kS(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const d=l(t,["inlineData"]);d!=null&&a(e,["inlineData"],TS(d));const c=l(t,["text"]);c!=null&&a(e,["text"],c);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&a(e,["videoMetadata"],m),e}function LS(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DS(t){const e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=l(t,["computerUse"]);n!=null&&a(e,["computerUse"],n);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const r=l(t,["codeExecution"]);if(r!=null&&a(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}const s=l(t,["googleMaps"]);s!=null&&a(e,["googleMaps"],NS(s));const u=l(t,["googleSearch"]);u!=null&&a(e,["googleSearch"],AS(u));const d=l(t,["googleSearchRetrieval"]);d!=null&&a(e,["googleSearchRetrieval"],d);const c=l(t,["urlContext"]);return c!=null&&a(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function US(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function bS(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=US(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const d=[];i&&d.push(i),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class FS extends Lt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=_S(this.apiClient,e);i=D("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const d=bS(u,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VS(t,e){const n={},o=l(t,["force"]);return e!==void 0&&o!=null&&a(e,["_query","force"],o),n}function GS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const o=l(t,["config"]);return o!=null&&VS(o,e),e}function HS(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function BS(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function qS(t){const e={},n=l(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const o=l(t,["config"]);return o!=null&&BS(o,e),e}function zS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $S extends Lt{constructor(e){super(),this.apiClient=e,this.list=async n=>new wn(Pt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HS(e);return i=D("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=GS(e);r=D("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qS(e);return i=D("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=zS(d),f=new T0;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OS extends Lt{constructor(e,n=new $S(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new wn(Pt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Uw(e);return i=D("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vw(e);return i=D("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Fw(e);r=D("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$w(e);return i=D("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Ow(d),f=new E0;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jw(e);return i=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Ww(d),f=new C0;return Object.assign(f,c),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Bw(e);return i=D("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Hw(d),f=new ma;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xp=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Xp=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const JS=()=>Xp();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ml=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rt extends Error{}class De extends rt{constructor(e,n,o,r){super(`${De.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new Di({message:o,cause:ml(n)});const i=n;return e===400?new Zp(e,i,o,r):e===401?new jp(e,i,o,r):e===403?new em(e,i,o,r):e===404?new tm(e,i,o,r):e===409?new nm(e,i,o,r):e===422?new om(e,i,o,r):e===429?new rm(e,i,o,r):e>=500?new im(e,i,o,r):new De(e,i,o,r)}}class hl extends De{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Di extends De{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Qp extends Di{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Zp extends De{}class jp extends De{}class em extends De{}class tm extends De{}class nm extends De{}class om extends De{}class rm extends De{}class im extends De{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WS=/^[a-z][a-z0-9+.-]*:/i,KS=t=>WS.test(t);let gl=t=>(gl=Array.isArray,gl(t));const YS=gl;let XS=YS;const nc=XS;function QS(t){if(!t)return!0;for(const e in t)return!1;return!0}function ZS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const jS=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new rt(`${t} must be an integer`);if(e<0)throw new rt(`${t} must be a positive integer`);return e},eT=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tT=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const En="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oT=()=>{var t,e,n,o,r;const i=nT();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":En,"X-Stainless-OS":rc(Deno.build.os),"X-Stainless-Arch":oc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":En,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":En,"X-Stainless-OS":rc((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":oc((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=rT();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":En,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":En,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}const oc=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",rc=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let wr;const iT=()=>wr??(wr=oT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sm(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function lT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return sm({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function lm(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function aT(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const am=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function us(t,e,n){return am(),new File(t,e??"unknown_file",n)}function dT(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const cT=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",fT=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&um(t),pT=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function mT(t,e,n){if(am(),t=await t,fT(t))return t instanceof File?t:us([await t.arrayBuffer()],t.name);if(pT(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),us(await yl(r),e,n)}const o=await yl(t);if(e||(e=dT(t)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return us(o,e,n)}async function yl(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(um(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(cT(t))try{for(var u=!0,d=pt(t),c;c=await d.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const f=r;s.push(...await yl(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${hT(t)}`)}return s}function hT(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dm{constructor(e){this._client=e}}dm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ic=Object.freeze(Object.create(null)),gT=(t=cm)=>function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,h,m)=>{var g,S,w;/[?#]/.test(h)&&(r=!0);const T=o[m];let v=(r?encodeURIComponent:t)(""+T);return m!==o.length&&(T==null||typeof T=="object"&&T.toString===((w=Object.getPrototypeOf((S=Object.getPrototypeOf((g=T.hasOwnProperty)!==null&&g!==void 0?g:ic))!==null&&S!==void 0?S:ic))===null||w===void 0?void 0:w.toString))&&(v=T+"",i.push({start:f.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),f+h+(m===o.length?"":v)},""),u=s.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,h)=>f.start-h.start),i.length>0){let f=0;const h=i.reduce((m,g)=>{const S=" ".repeat(g.start-f),w="^".repeat(g.length);return f=g.start+g.length,m+S+w},"");throw new rt(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${s}
${h}`)}return s},Sr=gT(cm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fm extends dm{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,i=fi(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new rt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new rt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sr`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Sr`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Sr`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,u=fi(i,["api_version"]);return this._client.get(Sr`/${s}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}fm._key=Object.freeze(["interactions"]);class pm extends fm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yT(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Tr;function Sa(t){let e;return(Tr??(e=new globalThis.TextEncoder,Tr=e.encode.bind(e)))(t)}let Er;function sc(t){let e;return(Er??(e=new globalThis.TextDecoder,Er=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ui{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Sa(e):e;this.buffer=yT([this.buffer,n]);const o=[];let r;for(;(r=vT(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(sc(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=sc(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Ui.NEWLINE_CHARS=new Set([`
`,"\r"]);Ui.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function vT(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function xT(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pi={off:0,error:200,warn:300,info:400,debug:500},lc=(t,e,n)=>{if(t){if(ZS(pi,t))return t;Pe(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(pi))}`)}};function So(){}function Cr(t,e,n){return!e||pi[t]>pi[n]?So:e[t].bind(e)}const wT={error:So,warn:So,info:So,debug:So};let ac=new WeakMap;function Pe(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return wT;const r=ac.get(n);if(r&&r[0]===o)return r[1];const i={error:Cr("error",n,o),warn:Cr("warn",n,o),info:Cr("info",n,o),debug:Cr("debug",n,o)};return ac.set(n,[o,i]),i}const ln=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fn{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const i=o?Pe(o):console;function s(){return ft(this,arguments,function*(){var d,c,f,h;if(r)throw new rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,S=pt(ST(e,n)),w;w=yield q(S.next()),d=w.done,!d;g=!0){h=w.value,g=!1;const T=h;if(!m)if(T.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield q(JSON.parse(T.data))}catch(v){throw i.error("Could not parse message into JSON:",T.data),i.error("From chunk:",T.raw),v}}}catch(T){c={error:T}}finally{try{!g&&!d&&(f=S.return)&&(yield q(f.call(S)))}finally{if(c)throw c.error}}m=!0}catch(T){if(pl(T))return yield q(void 0);throw T}finally{m||n.abort()}})}return new Fn(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return ft(this,arguments,function*(){var d,c,f,h;const m=new Ui,g=lm(e);try{for(var S=!0,w=pt(g),T;T=yield q(w.next()),d=T.done,!d;S=!0){h=T.value,S=!1;const v=h;for(const y of m.decode(v))yield yield q(y)}}catch(v){c={error:v}}finally{try{!S&&!d&&(f=w.return)&&(yield q(f.call(w)))}finally{if(c)throw c.error}}for(const v of m.flush())yield yield q(v)})}function s(){return ft(this,arguments,function*(){var d,c,f,h;if(r)throw new rt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var g=!0,S=pt(i()),w;w=yield q(S.next()),d=w.done,!d;g=!0){h=w.value,g=!1;const T=h;m||T&&(yield yield q(JSON.parse(T)))}}catch(T){c={error:T}}finally{try{!g&&!d&&(f=S.return)&&(yield q(f.call(S)))}finally{if(c)throw c.error}}m=!0}catch(T){if(pl(T))return yield q(void 0);throw T}finally{m||n.abort()}})}return new Fn(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new Fn(()=>r(e),this.controller,this.client),new Fn(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return sm({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=Sa(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function ST(t,e){return ft(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new rt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new rt("Attempted to iterate over a response with no body");const u=new ET,d=new Ui,c=lm(t.body);try{for(var f=!0,h=pt(TT(c)),m;m=yield q(h.next()),o=m.done,!o;f=!0){s=m.value,f=!1;const g=s;for(const S of d.decode(g)){const w=u.decode(S);w&&(yield yield q(w))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=h.return)&&(yield q(i.call(h)))}finally{if(r)throw r.error}}for(const g of d.flush()){const S=u.decode(g);S&&(yield yield q(S))}})}function TT(t){return ft(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var u=!0,d=pt(t),c;c=yield q(d.next()),n=c.done,!n;u=!0){i=c.value,u=!1;const f=i;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Sa(f):f;let m=new Uint8Array(s.length+h.length);m.set(s),m.set(h,s.length),s=m;let g;for(;(g=xT(s))!==-1;)yield yield q(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(r=d.return)&&(yield q(r.call(d)))}finally{if(o)throw o.error}}s.length>0&&(yield yield q(s))})}class ET{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=CT(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function CT(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _T(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var u;if(e.options.stream)return Pe(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Fn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Pe(t).debug(`[${o}] response parsed`,ln({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ta extends Promise{constructor(e,n,o=_T){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Ta(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mm=Symbol("brand.privateNullableHeaders");function*IT(t){if(!t)return;if(mm in t){const{values:o,nulls:r}=t;yield*o.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():nc(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=nc(o[1])?o[1]:[o[1]];let s=!1;for(const u of i)u!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,u])}}const ho=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[i,s]of IT(o)){const u=i.toLowerCase();r.has(u)||(e.delete(i),r.add(u)),s===null?(e.delete(i),n.add(u)):(e.append(i,s),n.delete(u))}}return{[mm]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ds=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hm;class bi{constructor(e){var n,o,r,i,s,u,d,{baseURL:c=ds("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=ds("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=fi(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:h},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:bi.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(s=(i=lc(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:lc(ds("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:S,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=g.fetch)!==null&&d!==void 0?d:sT(),this.encoder=uT,this._options=g,this.apiKey=f,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ho([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ho([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ho([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new rt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${En}`}defaultIdempotencyKey(){return`stainless-node-retry-${JS()}`}makeStatusError(e,n,o,r){return De.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=KS(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return QS(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Ta(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,i,s;const u=await e,d=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:h}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,S=Date.now();if(Pe(this).debug(`[${m}] sending request`,ln({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new hl;const w=new AbortController,T=await this.fetchWithTimeout(f,c,h,w).catch(ml),v=Date.now();if(T instanceof globalThis.Error){const x=`retrying, ${n} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new hl;const E=pl(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return Pe(this).info(`[${m}] connection ${E?"timed out":"failed"} - ${x}`),Pe(this).debug(`[${m}] connection ${E?"timed out":"failed"} (${x})`,ln({retryOfRequestLogID:o,url:f,durationMs:v-S,message:T.message})),this.retryRequest(u,n,o??m);throw Pe(this).info(`[${m}] connection ${E?"timed out":"failed"} - error; no more retries left`),Pe(this).debug(`[${m}] connection ${E?"timed out":"failed"} (error; no more retries left)`,ln({retryOfRequestLogID:o,url:f,durationMs:v-S,message:T.message})),E?new Qp:new Di({cause:T})}const y=`[${m}${g}] ${c.method} ${f} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${v-S}ms`;if(!T.ok){const x=await this.shouldRetry(T);if(n&&x){const N=`retrying, ${n} attempts remaining`;return await aT(T.body),Pe(this).info(`${y} - ${N}`),Pe(this).debug(`[${m}] response error (${N})`,ln({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,durationMs:v-S})),this.retryRequest(u,n,o??m,T.headers)}const E=x?"error; no more retries left":"error; not retryable";Pe(this).info(`${y} - ${E}`);const _=await T.text().catch(N=>ml(N).message),I=eT(_),k=I?void 0:_;throw Pe(this).debug(`[${m}] response error (${E})`,ln({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,message:k,durationMs:Date.now()-S})),this.makeStatusError(T.status,I,k,T.headers)}return Pe(this).info(y),Pe(this).debug(`[${m}] response start`,ln({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,durationMs:v-S})),{response:T,options:u,controller:w,requestLogID:m,retryOfRequestLogID:o,startTime:S}}async fetchWithTimeout(e,n,o,r){const i=n||{},{signal:s,method:u}=i,d=fi(i,["signal","method"]);s&&s.addEventListener("abort",()=>r.abort());const c=setTimeout(()=>r.abort(),o),f=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,h=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),d);u&&(h.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var i;let s;const u=r==null?void 0:r.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(s=c)}const d=r==null?void 0:r.get("retry-after");if(d&&!s){const c=parseFloat(d);Number.isNaN(c)?s=Date.parse(d)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await tT(s),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},e),{method:u,path:d,query:c,defaultBaseURL:f}=s,h=this.buildURL(d,c,f);"timeout"in s&&jS("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:s}),S=await this.buildHeaders({options:e,method:u,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:S},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let u=ho([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),iT()),this._options.defaultHeaders,o,e.headers,s]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ho([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:lT(e)}:this.encoder({body:e,headers:o})}}bi.DEFAULT_TIMEOUT=6e4;class xe extends bi{constructor(){super(...arguments),this.interactions=new pm(this)}}hm=xe;xe.GeminiNextGenAPIClient=hm;xe.GeminiNextGenAPIClientError=rt;xe.APIError=De;xe.APIConnectionError=Di;xe.APIConnectionTimeoutError=Qp;xe.APIUserAbortError=hl;xe.NotFoundError=tm;xe.ConflictError=nm;xe.RateLimitError=rm;xe.BadRequestError=Zp;xe.AuthenticationError=jp;xe.InternalServerError=im;xe.PermissionDeniedError=em;xe.UnprocessableEntityError=om;xe.toFile=mT;xe.Interactions=pm;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kT(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function NT(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function AT(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function RT(t,e){const n={},o=l(t,["sdkHttpResponse"]);return o!=null&&a(n,["sdkHttpResponse"],o),n}function PT(t,e,n){const o={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&a(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const d=l(t,["learningRate"]);if(e!==void 0&&d!=null&&a(e,["tuningTask","hyperparameters","learningRate"],d),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function MT(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec"],uc(g))}else if(r==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec"],uc(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const m=l(t,["beta"]);return e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),o}function LT(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&$T(i);const s=l(t,["config"]);return s!=null&&PT(s,n),n}function DT(t,e){const n={},o=l(t,["baseModel"]);o!=null&&a(n,["baseModel"],o);const r=l(t,["preTunedModel"]);r!=null&&a(n,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&OT(i,n,e);const s=l(t,["config"]);return s!=null&&MT(s,n,e),n}function UT(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function bT(t,e){const n={},o=l(t,["name"]);return o!=null&&a(n,["_url","name"],o),n}function FT(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function VT(t,e,n){const o={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),o}function GT(t,e){const n={},o=l(t,["config"]);return o!=null&&FT(o,n),n}function HT(t,e){const n={},o=l(t,["config"]);return o!=null&&VT(o,n),n}function BT(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>gm(u))),a(n,["tuningJobs"],s)}return n}function qT(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>vl(u))),a(n,["tuningJobs"],s)}return n}function zT(t,e){const n={},o=l(t,["name"]);o!=null&&a(n,["model"],o);const r=l(t,["name"]);return r!=null&&a(n,["endpoint"],r),n}function $T(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=l(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(n,["examples","examples"],r)}return n}function OT(t,e,n){const o={};let r=l(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function gm(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],Mp(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const d=l(t,["tuningTask","completeTime"]);d!=null&&a(n,["endTime"],d);const c=l(t,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=l(t,["description"]);f!=null&&a(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&a(n,["baseModel"],h);const m=l(t,["_self"]);return m!=null&&a(n,["tunedModel"],zT(m)),n}function vl(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["state"]);i!=null&&a(n,["state"],Mp(i));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(n,["startTime"],u);const d=l(t,["endTime"]);d!=null&&a(n,["endTime"],d);const c=l(t,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=l(t,["error"]);f!=null&&a(n,["error"],f);const h=l(t,["description"]);h!=null&&a(n,["description"],h);const m=l(t,["baseModel"]);m!=null&&a(n,["baseModel"],m);const g=l(t,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const S=l(t,["preTunedModel"]);S!=null&&a(n,["preTunedModel"],S);const w=l(t,["supervisedTuningSpec"]);w!=null&&a(n,["supervisedTuningSpec"],w);const T=l(t,["preferenceOptimizationSpec"]);T!=null&&a(n,["preferenceOptimizationSpec"],T);const v=l(t,["tuningDataStats"]);v!=null&&a(n,["tuningDataStats"],v);const y=l(t,["encryptionSpec"]);y!=null&&a(n,["encryptionSpec"],y);const x=l(t,["partnerModelTuningSpec"]);x!=null&&a(n,["partnerModelTuningSpec"],x);const E=l(t,["customBaseModel"]);E!=null&&a(n,["customBaseModel"],E);const _=l(t,["experiment"]);_!=null&&a(n,["experiment"],_);const I=l(t,["labels"]);I!=null&&a(n,["labels"],I);const k=l(t,["outputUri"]);k!=null&&a(n,["outputUri"],k);const C=l(t,["pipelineJob"]);C!=null&&a(n,["pipelineJob"],C);const N=l(t,["serviceAccount"]);N!=null&&a(n,["serviceAccount"],N);const A=l(t,["tunedModelDisplayName"]);A!=null&&a(n,["tunedModelDisplayName"],A);const G=l(t,["veoTuningSpec"]);return G!=null&&a(n,["veoTuningSpec"],G),n}function JT(t,e){const n={},o=l(t,["sdkHttpResponse"]);o!=null&&a(n,["sdkHttpResponse"],o);const r=l(t,["name"]);r!=null&&a(n,["name"],r);const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["done"]);s!=null&&a(n,["done"],s);const u=l(t,["error"]);return u!=null&&a(n,["error"],u),n}function uc(t,e){const n={},o=l(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);return r!=null&&a(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WT extends Lt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wn(Pt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:il.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=bT(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>vl(f))}else{const c=UT(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>gm(f))}}async listInternal(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=HT(e);return u=D("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=qT(f),m=new Ud;return Object.assign(m,h),m})}else{const c=GT(e);return u=D("tunedModels",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=BT(f),m=new Ud;return Object.assign(m,h),m})}}async cancel(e){var n,o,r,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=NT(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=RT(f),m=new bd;return Object.assign(m,h),m})}else{const c=kT(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=AT(f),m=new bd;return Object.assign(m,h),m})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=DT(e,e);return i=D("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>vl(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LT(e);return i=D("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>JT(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KT{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YT=1024*1024*8,XT=3,QT=1e3,ZT=2,mi="x-goog-upload-status";async function jT(t,e,n){var o;const r=await ym(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[mi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function eE(t,e,n){var o;const r=await ym(t,e,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[mi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Ip(i),u=new ha;return Object.assign(u,s),u}async function ym(t,e,n){var o,r;let i=0,s=0,u=new ll(new Response),d="upload";for(i=t.size;s<i;){const c=Math.min(YT,i-s),f=t.slice(s,s+c);s+c>=i&&(d+=", finalize");let h=0,m=QT;for(;h<XT&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[mi]));)h++,await nE(m),m=m*ZT;if(s+=c,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[mi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function tE(t){return{size:t.size,type:t.type}}function nE(t){return new Promise(e=>setTimeout(e,t))}class oE{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jT(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eE(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tE(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rE{create(e,n,o){return new iE(e,n,o)}}class iE{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dc="x-goog-api-key";class sE{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(dc)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(dc,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lE="gl-node/";class er{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new xe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=t0(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new sE(this.apiKey);this.apiClient=new tS({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:lE+"web",uploader:new oE,downloader:new KT}),this.models=new wS(this.apiClient),this.live=new mS(this.apiClient,r,new rE),this.batches=new Ry(this.apiClient),this.chats=new cv(this.models,this.apiClient),this.caches=new av(this.apiClient),this.files=new Sv(this.apiClient),this.operations=new SS(this.apiClient),this.authTokens=new FS(this.apiClient),this.tunings=new WT(this.apiClient),this.fileSearchStores=new OS(this.apiClient)}}const aE=async(t,e)=>{for(;;){const n=await fetch(t,{headers:{Authorization:`Token ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Replicate polling error: ${n.statusText}`);const o=await n.json();if(o.status==="succeeded")return o.output[0]||o.output;if(o.status==="failed"||o.status==="canceled")throw new Error(`Replicate generation failed: ${o.error}`);await new Promise(r=>setTimeout(r,1500))}},uE=async(t,e,n)=>{if(!n)throw new Error("Replicate API Key is missing. Please add it in Settings.");let o="",r={prompt:t};switch(e.model){case"flux-schnell":o="black-forest-labs/flux-schnell",r.aspect_ratio=e.ratio.replace(":","_"),e.ratio==="9:16"&&(r.aspect_ratio="9:16"),e.ratio==="2:3"&&(r.aspect_ratio="2:3"),e.ratio==="1:2"&&(r.aspect_ratio="9:16");break;case"flux-dev":o="black-forest-labs/flux-dev",r.aspect_ratio=e.ratio==="9:16"?"9:16":e.ratio==="2:3"?"2:3":"9:16";break;case"sdxl-turbo":o="stability-ai/sdxl-turbo",e.ratio==="9:16"?(r.width=576,r.height=1024):e.ratio==="2:3"?(r.width=672,r.height=1008):e.ratio==="1:2"?(r.width=512,r.height=1024):(r.width=768,r.height=768),r.guidance_scale=0,r.num_inference_steps=2;break;case"ideogram":o="ideogram-ai/ideogram-v2",r.aspect_ratio=e.ratio,e.ratio==="1:2"&&(r.aspect_ratio="9:16");break;case"seedream4":o="black-forest-labs/flux-dev",r.aspect_ratio=e.ratio==="9:16"?"9:16":"2:3",r.prompt=`SeeDream4 Style, ${t}`;break;default:o="black-forest-labs/flux-schnell"}const i=await fetch("https://api.replicate.com/v1/models/"+o+"/predictions",{method:"POST",headers:{Authorization:`Token ${n}`,"Content-Type":"application/json"},body:JSON.stringify({input:r})});if(!i.ok){const u=await i.json();throw new Error(`Replicate API Error: ${u.detail||i.statusText}`)}const s=await i.json();return await aE(s.urls.get,n)},cc=async(t,e,n="",o="",r="",i="",s)=>{if(!s)throw new Error("Google API Key is missing. Please check your settings.");const u=new er({apiKey:s});try{let d="";switch(e.style){case"basic_top":d="The image should have clear space at the TOP for text, or include the title text at the top in a modern font.";break;case"basic_middle":d="The image should have the title text overlaying the center/middle of the image in a bold, readable font.";break;case"basic_bottom":d="The image should have clear space at the BOTTOM for text, or include the title text at the bottom.";break;case"collage":d="The image should appear as a collage of 2-3 related images.";break;case"custom":d="Follow the brand guidelines for image style.";break}e.websiteUrl&&(d+=` IMPORTANT: You MUST include the website URL "${e.websiteUrl}" as small, readable text at the bottom center of the image.`);const c=e.contentType==="product"?`
        CRITICAL PRODUCT VISUALIZATION INSTRUCTIONS:
        1. IDENTIFY the specific physical product being sold or discussed at the URL.
        2. The 'visualPrompt' MUST describe a photorealistic, high-end product photography shot of this specific item.
        3. SETTING: Place the product in a completely natural, real-life environment where it is typically used (e.g. sunglasses on a cafe table, supplement bottle in a kitchen, shoes on a running track).
        4. ANGLES: Use dynamic, eye-catching camera angles. Avoid boring front-on shots. Suggest a 45-degree angle, a top-down flat lay, or a macro shot highlighting texture.
        5. LIGHTING: Use natural, cinematic lighting (golden hour, dappled light, or soft window light).
        6. Do NOT create generic abstract images. Show the PRODUCT prominently.
        `:"",f=i?`Target SEO Keyword: "${i}"`:"Identify the most effective SEO Target Keyword for this content.",h=r?`Additional Focus Interests/Keywords: ${r}`:"",g=`You are an expert Pinterest content strategist using advanced NLP techniques (ChatGPT 5 style) for high-conversion copy.
    
    TEXT PROMPT RULES (Titles/Descriptions):
    ${n.replace(/\$\{url\}/g,t).replace(/\$\{interestsNote\}/g,r?` Note on interests: ${r}`:"")}

    IMAGE PROMPT RULES (Visuals):
    ${o}
    
    TEXT HANDLING GUARDRAILS:
    - You are free to be creative with the visual style (vibrant, poster-style, etc.) as requested.
    - HOWEVER, when describing text overlays in the 'visualPrompt', you MUST strictly instruct the image generator to:
      1. Write the title text EXACTLY ONCE.
      2. Ensure there are NO repeated words.
      3. Do NOT fill the background with random text or "word clouds".
      4. If the design is busy, use a solid backing shape behind the single title text to ensure legibility.
    
    ${c}
    
    If reference images are provided, use them to accurately describe the product's color, shape, and features in the 'visualPrompt', but ALWAYS place it in a new, creative scene as described above.`,S=[];e.referenceImages&&e.referenceImages.length>0&&e.referenceImages.forEach(T=>{try{const v=T.split(",")[1],y=T.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/),x=y?y[1]:"image/png";S.push({inlineData:{mimeType:x,data:v}})}catch(v){console.warn("Failed to parse reference image for Gemini",v)}}),S.push({text:`Analyze this URL string and predict the content to create a high-converting Pinterest Pin configuration. 
      URL: ${t}
      ${h}
      ${f}
      
      Configuration:
      - Aspect Ratio: ${e.ratio}
      - Style Goal: ${d}

      I need:
      1. A Target Keyword (If provided, use it. If not, extract the best one).
      2. A visual image prompt for the generative AI following the IMAGE PROMPT RULES and TEXT HANDLING GUARDRAILS. 
         ${["ideogram","flux-schnell","flux-dev","sdxl-turbo","seedream4"].includes(e.model)?"Optimize prompt for Replicate/Flux/SDXL models (detailed, descriptive).":"Optimize for Gemini/Imagen."}
         IMPORTANT: In the generated Visual Prompt, if the rules ask to include text (e.g. {title}), replace {title} with the actual "title" you generated.
      3. A catchy title following TEXT PROMPT RULES.
      4. A SEO-optimized description following TEXT PROMPT RULES.
      5. 3-5 relevant hashtags.
      `});const w=await u.models.generateContent({model:"gemini-2.5-flash",contents:{parts:S},config:{systemInstruction:g,responseMimeType:"application/json",responseSchema:{type:ue.OBJECT,properties:{targetKeyword:{type:ue.STRING,description:"The main SEO keyword targeted."},visualPrompt:{type:ue.STRING,description:"Detailed prompt for image generation. Ensure {title} placeholders are replaced with actual text."},title:{type:ue.STRING,description:"Catchy headline for the pin."},description:{type:ue.STRING,description:"Engaging description for the pin."},tags:{type:ue.ARRAY,items:{type:ue.STRING}}},required:["targetKeyword","visualPrompt","title","description","tags"]}}});if(w.text)return JSON.parse(w.text);throw new Error("No response from Gemini")}catch(d){throw console.error("Error generating pin details:",d),d}},dE=async(t,e,n,o,r,i)=>{if(!i)throw new Error("Google API Key is missing. Please check your settings.");const s=new er({apiKey:i}),u=o.replace(/\$\{url\}/g,t).replace(/\$\{interestsNote\}/g,n?` Note on interests: ${n}`:"");try{const d=await s.models.generateContent({model:"gemini-2.5-flash",contents:`Regenerate Pinterest text content for this URL: ${t}
            
            IMPORTANT: The user has explicitly changed the target keyword.
            NEW TARGET KEYWORD: "${e}"
            Annotated Interests: "${n}"

            Instruction:
            1. IGNORE any previous keyword context if it conflicts with the NEW TARGET KEYWORD.
            2. Rewrite the Title, Description, and Visual Prompt to focus 100% on "${e}".

            Follow these rules (ChatGPT 5 Style):
            TEXT RULES:
            ${u}

            IMAGE RULES:
            ${r}
            
            CRITICAL VISUAL PROMPT RULE: 
            - Ensure the visual prompt reflects the NEW keyword.
            - STRICTLY FORBID repeating words or random text stickers. 
            - Title text must appear ONCE.

            IMPORTANT: In the 'visualPrompt', if the IMAGE RULES ask to include text (e.g. {title}), replace {title} with the actual new "title" you generated.
            `,config:{responseMimeType:"application/json",responseSchema:{type:ue.OBJECT,properties:{targetKeyword:{type:ue.STRING},visualPrompt:{type:ue.STRING},title:{type:ue.STRING},description:{type:ue.STRING},tags:{type:ue.ARRAY,items:{type:ue.STRING}}},required:["title","description","tags"]}}});if(d.text)return JSON.parse(d.text);throw new Error("No response from Gemini")}catch(d){throw console.error("Error regenerating text:",d),d}},cE=async(t,e)=>new Promise((n,o)=>{const r=document.createElement("canvas"),i=r.getContext("2d");if(!i){o("Canvas context not supported");return}const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{if(r.width=s.width,r.height=s.height,i.drawImage(s,0,0),e.ctaText){const u=e.ctaText,d=e.ctaColor||"#E60023",c=e.ctaTextColor||"#FFFFFF",f=e.ctaPosition||"bottom-center",h=r.width*.045;i.font=`bold ${h}px sans-serif`;const m=i.measureText(u),g=h*1.5,S=h*.8,w=m.width+g*2,T=h+S*2,v=r.width*.05;let y=0,x=0;f==="bottom-right"?(y=r.width-w-v,x=r.height-T-v):f==="bottom-left"?(y=v,x=r.height-T-v):f==="top-right"?(y=r.width-w-v,x=v):f==="top-left"?(y=v,x=v):f==="center"?(y=(r.width-w)/2,x=(r.height-T)/2):f==="bottom-center"?(y=(r.width-w)/2,x=r.height-T-v):f==="top-center"?(y=(r.width-w)/2,x=v):(y=(r.width-w)/2,x=r.height-T-v),i.shadowColor="rgba(0,0,0,0.3)",i.shadowBlur=10,i.shadowOffsetX=2,i.shadowOffsetY=2,i.fillStyle=d,i.beginPath();const E=T/2;i.moveTo(y+E,x),i.lineTo(y+w-E,x),i.quadraticCurveTo(y+w,x,y+w,x+E),i.quadraticCurveTo(y+w,x+T,y+w-E,x+T),i.lineTo(y+E,x+T),i.quadraticCurveTo(y,x+T,y,x+E),i.quadraticCurveTo(y,x,y+E,x),i.closePath(),i.fill(),i.shadowColor="transparent",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.fillStyle=c,i.textAlign="center",i.textBaseline="middle",i.fillText(u,y+w/2,x+T/2+h*.05)}if(e.logoData){const u=new Image;u.onload=()=>{const d=e.logoSize||20,c=e.logoPosition||"bottom-right",f=r.width*(d/100),h=f*(u.height/u.width),m=r.width*.05,g=r.height*.05;let S=0,w=0;c==="top-left"?(S=m,w=g):c==="top-right"?(S=r.width-f-m,w=g):c==="bottom-left"?(S=m,w=r.height-h-g):c==="bottom-right"?(S=r.width-f-m,w=r.height-h-g):c==="center"?(S=(r.width-f)/2,w=(r.height-h)/2):c==="top-center"?(S=(r.width-f)/2,w=g):c==="bottom-center"&&(S=(r.width-f)/2,w=r.height-h-g),i.shadowColor="rgba(0,0,0,0.3)",i.shadowBlur=5,i.drawImage(u,S,w,f,h),n(r.toDataURL("image/png"))},u.onerror=d=>{console.warn("Logo failed to load"),n(r.toDataURL("image/png"))},u.src=e.logoData}else n(r.toDataURL("image/png"))},s.onerror=async()=>{try{const d=await(await fetch(t)).blob(),c=new FileReader;c.onloadend=()=>{const f=c.result,h=new Image;h.onload=()=>{r.width=h.width,r.height=h.height,i.drawImage(h,0,0),n(f)},h.src=f},c.readAsDataURL(d)}catch{o("Failed to load base image (CORS)")}},s.src=t}),fE=async(t,e,n,o)=>{var i,s,u,d,c,f;let r="";if(["ideogram","flux-schnell","flux-dev","sdxl-turbo","seedream4"].includes(e.model)){if(!o)throw new Error("Please add your Replicate API Token in Settings.");r=await uE(t,e,o)}else{if(!n)throw new Error("Google API Key is missing. Please check your settings.");const h=new er({apiKey:n});try{let m="9:16";if(e.ratio==="9:16"&&(m="9:16"),e.model==="gemini-2.5-flash-image"||e.model==="gemini-3-pro-image-preview"){e.ratio==="1:2"&&(m="9:16"),e.ratio==="2:3"&&(m="3:4"),e.ratio==="9:16"&&(m="9:16");const g={imageConfig:{aspectRatio:m,numberOfImages:1}};e.model==="gemini-3-pro-image-preview"&&(g.imageConfig.imageSize=e.imageSize||"1K");const S=[];e.referenceImages&&e.referenceImages.length>0&&e.referenceImages.forEach(v=>{try{const y=v.split(",")[1],x=v.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/),E=x?x[1]:"image/png";S.push({inlineData:{mimeType:E,data:y}})}catch(y){console.warn("Ref image error",y)}}),S.push({text:t});const w=await h.models.generateContent({model:e.model,contents:{parts:S},config:g});let T=!1;for(const v of((u=(s=(i=w.candidates)==null?void 0:i[0])==null?void 0:s.content)==null?void 0:u.parts)||[])if(v.inlineData){r=`data:image/png;base64,${v.inlineData.data}`,T=!0;break}if(!T)throw new Error("No image data received from Gemini")}else if(e.model==="imagen-4.0-generate-001"){const g=await h.models.generateImages({model:"imagen-4.0-generate-001",prompt:t,config:{numberOfImages:1,aspectRatio:e.ratio,outputMimeType:"image/jpeg"}});if((f=(c=(d=g.generatedImages)==null?void 0:d[0])==null?void 0:c.image)!=null&&f.imageBytes)r=`data:image/jpeg;base64,${g.generatedImages[0].image.imageBytes}`;else throw new Error("No image data received from Imagen")}}catch(m){throw console.error("Error generating image:",m),m}}if((e.logoData||e.ctaText)&&r)try{return await cE(r,e)}catch(h){return console.warn("Failed to apply overlays:",h),r}return r},pE=async(t,e,n)=>{var r,i,s;if(!n)throw new Error("Google API Key is missing. Please check your settings.");const o=new er({apiKey:n});try{const u=t.split(",")[1],d=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/),c=d?d[1]:"image/png",f=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{mimeType:c,data:u}},{text:e}]},config:{imageConfig:{aspectRatio:"9:16"}}});for(const h of((s=(i=(r=f.candidates)==null?void 0:r[0])==null?void 0:i.content)==null?void 0:s.parts)||[])if(h.inlineData)return`data:image/png;base64,${h.inlineData.data}`;throw new Error("No image data returned from edit")}catch(u){throw console.error("Error editing image:",u),u}},mE=async(t,e=[],n)=>n?(await new er({apiKey:n}).chats.create({model:"gemini-3-pro-preview",history:e.map(s=>({role:s.role,parts:[{text:s.text}]}))}).sendMessage({message:t})).text||"I didn't get that.":"Please enter your Google API Key in settings to chat.",hE=({googleApiKey:t})=>{const[e,n]=M.useState(!1),[o,r]=M.useState([{role:"model",text:"Hi! I can help you with Pinterest strategy or answer questions about your content."}]),[i,s]=M.useState(""),[u,d]=M.useState(!1),c=M.useRef(null),f=()=>{var m;(m=c.current)==null||m.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{f()},[o,e]);const h=async m=>{if(m.preventDefault(),!i.trim()||u)return;if(!t){r(S=>[...S,{role:"user",text:i}]),r(S=>[...S,{role:"model",text:"Please enter your Google API Key in the settings to start chatting."}]),s("");return}const g={role:"user",text:i};r(S=>[...S,g]),s(""),d(!0);try{const S=await mE(g.text,o,t);r(w=>[...w,{role:"model",text:S}])}catch{r(w=>[...w,{role:"model",text:"Sorry, I encountered an error. Please check your API key and try again."}])}finally{d(!1)}};return p.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end",children:[e&&p.jsxs("div",{className:"mb-4 w-80 md:w-96 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col animate-fade-in-up",style:{height:"500px",maxHeight:"80vh"},children:[p.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 flex justify-between items-center text-white shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-sm",children:"Gemini Assistant"}),p.jsx("p",{className:"text-[10px] text-white/80",children:"Powered by Gemini 3 Pro"})]})]}),p.jsx("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-slate-900 space-y-4",children:[o.map((m,g)=>p.jsx("div",{className:`flex ${m.role==="user"?"justify-end":"justify-start"}`,children:p.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${m.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-gray-700 dark:text-gray-200 rounded-bl-none shadow-sm"}`,children:m.text})},g)),u&&p.jsx("div",{className:"flex justify-start",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm flex gap-1",children:[p.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),p.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),p.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}),p.jsx("div",{ref:c})]}),p.jsxs("form",{onSubmit:h,className:"p-3 bg-white dark:bg-slate-800 border-t border-gray-100 dark:border-slate-700 flex gap-2 shrink-0",children:[p.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),placeholder:t?"Ask a question...":"API Key Required",disabled:!t,className:"flex-1 bg-gray-100 dark:bg-slate-700 border-0 rounded-full px-4 py-2 text-sm dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),p.jsx("button",{type:"submit",disabled:!i.trim()||u||!t,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-full disabled:opacity-50 transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),p.jsx("button",{onClick:()=>n(!e),className:"bg-indigo-600 hover:bg-indigo-700 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center transition-transform hover:scale-105",children:e?p.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):p.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})})]})},fc="ecomverse_admin_pass",gE=({isOpen:t,onClose:e})=>{const[n,o]=M.useState(!1),[r,i]=M.useState(""),[s,u]=M.useState(""),[d,c]=M.useState([]),[f,h]=M.useState(""),[m,g]=M.useState(""),[S,w]=M.useState(""),[T,v]=M.useState(!1);M.useEffect(()=>{const C=localStorage.getItem(fc);C&&t&&(i(C),y(C))},[t]);const y=async C=>{v(!0);try{const N=await fetch(`${wo.LICENSE_API_URL}?action=list`,{headers:{"x-admin-password":C}});if(N.ok){const A=await N.json();c(A),o(!0),localStorage.setItem(fc,C)}else throw new Error("Auth failed")}catch(N){console.error(N),r&&u("Invalid password or server error")}finally{v(!1)}},x=()=>{u(""),y(r)},E=async()=>{w("");const C=f.trim().toUpperCase(),N=m.trim();if(!C||!N){w("Key and Owner are required");return}try{const A=await fetch(`${wo.LICENSE_API_URL}?action=add`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":r},body:JSON.stringify({key:C,owner:N})});if(A.ok)h(""),g(""),y(r);else{const G=await A.json();w(G.message||"Failed to add key")}}catch{w("Network error")}},_=async C=>{if(confirm(`Delete ${C}?`))try{await fetch(`${wo.LICENSE_API_URL}?action=delete`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":r},body:JSON.stringify({key:C})}),y(r)}catch{alert("Failed to delete")}},I=async C=>{try{await fetch(`${wo.LICENSE_API_URL}?action=toggle`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":r},body:JSON.stringify({key:C})}),y(r)}catch{alert("Failed to update")}},k=()=>{n||i(""),e()};return t?p.jsxs("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:k}),p.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-3xl overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-slate-700 flex items-center gap-3 bg-gradient-to-r from-purple-600 to-indigo-600",children:[p.jsx("h2",{className:"text-lg font-bold text-white flex-1",children:"License Admin Panel (PHP)"}),p.jsx("button",{onClick:k,className:"text-white/70 hover:text-white",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-lg p-4 border border-gray-200 dark:border-slate-600",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-800 dark:text-white mb-3",children:"Add New License Key"}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[p.jsx("input",{type:"text",value:f,onChange:C=>h(C.target.value.toUpperCase()),placeholder:"License Key",className:"flex-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-3 py-2 text-sm text-gray-700 dark:text-white outline-none font-mono"}),p.jsx("input",{type:"text",value:m,onChange:C=>g(C.target.value),placeholder:"Owner Name",className:"flex-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-3 py-2 text-sm text-gray-700 dark:text-white outline-none"}),p.jsx("button",{onClick:E,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-bold rounded-lg",children:"Add"})]}),S&&p.jsx("p",{className:"text-red-500 text-xs mt-2",children:S})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 overflow-hidden",children:[p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Key"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Owner"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),p.jsx("th",{className:"px-4 py-2 text-right text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:d.map(C=>p.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/30",children:[p.jsx("td",{className:"px-4 py-3 font-mono text-xs text-gray-800 dark:text-white",children:C.key}),p.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:C.owner}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("button",{onClick:()=>I(C.key),className:`px-2 py-1 text-xs font-medium rounded-full transition-colors ${C.active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:C.active?"Active":"Inactive"})}),p.jsx("td",{className:"px-4 py-3 text-right",children:p.jsx("button",{onClick:()=>_(C.key),className:"text-red-500 hover:text-red-600 text-xs font-medium",children:"Delete"})})]},C.key))})]}),d.length===0&&p.jsx("p",{className:"text-center py-4 text-gray-400",children:"No keys found."})]})]}):p.jsxs("div",{className:"max-w-sm mx-auto text-center py-8",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"Admin Login"}),p.jsx("input",{type:"password",value:r,onChange:C=>i(C.target.value),onKeyPress:C=>C.key==="Enter"&&x(),placeholder:"Enter admin password",className:"w-full bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg p-3 text-center text-gray-700 dark:text-white mb-3 focus:ring-2 focus:ring-purple-500 outline-none"}),s&&p.jsx("p",{className:"text-red-500 text-sm mb-3",children:s}),p.jsx("button",{onClick:x,disabled:T,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition-colors disabled:opacity-50",children:T?"Verifying...":"Unlock"})]})})]})]}):null},yE=({isOpen:t,onClose:e,pins:n,csvSettings:o,imgbbApiKey:r})=>{const[i,s]=M.useState([]),[u,d]=M.useState(!1),[c,f]=M.useState(0);M.useEffect(()=>{if(t&&n.length>0){const w=h(n,o);s(w)}},[t,n,o]);const h=(w,T)=>{const v=new Date,y=parseInt(T.postInterval),x=T.pinsPerDay;let E=new Date(v);E.setMinutes(Math.ceil(E.getMinutes()/30)*30,0,0);let _=0;return w.filter(I=>I.status==="complete"&&I.imageUrl).map((I,k)=>{var N,A;_>=x&&(E.setDate(E.getDate()+1),E.setHours(8,0,0,0),_=0);const C=new Date(E);return E.setMinutes(E.getMinutes()+y),_++,{id:I.id,title:I.title,description:I.description,mediaUrl:(N=I.imageUrl)!=null&&N.startsWith("data:")?"(auto-filled on export)":I.imageUrl||"",link:I.url,pinterestBoard:"",publishDate:m(C),thumbnail:"",keywords:((A=I.tags)==null?void 0:A.join(", "))||""}})},m=w=>{const T=w.getFullYear(),v=String(w.getMonth()+1).padStart(2,"0"),y=String(w.getDate()).padStart(2,"0"),x=String(w.getHours()).padStart(2,"0"),E=String(w.getMinutes()).padStart(2,"0");return`${T}-${v}-${y}T${x}:${E}`},g=(w,T,v)=>{s(y=>y.map(x=>x.id===w?{...x,[T]:v}:x))},S=async()=>{var C;if(i.length===0)return;d(!0),f(0);let w=[...i];if(r){const N=n.filter(A=>{var G;return((G=A.imageUrl)==null?void 0:G.startsWith("data:"))&&i.find(X=>X.id===A.id)});for(let A=0;A<N.length;A++){const G=N[A];try{const z=await(await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:(()=>{const K=new FormData;return K.append("key",r),K.append("image",G.imageUrl.split(",")[1]),K})()})).json();z.success&&((C=z.data)!=null&&C.url)&&(w=w.map(K=>K.id===G.id?{...K,mediaUrl:z.data.url}:K))}catch(X){console.error("Failed to upload image:",X)}f(Math.round((A+1)/N.length*100))}}const T=["Title","Description","Media URL","Link","Pinterest Board","Publish Date","Thumbnail","Keywords"],v=N=>`"${String(N||"").replace(/[\r\n\t]+/g," ").trim().replace(/"/g,'""')}"`,y=w.map(N=>[v(N.title),v(N.description),v(N.mediaUrl),v(N.link),v(N.pinterestBoard),v(N.publishDate.replace("T"," ")),v(N.thumbnail),v(N.keywords)].join(",")),x="\uFEFF"+[T.join(","),...y].join(`
`),E=new Blob([x],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a"),I=URL.createObjectURL(E),k=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19);_.setAttribute("href",I),_.setAttribute("download",`pinterest-bulk-upload-${k}.csv`),document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(I),d(!1)};return t?p.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-slate-900",children:[p.jsxs("div",{className:"h-16 border-b border-slate-700 flex items-center justify-between px-6 bg-slate-800 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 flex items-center justify-center text-white",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-lg font-bold text-white",children:"CSV Editor - Review & Edit Your Pinterest Bulk Upload"}),p.jsx("p",{className:"text-xs text-gray-400",children:"Edit all fields below. Changes are saved automatically. Export when ready!"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:S,disabled:u||i.length===0,className:`px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 transition-colors ${u?"bg-emerald-600 text-white cursor-wait":i.length===0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:u?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading... ",c,"%"]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]})}),p.jsxs("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium text-sm flex items-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Pins"]})]})]}),p.jsx("div",{className:"flex-1 overflow-auto p-6",children:i.length===0?p.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:p.jsxs("div",{className:"text-center",children:[p.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.jsx("p",{className:"text-lg",children:"No completed pins to export"}),p.jsx("p",{className:"text-sm mt-2",children:"Generate and complete some pins first, then come back here."})]})}):p.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{className:"bg-slate-700",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-40",children:"Title"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-64",children:"Description"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-48",children:"Media URL"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-48",children:"Link"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-32",children:"Pinterest Board"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-40",children:"Publish Date"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-32",children:"Thumbnail"}),p.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider w-40",children:"Keywords"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-700",children:i.map(w=>p.jsxs("tr",{className:"hover:bg-slate-700/50",children:[p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.title,onChange:T=>g(w.id,"title",T.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("textarea",{value:w.description,onChange:T=>g(w.id,"description",T.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none resize-none h-16"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.mediaUrl,onChange:T=>g(w.id,"mediaUrl",T.target.value),placeholder:r?"ImgBB URL (auto-filled)":"Enter URL...",className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.link,onChange:T=>g(w.id,"link",T.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.pinterestBoard,onChange:T=>g(w.id,"pinterestBoard",T.target.value),placeholder:"e.g., Recipes",className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"datetime-local",value:w.publishDate,onChange:T=>g(w.id,"publishDate",T.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.thumbnail,onChange:T=>g(w.id,"thumbnail",T.target.value),placeholder:"Optional",className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})}),p.jsx("td",{className:"px-4 py-3",children:p.jsx("input",{type:"text",value:w.keywords,onChange:T=>g(w.id,"keywords",T.target.value),placeholder:"e.g., healthy, recipes",className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-emerald-500 outline-none"})})]},w.id))})]})})})]}):null},vE=()=>{const[t,e]=M.useState([]),[n,o]=M.useState(!1),[r,i]=M.useState(!1),[s,u]=M.useState(!1),[d,c]=M.useState(!1),[f,h]=M.useState(!1),[m,g]=M.useState(()=>localStorage.getItem("ecomverse_google_key")||""),[S,w]=M.useState(()=>localStorage.getItem("ecomverse_replicate_key")||""),[T,v]=M.useState(()=>localStorage.getItem("ecomverse_theme")==="dark");M.useEffect(()=>{T?(document.documentElement.classList.add("dark"),localStorage.setItem("ecomverse_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("ecomverse_theme","light"))},[T]);const[y,x]=M.useState(()=>localStorage.getItem("ecomverse_text_rules_v3")||`You're a Pinterest content writer optimizing blog posts and product page for maximum search visibility and clicks.

For this blog post product page URL, write:
1. A Pinterest title (under 80 characters) that starts with an emoji and includes the main keyword
2. A Pinterest description (EXACTLY 3 sentences, NO MORE) that clearly summarizes the post

CRITICAL RULES FOR DESCRIPTION:
- EXACTLY 3 sentences (not 4, not 5, just 3)
- Target Keyword must appear in the first sentence
- Include 3-4 searchable SEO keywords (annotations) naturally in the text
- DO NOT use asterisks (**) or bolding for keywords. Write them as normal text.
- Be concise and punchy - every word must count
- Focus on benefits and what readers will learn/get
- Keywords should flow naturally, not feel forced

Blog post URL: \${url}\${interestsNote}

Format your response EXACTLY like this example:

 Vegan Buddha Bowl  Clean, Colorful, and Fully Customizable

This vegan Buddha bowl is packed with plant-based ingredients, quinoa, and roasted vegetables. Perfect for meal prep or a quick healthy lunch. Customizable, colorful, and delicious!

Generate the title and description now (remember: EXACTLY 3 sentences):`),[E,_]=M.useState(()=>localStorage.getItem("ecomverse_image_rules_v3")||`Create a visual prompt for a high-converting, vibrant Pinterest pin.

1. IMAGE: High-quality, eye-catching, and contextually relevant to the content. Use dynamic angles and rich colors.
2. TYPOGRAPHY: Include the title "{title}" in a bold, readable, professional font. 
3. STYLE: Creative, "Poster Style", or "Editorial". It can be colorful and fun, but must remain professional.

CRITICAL TEXT RULES (DO NOT IGNORE):
- The title text must appear EXACTLY ONCE as a headline or overlay.
- DO NOT repeat the words.
- DO NOT create a "word cloud" or "collage of text".
- DO NOT use random stickers containing text.
- The rest of the image should be visual elements (photos, graphics, colors), NOT text.`),[I,k]=M.useState(()=>{const F=localStorage.getItem("ecomverse_pin_config");return F?JSON.parse(F):{style:"basic_bottom",ratio:"9:16",model:"gemini-2.5-flash-image",contentType:"article",websiteUrl:"",referenceImages:[],imageSize:"1K",logoData:void 0,logoPosition:"bottom-right",logoSize:20,ctaText:"",ctaColor:"#E60023",ctaTextColor:"#FFFFFF",ctaPosition:"bottom-center"}}),[C,N]=M.useState(()=>{const F=localStorage.getItem("ecomverse_csv_settings");return F?JSON.parse(F):{imgbbApiKey:"",postInterval:"60",pinsPerDay:15}});M.useEffect(()=>{localStorage.getItem("ecomverse_license_active")==="true"&&h(!0)},[]),M.useEffect(()=>{new URLSearchParams(window.location.search).get("admin")==="true"&&u(!0)},[]);const A=(F,V)=>{g(F),w(V),h(!0)},G=(F,V,U,O,Ee,Xe)=>{x(F),_(V),k(U),w(O),g(Ee),N(Xe),localStorage.setItem("ecomverse_text_rules_v3",F),localStorage.setItem("ecomverse_image_rules_v3",V),localStorage.setItem("ecomverse_pin_config",JSON.stringify(U)),localStorage.setItem("ecomverse_replicate_key",O),localStorage.setItem("ecomverse_google_key",Ee),localStorage.setItem("ecomverse_csv_settings",JSON.stringify(Xe))},X=async(F,V)=>{if(!m){alert("Google API Key is missing. Please add it in Settings."),i(!0);return}o(!0);const U=F.map(O=>({id:Math.random().toString(36).substr(2,9),url:O,status:"analyzing",targetKeyword:"",annotatedInterests:"",visualPrompt:"",title:"",description:"",tags:[],config:V}));e(O=>[...U,...O]);for(const O of U)try{const Ee=await cc(O.url,O.config,y,E,"","",m);e(Xe=>Xe.map(Ae=>Ae.id===O.id?{...Ae,status:"ready_for_generation",targetKeyword:Ee.targetKeyword||"",visualPrompt:Ee.visualPrompt,title:Ee.title,description:Ee.description,tags:Ee.tags}:Ae))}catch{e(Xe=>Xe.map(Ae=>Ae.id===O.id?{...Ae,status:"error",error:"Failed to analyze URL"}:Ae))}o(!1)},z=async F=>{const V=t.find(U=>U.id===F);if(V&&m){fe(F,{status:"analyzing",error:void 0,imageUrl:void 0});try{const U=await cc(V.url,V.config,y,E,"","",m);fe(F,{status:"ready_for_generation",targetKeyword:U.targetKeyword||"",visualPrompt:U.visualPrompt,title:U.title,description:U.description,tags:U.tags})}catch{fe(F,{status:"error",error:"Failed to recreate pin details"})}}},K=async F=>{const V=t.find(U=>U.id===F);if(V&&m)try{const U=await dE(V.url,V.targetKeyword,V.annotatedInterests,y,E,m);fe(F,{title:U.title,description:U.description,tags:U.tags,visualPrompt:U.visualPrompt||V.visualPrompt})}catch(U){console.error("Failed to regenerate text",U)}},fe=(F,V)=>{e(U=>U.map(O=>O.id===F?{...O,...V}:O))},Y=async()=>{const F=t.filter(V=>V.status==="ready_for_generation"||V.status==="error");F.length!==0&&(e(V=>V.map(U=>U.status==="ready_for_generation"||U.status==="error"?{...U,status:"generating_image",error:void 0}:U)),await Promise.all(F.map(async V=>{await pe(V.id,V.visualPrompt,V.config)})))},pe=async(F,V,U)=>{fe(F,{status:"generating_image",error:void 0});try{const O=await fE(V,U,m,S);fe(F,{status:"complete",imageUrl:O})}catch(O){fe(F,{status:"error",error:O.message||"Image generation failed"})}},L=async(F,V)=>{const U=t.find(O=>O.id===F);if(!(!U||!U.imageUrl)&&m)try{const O=await pE(U.imageUrl,V,m);fe(F,{imageUrl:O})}catch(O){throw console.error("Edit failed",O),O}},H=()=>{const F=t.filter(V=>V.imageUrl&&V.status==="complete");F.length!==0&&F.forEach((V,U)=>{B(V.id)})},B=F=>{const V=t.find(Xe=>Xe.id===F);if(!V||!V.imageUrl)return;const U=document.createElement("a");U.href=V.imageUrl;let O=V.title.replace(/[^a-z0-9\s-_]/gi,"").trim().replace(/\s+/g," ");O||(O="image");let Ee="png";(V.imageUrl.startsWith("data:image/jpeg")||V.imageUrl.includes(".jpg")||V.imageUrl.includes(".jpeg"))&&(Ee="jpg"),U.download=`${O}.${Ee}`,document.body.appendChild(U),U.click(),document.body.removeChild(U)},Z=()=>{if(t.length===0)return;const F=["ID","Status","URL","Content Type","Target Keyword","Title","Description","Tags","Visual Prompt","Annotated Interests","Image URL Link","Pin Style","Aspect Ratio","Model","Website URL"],V=P=>P?String(P).replace(/[\r\n\t]+/g," ").trim():"",U=P=>`"${V(P).replace(/"/g,'""')}"`,O=t.map(P=>{var ge,Re,St,it,Ut,on;let ee=P.imageUrl||"";return ee.startsWith("data:")&&(ee="Base64 Image Data (Too large for CSV - Use Download All)"),[U(P.id),U(P.status),U(P.url),U((ge=P.config)==null?void 0:ge.contentType),U(P.targetKeyword),U(P.title),U(P.description),U((Re=P.tags)==null?void 0:Re.join(", ")),U(P.visualPrompt),U(P.annotatedInterests),U(ee),U((St=P.config)==null?void 0:St.style),U((it=P.config)==null?void 0:it.ratio),U((Ut=P.config)==null?void 0:Ut.model),U((on=P.config)==null?void 0:on.websiteUrl)].join(",")}),Ee="\uFEFF"+[F.join(","),...O].join(`
`),Xe=new Blob([Ee],{type:"text/csv;charset=utf-8;"}),Ae=document.createElement("a"),tr=URL.createObjectURL(Xe),nr=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19);Ae.setAttribute("href",tr),Ae.setAttribute("download",`pinterest-pins-export-${nr}.csv`),document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(tr)},re=()=>{t.length!==0&&e([])},qe=t.filter(F=>F.status==="complete").length,Ye=t.filter(F=>F.status==="ready_for_generation").length;return p.jsxs("div",{className:"flex flex-col h-screen bg-white dark:bg-slate-900 font-sans text-slate-800 dark:text-slate-200 transition-colors",children:[!f&&p.jsx(Qg,{onActivate:A,onOpenAdmin:()=>u(!0)}),p.jsx(gE,{isOpen:s,onClose:()=>u(!1)}),p.jsx(Xg,{isOpen:r,onClose:()=>i(!1),customRules:y,imageRules:E,defaultConfig:I,replicateApiKey:S,googleApiKey:m,csvSettings:C,onSave:G}),p.jsx(yE,{isOpen:d,onClose:()=>c(!1),pins:t,csvSettings:C,imgbbApiKey:C.imgbbApiKey}),p.jsx(hE,{googleApiKey:m}),p.jsxs("header",{className:"h-16 border-b border-gray-200 dark:border-slate-800 flex items-center justify-between px-6 bg-white dark:bg-slate-900 shrink-0 z-10 shadow-sm transition-colors",children:[p.jsx("div",{className:"flex items-center gap-4",children:p.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",onClick:()=>window.location.reload(),children:[p.jsxs("div",{className:"flex items-center h-10 select-none",children:[p.jsx("span",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:"E"}),p.jsx("div",{className:"w-0.5 h-6 bg-slate-900 dark:bg-white mx-1"}),p.jsx("span",{className:"text-3xl font-black text-yellow-400 tracking-tighter",children:"V"})]}),p.jsxs("div",{className:"flex flex-col justify-center -space-y-1 select-none",children:[p.jsxs("div",{className:"flex text-lg font-bold tracking-tight",children:[p.jsx("span",{className:"text-slate-900 dark:text-white",children:"ECOM"}),p.jsx("span",{className:"text-yellow-400",children:"VERSE"})]}),p.jsx("p",{className:"text-[9px] text-gray-400 dark:text-gray-500 font-medium tracking-widest uppercase",children:"Pinterest Automation"})]})]})}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-slate-800 rounded-lg p-1",children:[p.jsxs("button",{onClick:()=>v(!1),className:`px-3 py-1.5 rounded-md shadow-sm text-xs font-medium flex items-center gap-1 transition-colors
                     ${T?"text-gray-500 hover:text-gray-300":"bg-white text-gray-800"}`,children:[p.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),"Light"]}),p.jsx("button",{onClick:()=>v(!0),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors
                     ${T?"bg-slate-700 text-white shadow-sm":"text-gray-500 hover:text-gray-800 dark:hover:text-gray-300"}`,children:"Dark"})]}),p.jsxs("button",{onClick:()=>i(!0),className:"bg-slate-800 hover:bg-slate-900 dark:bg-slate-700 dark:hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider flex items-center gap-2 shadow-sm transition-colors",children:[p.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})]})]}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsx(Kg,{onGeneratePrompts:X,isProcessing:n,initialConfig:I}),p.jsxs("main",{className:"flex-1 bg-gray-50 dark:bg-slate-950 flex flex-col overflow-hidden transition-colors",children:[p.jsxs("div",{className:"px-8 py-6 flex flex-col xl:flex-row xl:items-center justify-between gap-4 shrink-0",children:[p.jsx("div",{children:p.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Generated Prompts & Pins"})}),p.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 xl:pb-0",children:[p.jsxs("button",{onClick:Y,disabled:Ye===0,className:`px-4 py-2 rounded-md text-sm font-medium shadow-sm flex items-center gap-2 text-white transition-colors whitespace-nowrap
                            ${Ye>0?"bg-emerald-500 hover:bg-emerald-600":"bg-gray-300 dark:bg-slate-700 cursor-not-allowed"}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Create All Pins"]}),p.jsxs("button",{onClick:H,disabled:qe===0,className:`px-4 py-2 rounded-md text-sm font-medium shadow-sm flex items-center gap-2 text-white transition-colors whitespace-nowrap
                            ${qe>0?"bg-emerald-500 hover:bg-emerald-600":"bg-gray-300 dark:bg-slate-700 cursor-not-allowed"}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download All Images"]}),p.jsxs("button",{onClick:re,disabled:t.length===0,className:`px-4 py-2 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 border border-red-200 dark:border-red-800/50 rounded-md text-sm font-medium shadow-sm flex items-center gap-2 text-red-600 dark:text-red-400 transition-colors whitespace-nowrap
                            ${t.length===0?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All"]}),p.jsxs("button",{onClick:()=>c(!0),disabled:qe===0,className:`px-4 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-700 rounded-md text-sm font-medium shadow-sm flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors whitespace-nowrap
                            ${qe===0?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View CSV Editor"]}),p.jsxs("button",{onClick:Z,disabled:t.length===0,className:`px-4 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-md text-sm font-medium shadow-sm flex items-center gap-2 text-white transition-colors whitespace-nowrap
                            ${t.length===0?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV for Pinterest"]})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto px-8 pb-8",children:t.length===0?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 dark:text-slate-600",children:[p.jsx("div",{className:"mb-6 opacity-20",children:p.jsx("svg",{className:"w-32 h-32",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx("h3",{className:"text-xl font-medium text-gray-400 dark:text-slate-500",children:"Enter URLs above to generate Pinterest pin prompts"}),p.jsx("div",{className:"mt-8",children:p.jsx("svg",{className:"w-12 h-12 text-gray-200 dark:text-slate-700 animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6",children:t.map(F=>p.jsx("div",{className:"h-full",children:p.jsx(Yg,{pin:F,onUpdate:fe,onGenerateImage:V=>pe(V,F.visualPrompt,F.config),onRecreate:()=>z(F.id),onRegenerateText:()=>K(F.id),onDownload:B,onEditImage:L})},F.id))})})]})]})]})},vm=document.getElementById("root");if(!vm)throw new Error("Could not find root element to mount to");const xE=cs.createRoot(vm);xE.render(p.jsx(bm.StrictMode,{children:p.jsx(vE,{})}));
